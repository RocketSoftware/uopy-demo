<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 10.0.3"/>
    <title>uopy API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;}nav.pdoc{--pad:1.75rem;--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent }nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc li{display:block;margin:0;padding:.2rem 0 .2rem var(--indent);transition:all 100ms;}nav.pdoc > div > ul > li{padding-left:0;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--code);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc section{margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.pdoc details{filter:opacity(1);}.pdoc details:not([open]){height:0;}.pdoc details > summary{position:absolute;top:-35px;right:0;font-size:.75rem;color:var(--muted);padding:0 .7em;user-select:none;cursor:pointer;}.pdoc details > summary:focus{outline:0;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc > section:first-of-type > .docstring{margin-bottom:2.5rem;}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc .headerlink{position:absolute;width:0;margin-left:-1.5rem;line-height:1.4rem;font-size:1.5rem;font-weight:normal;transition:all 100ms ease-in-out;opacity:0;user-select:none;}.pdoc .attr > .headerlink{margin-left:-2.5rem;}.pdoc *:hover > .headerlink,.pdoc *:target > .attr > .headerlink{opacity:1;}.pdoc .attr{display:block;color:var(--text);margin:.5rem 0 .5rem;padding:.4rem 5rem .4rem 1rem;background-color:var(--accent);}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{white-space:pre-wrap;}.pdoc .annotation{color:var(--annotation);}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>
<a href="https://www.rocketsoftware.com/">            <img src="https://www.rocketsoftware.com/themes/rocketon/logo-black.svg" class="logo" alt="project logo"/>
</a>



        <h2>API Documentation</h2>
            <ul class="memberlist">
            <li>
                    <a class="function" href="#connect">connect</a>
            </li>
            <li>
                    <a class="variable" href="#config">config</a>
            </li>
            <li>
                    <a class="class" href="#Session">Session</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Session.__init__">Session</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.bind_pool">bind_pool</a>
                        </li>
                        <li>
                                <a class="variable" href="#Session.config">config</a>
                        </li>
                        <li>
                                <a class="variable" href="#Session.idle_start_time">idle_start_time</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.start_idle">start_idle</a>
                        </li>
                        <li>
                                <a class="variable" href="#Session.db_type">db_type</a>
                        </li>
                        <li>
                                <a class="variable" href="#Session.is_nls_enabled">is_nls_enabled</a>
                        </li>
                        <li>
                                <a class="variable" href="#Session.encoding">encoding</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.sync_marks">sync_marks</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.encode">encode</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.decode">decode</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.rpc_call">rpc_call</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.read_packet4cmd">read_packet4cmd</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.connect">connect</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.check_rpc_error">check_rpc_error</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.health_check">health_check</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.hard_close">hard_close</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.get_atvar">get_atvar</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.reset">reset</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.close">close</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.bind_command">bind_command</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.tx_start">tx_start</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.tx_commit">tx_commit</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.tx_rollback">tx_rollback</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.tx_level">tx_level</a>
                        </li>
                        <li>
                                <a class="function" href="#Session.tx_is_active">tx_is_active</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Command">Command</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Command.__init__">Command</a>
                        </li>
                        <li>
                                <a class="variable" href="#Command.status">status</a>
                        </li>
                        <li>
                                <a class="variable" href="#Command.response">response</a>
                        </li>
                        <li>
                                <a class="variable" href="#Command.buffer_size">buffer_size</a>
                        </li>
                        <li>
                                <a class="function" href="#Command.run">run</a>
                        </li>
                        <li>
                                <a class="function" href="#Command.cancel">cancel</a>
                        </li>
                        <li>
                                <a class="function" href="#Command.reply">reply</a>
                        </li>
                        <li>
                                <a class="function" href="#Command.next_response">next_response</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#DynArray">DynArray</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#DynArray.__init__">DynArray</a>
                        </li>
                        <li>
                                <a class="function" href="#DynArray.make_list">make_list</a>
                        </li>
                        <li>
                                <a class="function" href="#DynArray.make_nested_list">make_nested_list</a>
                        </li>
                        <li>
                                <a class="function" href="#DynArray.iconv">iconv</a>
                        </li>
                        <li>
                                <a class="function" href="#DynArray.oconv">oconv</a>
                        </li>
                        <li>
                                <a class="function" href="#DynArray.format">format</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#UOError">UOError</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#UOError.__init__">UOError</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#File">File</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#File.__init__">File</a>
                        </li>
                        <li>
                                <a class="variable" href="#File.handle">handle</a>
                        </li>
                        <li>
                                <a class="variable" href="#File.status">status</a>
                        </li>
                        <li>
                                <a class="variable" href="#File.is_opened">is_opened</a>
                        </li>
                        <li>
                                <a class="function" href="#File.open">open</a>
                        </li>
                        <li>
                                <a class="function" href="#File.clear">clear</a>
                        </li>
                        <li>
                                <a class="function" href="#File.close">close</a>
                        </li>
                        <li>
                                <a class="function" href="#File.delete">delete</a>
                        </li>
                        <li>
                                <a class="function" href="#File.read">read</a>
                        </li>
                        <li>
                                <a class="function" href="#File.write">write</a>
                        </li>
                        <li>
                                <a class="function" href="#File.read_field">read_field</a>
                        </li>
                        <li>
                                <a class="function" href="#File.write_field">write_field</a>
                        </li>
                        <li>
                                <a class="function" href="#File.lock_file">lock_file</a>
                        </li>
                        <li>
                                <a class="function" href="#File.unlock_file">unlock_file</a>
                        </li>
                        <li>
                                <a class="function" href="#File.lock">lock</a>
                        </li>
                        <li>
                                <a class="function" href="#File.unlock">unlock</a>
                        </li>
                        <li>
                                <a class="function" href="#File.is_locked">is_locked</a>
                        </li>
                        <li>
                                <a class="function" href="#File.get_ak_info">get_ak_info</a>
                        </li>
                        <li>
                                <a class="function" href="#File.itype">itype</a>
                        </li>
                        <li>
                                <a class="function" href="#File.read_named_fields">read_named_fields</a>
                        </li>
                        <li>
                                <a class="function" href="#File.write_named_fields">write_named_fields</a>
                        </li>
                        <li>
                                <a class="function" href="#File.read_records">read_records</a>
                        </li>
                        <li>
                                <a class="function" href="#File.write_records">write_records</a>
                        </li>
                        <li>
                                <a class="function" href="#File.fileInfoEx">fileInfoEx</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#SequentialFile">SequentialFile</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SequentialFile.__init__">SequentialFile</a>
                        </li>
                        <li>
                                <a class="variable" href="#SequentialFile.status">status</a>
                        </li>
                        <li>
                                <a class="variable" href="#SequentialFile.block_size">block_size</a>
                        </li>
                        <li>
                                <a class="variable" href="#SequentialFile.timeout">timeout</a>
                        </li>
                        <li>
                                <a class="function" href="#SequentialFile.open">open</a>
                        </li>
                        <li>
                                <a class="function" href="#SequentialFile.close">close</a>
                        </li>
                        <li>
                                <a class="function" href="#SequentialFile.seek">seek</a>
                        </li>
                        <li>
                                <a class="function" href="#SequentialFile.write_eof">write_eof</a>
                        </li>
                        <li>
                                <a class="function" href="#SequentialFile.write_block">write_block</a>
                        </li>
                        <li>
                                <a class="function" href="#SequentialFile.write_line">write_line</a>
                        </li>
                        <li>
                                <a class="function" href="#SequentialFile.read_line">read_line</a>
                        </li>
                        <li>
                                <a class="function" href="#SequentialFile.read_block">read_block</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Dictionary">Dictionary</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Dictionary.__init__">Dictionary</a>
                        </li>
                        <li>
                                <a class="function" href="#Dictionary.get_assoc">get_assoc</a>
                        </li>
                        <li>
                                <a class="function" href="#Dictionary.set_assoc">set_assoc</a>
                        </li>
                        <li>
                                <a class="function" href="#Dictionary.get_conv">get_conv</a>
                        </li>
                        <li>
                                <a class="function" href="#Dictionary.set_conv">set_conv</a>
                        </li>
                        <li>
                                <a class="function" href="#Dictionary.get_format">get_format</a>
                        </li>
                        <li>
                                <a class="function" href="#Dictionary.set_format">set_format</a>
                        </li>
                        <li>
                                <a class="function" href="#Dictionary.get_loc">get_loc</a>
                        </li>
                        <li>
                                <a class="function" href="#Dictionary.set_loc">set_loc</a>
                        </li>
                        <li>
                                <a class="function" href="#Dictionary.get_name">get_name</a>
                        </li>
                        <li>
                                <a class="function" href="#Dictionary.set_name">set_name</a>
                        </li>
                        <li>
                                <a class="function" href="#Dictionary.get_sm">get_sm</a>
                        </li>
                        <li>
                                <a class="function" href="#Dictionary.set_sm">set_sm</a>
                        </li>
                        <li>
                                <a class="function" href="#Dictionary.get_sql_type">get_sql_type</a>
                        </li>
                        <li>
                                <a class="function" href="#Dictionary.set_sql_type">set_sql_type</a>
                        </li>
                        <li>
                                <a class="function" href="#Dictionary.get_type">get_type</a>
                        </li>
                        <li>
                                <a class="function" href="#Dictionary.set_type">set_type</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#List">List</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#List.__init__">List</a>
                        </li>
                        <li>
                                <a class="function" href="#List.select">select</a>
                        </li>
                        <li>
                                <a class="function" href="#List.clear">clear</a>
                        </li>
                        <li>
                                <a class="function" href="#List.next">next</a>
                        </li>
                        <li>
                                <a class="function" href="#List.read_list">read_list</a>
                        </li>
                        <li>
                                <a class="function" href="#List.form_list">form_list</a>
                        </li>
                        <li>
                                <a class="function" href="#List.select_alternate_key">select_alternate_key</a>
                        </li>
                        <li>
                                <a class="function" href="#List.select_matching_ak">select_matching_ak</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Subroutine">Subroutine</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Subroutine.__init__">Subroutine</a>
                        </li>
                        <li>
                                <a class="function" href="#Subroutine.call">call</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#UOFileError">UOFileError</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#UOFileError.__init__">UOFileError</a>
                        </li>
                        <li>
                                <a class="variable" href="#UOFileError.response_errors">response_errors</a>
                        </li>
                        <li>
                                <a class="variable" href="#UOFileError.id_list">id_list</a>
                        </li>
                </ul>

            </li>
    </ul>


            <footer>uopy@1.2.0</footer>

        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section>
                    <h1 class="modulename">
uopy    </h1>

                        <div class="docstring"><p>UniObjects for Python is a Python package from Rocket Software. It is a client API that allows Python applications
to access Rocket MV Databases over the network.</p>

<p>Specifically, it enables Python developers to:</p>

<pre><code>1) remotely connect to MV databases

1) call BASIC catalogued subroutines

2) run TCL commands

3) read/write MV files

4) handle MV dynamic arrays

5) manage MV SELECT lists

6) control MV transactions
</code></pre>

<p>Configuration:</p>

<pre><code>UOPY supports a list of configuration parameters. They are grouped into 4 categories: connection, pooling, logging,
and ssl_auth. Internally all the configuration parameters are preset to default values deemed to work for a minimal
UOPY application development environment. To override these default values, UOPY supports an external
configuration file - 'uopy.ini', in which a user can specify different values for some or all of the parameters. In
some cases, this enables users to change how the application behaves without having to make any code changes, such
as turning connection pooling on and off or making all connections to the database secure.

For example, on Windows 10 (US-English), the default parameter values are:

    connection: {'host': 'localhost', 'account': 'XDEMO', 'port': 31438, 'timeout': 300, 'service': 'defcs',
    'encoding': 'cp1252', 'ssl': False}

    pooling: {'pooling_on': False, 'min_pool_size': 1, 'max_pool_size': 10, 'max_wait_time': 30,
    'idle_remove_threshold': 300, 'idle_remove_interval': 300}

    logging: {'level': 'WARNING', 'format': 'standard', 'dir': './logs', 'file_name': 'uopy.log', 'max_size': 524288,
    'backup_count': 5, 'unirpc_debug': False, 'log_data_max_size': 1024}

    ssl_auth: {'client_auth_required': False, 'server_cert_file': '', 'client_cert_file': '', 'client_key_file': '',
    'check_hostname': False}

If the uopy.ini file is present in the current working directory with the following settings:

    [connection]
    host = uv1211.rocketsoftware.com
    account = XDEMO
    port = 41438
    timeout = 100
    service = udcs
    ssl = True

    [ssl_auth]
    server_cert_file="c:\temp\desktop-ppdt4ds.crt"

    [pooling]
    pooling_on = True
    max_wait_time = 60
    idle_remove_threshold = 300
    idle_remove_interval = 300
    min_pool_size = 5
    max_pool_size = 15

    [logging]
    level = DEBUG
    backup_count = 10
    log_data_max_size = 256

then when uopy is imported, it will combine uopy.ini with the internal default configuration, resulting in the
actual runtime configuration (see the Examples below). Please note that most of these configuration values cannot
be changed by the application at runtime, with the exception of the values in the connection category and the pool
size values in the pooling category, which can be passed in with different values to <a href="#connect">uopy.connect()</a>.
</code></pre>

<p>Logging:</p>

<pre><code>UOPY uses a rotating log strategy which is configurable in uopy.ini as shown above.

Specifically,
    level: the logging level, can be CRITICAL(50), ERROR(40), WARNING (30, default), INFO(20), DEBUG(10).

    format: can be standard or simple - the difference is that source code line no is provided in the standard format.

    dir: the directory where log files are stored.

    file_name: the log file name.

    max_size: the maximum size of a single log file.

    backup_count: the number of backup log files to rotate through.

    unirpc_debug: if set to True and the logging level is DEBUG, all UniRPC packets are dumped into the log files.

    log_data_max_size: the maximum length for any data logged when logging level is DEBUG - the default is 1k.
        For instance, if a subroutine parameter is a XML string greater than 1K in size, it will be truncated to 1K
        in the log file.
</code></pre>

<p>Constants:</p>

<pre><code>UV_SERVICE, UD_SERVICE, DEFAULT_SERVICE: standard service names for back-end UO servers.

DATA_FILE, DICT_FILE: used when creating a File object to indicate which part of the file should be opened.

LOCK_WAIT, LOCK_RETAIN, LOCK_EXCLUSIVE, LOCK_SHARED: locking behaviors when working with records of hashed files.

EXEC_COMPLETE, EXEC_REPLY, EXEC_MORE_OUTPUT: Command execution status codes.

AtVar: an enum of supported MV @variables.

UOLocale(Enum): an enum of UniVerse locale definitions.

DEFAULT_MARKS: a named tuple containing the default MV delimiters (marks).
</code></pre>

<p>Examples:</p>

<pre><code>&gt;&gt;&gt; import uopy
&gt;&gt;&gt; uopy.config.connection
{'host': 'uv1211.rocketsoftware.com', 'account': 'XDEMO', 'port': 41438, 'timeout': 100, 'service': 'udcs',
'encoding': 'cp1252', 'ssl': True}

&gt;&gt;&gt; uopy.config.pooling
{'pooling_on': True, 'min_pool_size': 5, 'max_pool_size': 15, 'max_wait_time': 60, 'idle_remove_threshold': 300,
'idle_remove_interval': 300}

&gt;&gt;&gt; uopy.config.logging
{'level': 'DEBUG', 'format': 'standard', 'dir': './logs', 'file_name': 'uopy.log', 'max_size': 524288,
'backup_count': 10, 'unirpc_debug': False, 'log_data_max_size': 256}

&gt;&gt;&gt; uopy.config.ssl_auth
{'client_auth_required': False, 'server_cert_file': 'c:\temp\desktop-ppdt4ds.crt', 'client_cert_file': '',
'client_key_file': '', 'check_hostname': False}

&gt;&gt;&gt; with <a href="#connect">uopy.connect</a>(user='test', password='test'):
&gt;&gt;&gt;     cmd = <a href="#Command">uopy.Command</a>("LIST VOC")
&gt;&gt;&gt;     cmd.run()
&gt;&gt;&gt;     print(cmd.response[-20:])
'68 records listed.
</code></pre>

<p>'</p>
</div>

                        <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span><span class="c1"># Copyright 2020 - 2020 Rocket Software, Inc. or its affiliates. All Rights Reserved.</span>
<span class="c1">#</span>

<span class="sd">&quot;&quot;&quot;UniObjects for Python is a Python package from Rocket Software. It is a client API that allows Python applications</span>
<span class="sd">to access Rocket MV Databases over the network.</span>

<span class="sd">Specifically, it enables Python developers to:</span>

<span class="sd">    1) remotely connect to MV databases</span>

<span class="sd">    1) call BASIC catalogued subroutines</span>

<span class="sd">    2) run TCL commands</span>

<span class="sd">    3) read/write MV files</span>

<span class="sd">    4) handle MV dynamic arrays</span>

<span class="sd">    5) manage MV SELECT lists</span>

<span class="sd">    6) control MV transactions</span>

<span class="sd">Configuration:</span>

<span class="sd">    UOPY supports a list of configuration parameters. They are grouped into 4 categories: connection, pooling, logging,</span>
<span class="sd">    and ssl_auth. Internally all the configuration parameters are preset to default values deemed to work for a minimal</span>
<span class="sd">    UOPY application development environment. To override these default values, UOPY supports an external</span>
<span class="sd">    configuration file - &#39;uopy.ini&#39;, in which a user can specify different values for some or all of the parameters. In</span>
<span class="sd">    some cases, this enables users to change how the application behaves without having to make any code changes, such</span>
<span class="sd">    as turning connection pooling on and off or making all connections to the database secure.</span>

<span class="sd">    For example, on Windows 10 (US-English), the default parameter values are:</span>

<span class="sd">        connection: {&#39;host&#39;: &#39;localhost&#39;, &#39;account&#39;: &#39;XDEMO&#39;, &#39;port&#39;: 31438, &#39;timeout&#39;: 300, &#39;service&#39;: &#39;defcs&#39;,</span>
<span class="sd">        &#39;encoding&#39;: &#39;cp1252&#39;, &#39;ssl&#39;: False}</span>

<span class="sd">        pooling: {&#39;pooling_on&#39;: False, &#39;min_pool_size&#39;: 1, &#39;max_pool_size&#39;: 10, &#39;max_wait_time&#39;: 30,</span>
<span class="sd">        &#39;idle_remove_threshold&#39;: 300, &#39;idle_remove_interval&#39;: 300}</span>

<span class="sd">        logging: {&#39;level&#39;: &#39;WARNING&#39;, &#39;format&#39;: &#39;standard&#39;, &#39;dir&#39;: &#39;./logs&#39;, &#39;file_name&#39;: &#39;uopy.log&#39;, &#39;max_size&#39;: 524288,</span>
<span class="sd">        &#39;backup_count&#39;: 5, &#39;unirpc_debug&#39;: False, &#39;log_data_max_size&#39;: 1024}</span>

<span class="sd">        ssl_auth: {&#39;client_auth_required&#39;: False, &#39;server_cert_file&#39;: &#39;&#39;, &#39;client_cert_file&#39;: &#39;&#39;, &#39;client_key_file&#39;: &#39;&#39;,</span>
<span class="sd">        &#39;check_hostname&#39;: False}</span>

<span class="sd">    If the uopy.ini file is present in the current working directory with the following settings:</span>

<span class="sd">        [connection]</span>
<span class="sd">        host = uv1211.rocketsoftware.com</span>
<span class="sd">        account = XDEMO</span>
<span class="sd">        port = 41438</span>
<span class="sd">        timeout = 100</span>
<span class="sd">        service = udcs</span>
<span class="sd">        ssl = True</span>

<span class="sd">        [ssl_auth]</span>
<span class="sd">        server_cert_file=&quot;c:\\temp\\desktop-ppdt4ds.crt&quot;</span>

<span class="sd">        [pooling]</span>
<span class="sd">        pooling_on = True</span>
<span class="sd">        max_wait_time = 60</span>
<span class="sd">        idle_remove_threshold = 300</span>
<span class="sd">        idle_remove_interval = 300</span>
<span class="sd">        min_pool_size = 5</span>
<span class="sd">        max_pool_size = 15</span>

<span class="sd">        [logging]</span>
<span class="sd">        level = DEBUG</span>
<span class="sd">        backup_count = 10</span>
<span class="sd">        log_data_max_size = 256</span>

<span class="sd">    then when uopy is imported, it will combine uopy.ini with the internal default configuration, resulting in the</span>
<span class="sd">    actual runtime configuration (see the Examples below). Please note that most of these configuration values cannot</span>
<span class="sd">    be changed by the application at runtime, with the exception of the values in the connection category and the pool</span>
<span class="sd">    size values in the pooling category, which can be passed in with different values to uopy.connect().</span>


<span class="sd">Logging:</span>

<span class="sd">    UOPY uses a rotating log strategy which is configurable in uopy.ini as shown above.</span>

<span class="sd">    Specifically,</span>
<span class="sd">        level: the logging level, can be CRITICAL(50), ERROR(40), WARNING (30, default), INFO(20), DEBUG(10).</span>

<span class="sd">        format: can be standard or simple - the difference is that source code line no is provided in the standard format.</span>

<span class="sd">        dir: the directory where log files are stored.</span>

<span class="sd">        file_name: the log file name.</span>

<span class="sd">        max_size: the maximum size of a single log file.</span>

<span class="sd">        backup_count: the number of backup log files to rotate through.</span>

<span class="sd">        unirpc_debug: if set to True and the logging level is DEBUG, all UniRPC packets are dumped into the log files.</span>

<span class="sd">        log_data_max_size: the maximum length for any data logged when logging level is DEBUG - the default is 1k.</span>
<span class="sd">            For instance, if a subroutine parameter is a XML string greater than 1K in size, it will be truncated to 1K</span>
<span class="sd">            in the log file.</span>


<span class="sd">Constants:</span>

<span class="sd">    UV_SERVICE, UD_SERVICE, DEFAULT_SERVICE: standard service names for back-end UO servers.</span>

<span class="sd">    DATA_FILE, DICT_FILE: used when creating a File object to indicate which part of the file should be opened.</span>

<span class="sd">    LOCK_WAIT, LOCK_RETAIN, LOCK_EXCLUSIVE, LOCK_SHARED: locking behaviors when working with records of hashed files.</span>

<span class="sd">    EXEC_COMPLETE, EXEC_REPLY, EXEC_MORE_OUTPUT: Command execution status codes.</span>

<span class="sd">    AtVar: an enum of supported MV @variables.</span>

<span class="sd">    UOLocale(Enum): an enum of UniVerse locale definitions.</span>

<span class="sd">    DEFAULT_MARKS: a named tuple containing the default MV delimiters (marks).</span>


<span class="sd">Examples:</span>

<span class="sd">    &gt;&gt;&gt; import uopy</span>
<span class="sd">    &gt;&gt;&gt; uopy.config.connection</span>
<span class="sd">    {&#39;host&#39;: &#39;uv1211.rocketsoftware.com&#39;, &#39;account&#39;: &#39;XDEMO&#39;, &#39;port&#39;: 41438, &#39;timeout&#39;: 100, &#39;service&#39;: &#39;udcs&#39;,</span>
<span class="sd">    &#39;encoding&#39;: &#39;cp1252&#39;, &#39;ssl&#39;: True}</span>

<span class="sd">    &gt;&gt;&gt; uopy.config.pooling</span>
<span class="sd">    {&#39;pooling_on&#39;: True, &#39;min_pool_size&#39;: 5, &#39;max_pool_size&#39;: 15, &#39;max_wait_time&#39;: 60, &#39;idle_remove_threshold&#39;: 300,</span>
<span class="sd">    &#39;idle_remove_interval&#39;: 300}</span>

<span class="sd">    &gt;&gt;&gt; uopy.config.logging</span>
<span class="sd">    {&#39;level&#39;: &#39;DEBUG&#39;, &#39;format&#39;: &#39;standard&#39;, &#39;dir&#39;: &#39;./logs&#39;, &#39;file_name&#39;: &#39;uopy.log&#39;, &#39;max_size&#39;: 524288,</span>
<span class="sd">    &#39;backup_count&#39;: 10, &#39;unirpc_debug&#39;: False, &#39;log_data_max_size&#39;: 256}</span>

<span class="sd">    &gt;&gt;&gt; uopy.config.ssl_auth</span>
<span class="sd">    {&#39;client_auth_required&#39;: False, &#39;server_cert_file&#39;: &#39;c:\\temp\\desktop-ppdt4ds.crt&#39;, &#39;client_cert_file&#39;: &#39;&#39;,</span>
<span class="sd">    &#39;client_key_file&#39;: &#39;&#39;, &#39;check_hostname&#39;: False}</span>

<span class="sd">    &gt;&gt;&gt; with uopy.connect(user=&#39;test&#39;, password=&#39;test&#39;):</span>
<span class="sd">    &gt;&gt;&gt;     cmd = uopy.Command(&quot;LIST VOC&quot;)</span>
<span class="sd">    &gt;&gt;&gt;     cmd.run()</span>
<span class="sd">    &gt;&gt;&gt;     print(cmd.response[-20:])</span>
<span class="sd">    &#39;68 records listed.\r\n&#39;</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">._uopy</span> <span class="kn">import</span> <span class="n">connect</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">Session</span>
<span class="kn">from</span> <span class="nn">._constants</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">._command</span> <span class="kn">import</span> <span class="n">Command</span>
<span class="kn">from</span> <span class="nn">._dynarray</span> <span class="kn">import</span> <span class="n">DynArray</span>
<span class="kn">from</span> <span class="nn">._uoerror</span> <span class="kn">import</span> <span class="n">UOError</span>
<span class="kn">from</span> <span class="nn">._uofile_error</span> <span class="kn">import</span> <span class="n">UOFileError</span>
<span class="kn">from</span> <span class="nn">._sequentialfile</span> <span class="kn">import</span> <span class="n">SequentialFile</span>
<span class="kn">from</span> <span class="nn">._subroutine</span> <span class="kn">import</span> <span class="n">Subroutine</span>
<span class="kn">from</span> <span class="nn">._file</span> <span class="kn">import</span> <span class="n">File</span>
<span class="kn">from</span> <span class="nn">._dictionary</span> <span class="kn">import</span> <span class="n">Dictionary</span>
<span class="kn">from</span> <span class="nn">._list</span> <span class="kn">import</span> <span class="n">List</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;connect&#39;</span><span class="p">,</span> <span class="s1">&#39;config&#39;</span><span class="p">,</span> <span class="s1">&#39;Session&#39;</span><span class="p">,</span> <span class="s1">&#39;Command&#39;</span><span class="p">,</span> <span class="s1">&#39;DynArray&#39;</span><span class="p">,</span> <span class="s1">&#39;UOError&#39;</span><span class="p">,</span> <span class="s1">&#39;File&#39;</span><span class="p">,</span> <span class="s1">&#39;SequentialFile&#39;</span><span class="p">,</span>
           <span class="s1">&#39;Dictionary&#39;</span><span class="p">,</span> <span class="s1">&#39;List&#39;</span><span class="p">,</span> <span class="s1">&#39;Subroutine&#39;</span><span class="p">,</span> <span class="s1">&#39;UOFileError&#39;</span><span class="p">]</span>
</pre></div>

        </details>

            </section>
                <section id="connect">
                            <div class="attr function"><a class="headerlink" href="#connect">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">connect</span><span class="signature">(**kwargs)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span><span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Open a connection to an MV Database.</span>

<span class="sd">    Args:</span>
<span class="sd">        kwargs: connection configuration keyword parameters:  host, port, user, password, account, service, timeout,</span>
<span class="sd">                encoding, ssl, min_pool_size, max_pool_size.</span>

<span class="sd">                1. only user and password are required, the rest have default values in uopy.config.connection.</span>

<span class="sd">                2. if connection pooling is turned on and connect() is called for the first time to open a connection</span>
<span class="sd">                to the database server, a connection pool will be created for the same host, account, user and password</span>
<span class="sd">                that are passed in. If min_pool_size and/or max_pool_size are passed in as well, they will be used</span>
<span class="sd">                instead of the default values in the uopy.config.pooling section to set the minimum and maximum pool</span>
<span class="sd">                sizes. Note that once a connection pool is created, its min_pool_size and max_pool_size cannot be</span>
<span class="sd">                changed. This means that the min_pool_size and max_pool_size parameters are ignored on subsequent calls</span>
<span class="sd">                to connect() for the same pool.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A Session object: either newly established or straight from a connection pool.</span>

<span class="sd">    Raises:</span>
<span class="sd">        UOError, ValueError</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; session = uopy.connect(user = &#39;test&#39;, password =&#39;test&#39;)</span>

<span class="sd">        &gt;&gt;&gt; session = uopy.connect(host =&#39;localhost&#39;, user = &#39;test&#39;, password =&#39;test&#39;, account = &#39;HS.SALES&#39;,</span>
<span class="sd">                    service=uopy.UV_SERVICE, port=31438)</span>

<span class="sd">        &gt;&gt;&gt; config = {</span>
<span class="sd">                &#39;user&#39;: &#39;test&#39;,</span>
<span class="sd">                &#39;password&#39;: &#39;test&#39;,</span>
<span class="sd">                &#39;service&#39;: &#39;udcs&#39;,</span>
<span class="sd">                &#39;account&#39;: &#39;demo&#39;,</span>
<span class="sd">                &#39;encoding&#39;: &#39;GB18030&#39;,</span>
<span class="sd">                &#39;ssl&#39;: True</span>
<span class="sd">            }</span>
<span class="sd">        &gt;&gt;&gt; session = uopy.connect(**config)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_pooling_on</span>
    <span class="n">config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">connect_config</span> <span class="o">=</span> <span class="n">build_connect_config</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">pooling_config</span> <span class="o">=</span> <span class="n">build_pooling_config</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="n">_pooling_on</span> <span class="o">=</span> <span class="n">pooling_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pooling_on&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">_pooling_on</span><span class="p">:</span>
        <span class="n">pool_key</span> <span class="o">=</span> <span class="n">make_pool_key</span><span class="p">(</span><span class="n">connect_config</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">wrapper</span><span class="o">.</span><span class="n">hasrun</span><span class="p">:</span>
            <span class="n">wrapper</span><span class="p">()</span>
        <span class="k">with</span> <span class="n">_lock</span><span class="p">:</span>
            <span class="n">pool</span> <span class="o">=</span> <span class="n">_pools</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pool_key</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">pool</span><span class="p">:</span>
                <span class="n">pool</span> <span class="o">=</span> <span class="n">Pool</span><span class="p">(</span><span class="n">connect_config</span><span class="p">,</span> <span class="n">pooling_config</span><span class="p">)</span>
                <span class="n">_pools</span><span class="p">[</span><span class="n">pool_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">pool</span>

        <span class="k">return</span> <span class="n">pool</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">session</span> <span class="o">=</span> <span class="n">Session</span><span class="p">(</span><span class="n">connect_config</span><span class="p">)</span>
        <span class="n">session</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">session</span>
</pre></div>

        </details>

            <div class="docstring"><p>Open a connection to an MV Database.</p>

<p>Args:
    kwargs: connection configuration keyword parameters:  host, port, user, password, account, service, timeout,
            encoding, ssl, min_pool_size, max_pool_size.</p>

<pre><code>        1. only user and password are required, the rest have default values in uopy.config.connection.

        2. if connection pooling is turned on and connect() is called for the first time to open a connection
        to the database server, a connection pool will be created for the same host, account, user and password
        that are passed in. If min_pool_size and/or max_pool_size are passed in as well, they will be used
        instead of the default values in the uopy.config.pooling section to set the minimum and maximum pool
        sizes. Note that once a connection pool is created, its min_pool_size and max_pool_size cannot be
        changed. This means that the min_pool_size and max_pool_size parameters are ignored on subsequent calls
        to connect() for the same pool.
</code></pre>

<p>Returns:
    A Session object: either newly established or straight from a connection pool.</p>

<p>Raises:
    UOError, ValueError</p>

<p>Examples:</p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>session = <a href="#connect">uopy.connect</a>(user = 'test', password ='test')</p>
    </blockquote>
  </blockquote>
</blockquote>

<pre><code>&gt;&gt;&gt; session = <a href="#connect">uopy.connect</a>(host ='localhost', user = 'test', password ='test', account = 'HS.SALES',
            service=uopy.UV_SERVICE, port=31438)

&gt;&gt;&gt; config = {
        'user': 'test',
        'password': 'test',
        'service': 'udcs',
        'account': 'demo',
        'encoding': 'GB18030',
        'ssl': True
    }
&gt;&gt;&gt; session = <a href="#connect">uopy.connect</a>(**config)
</code></pre>
</div>


                </section>
                <section id="config">
                                <div class="attr variable"><a class="headerlink" href="#config">#&nbsp;&nbsp</a>

        <span class="name">config</span><span class="default_value"> = &lt;uopy._config._Config object&gt;</span>
    </div>

    
    

                </section>
                <section id="Session">
                                <div class="attr class">
        <a class="headerlink" href="#Session">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">Session</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Session</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;A Session represents a MV database connection. It is the foundation for and embedded in other UOPY objects.</span>

<span class="sd">    Session objects can be used in Python with statement so that whatever happens in the with statement block, they</span>
<span class="sd">    are guaranteed to be closed upon exit.</span>

<span class="sd">    Applications can also perform transactions on a Session, and get supported @var values from the server.</span>

<span class="sd">    Note:</span>
<span class="sd">        Applications should call uopy.connect() to get a Session object instead of directly instantiating a Session.</span>

<span class="sd">    Examples:</span>

<span class="sd">        &gt;&gt;&gt; with uopy.connect(user=&#39;test&#39;, password=&#39;test&#39;):</span>
<span class="sd">        &gt;&gt;&gt;     cmd = uopy.Command(&quot;LIST VOC&quot;)</span>
<span class="sd">        &gt;&gt;&gt;     cmd.run()</span>
<span class="sd">        &gt;&gt;&gt;     print(cmd.response)</span>


<span class="sd">        &gt;&gt;&gt; with uopy.connect(user=&quot;test&quot;, password=&quot;test&quot;) as session:</span>
<span class="sd">        &gt;&gt;&gt;     session.tx_start()</span>
<span class="sd">        &gt;&gt;&gt;     print(session.tx_is_active())</span>
<span class="sd">        ...</span>
<span class="sd">        &gt;&gt;&gt;     session.tx_commit()</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">connect_config</span><span class="p">):</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">connect_config</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">connect_config</span> <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="s2">&quot;password&quot;</span><span class="p">})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">connect_config</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">RLock</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_rpc_connection</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_rpc_failed</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_is_nls_enabled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_nls_locale_enabled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_ud</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_d3</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__pool</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_idle_start_time</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_mac_address</span> <span class="o">=</span> <span class="s2">&quot;JAVA&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_license_token</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_host_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_transaction</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">is_active</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">marks</span> <span class="o">=</span> <span class="n">DEFAULT_MARKS</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">format_string</span> <span class="o">=</span> <span class="s2">&quot;&lt;</span><span class="si">{}</span><span class="s2"> object </span><span class="si">{}</span><span class="s2"> at 0x</span><span class="si">{:016X}</span><span class="s2">&gt;&quot;</span>
        <span class="n">details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span>
        <span class="k">return</span> <span class="n">format_string</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">Session</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span> <span class="n">Session</span><span class="o">.</span><span class="vm">__qualname__</span><span class="p">]),</span> <span class="n">details</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_active</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exec_type</span><span class="p">,</span> <span class="n">exec_value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">bind_pool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pool</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__pool</span> <span class="o">=</span> <span class="n">pool</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A copy of all the configuration parameters for this session.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">idle_start_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idle_start_time</span><span class="p">;</span>

    <span class="k">def</span> <span class="nf">start_idle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_idle_start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">db_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;str: either &quot;UD&#39; for UniData,&#39;UV&#39; for UniVerse, or &quot;D3&quot; for D3.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_ud</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;UD&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_d3</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;D3&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;UV&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_nls_enabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;boolean: whether NLS is enabled on the server.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_nls_enabled</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">encoding</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The name of the character encoding used for conversion between Python unicode strings and MV data.</span>

<span class="sd">        By default it is set to the local system&#39;s preferred encoding when server NLS is off, and to UTF-8 when</span>
<span class="sd">        server NLS is on. However it can be overridden by the application to what reflects the actual encoding of</span>
<span class="sd">        the server data.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="n">ENCODING</span><span class="p">]</span>

    <span class="nd">@encoding</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">encoding</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encoding</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">encoding</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="n">ENCODING</span><span class="p">]</span> <span class="o">=</span> <span class="n">encoding</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">LookupError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Unsupported encoding setting, encoding is not changed:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">sync_marks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mark_list</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">marks</span> <span class="o">=</span> <span class="n">MARKS_NAMED_TUPLE</span><span class="p">(</span><span class="o">*</span><span class="n">mark_list</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="n">ENCODING</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;replace&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">bytearray</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">MvDelimited</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">MvDelimited</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="n">ENCODING</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;replace&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">bytearray</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="n">ENCODING</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;replace&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_check_callable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rpc_connection</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rpc_connection</span><span class="o">.</span><span class="n">is_connected</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_SESSION_NOT_OPEN</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">in_exec</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_command</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="o">.</span><span class="n">status</span> <span class="ow">in</span> <span class="p">{</span><span class="n">EXEC_MORE_OUTPUT</span><span class="p">,</span> <span class="n">EXEC_REPLY</span><span class="p">}:</span>
                    <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_EXECUTEISACTIVE</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">rpc_call</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">,</span> <span class="n">in_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check_callable</span><span class="p">(</span><span class="n">in_exec</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rpc_connection</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">read_packet4cmd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">packet</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rpc_connection</span><span class="o">.</span><span class="n">read_packet</span><span class="p">(</span><span class="n">packet</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_active</span><span class="p">:</span>
                <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Session._connect: already connected.&quot;</span><span class="p">)</span>
                <span class="k">return</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_rpc_connection</span> <span class="o">=</span> <span class="n">UniRPCConnection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rpc_connection</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_login</span><span class="p">()</span>

            <span class="c1"># TODO initialize the transaction object</span>
            <span class="c1"># self._transaction = self.Transaction()</span>

            <span class="n">thread_data</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">_login</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
        <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

        <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">_COMMS_VERSION</span><span class="p">)</span>
        <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">_CS_VERSION</span><span class="p">)</span>
        <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="n">USER</span><span class="p">]))</span>
        <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">mangle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="n">PASSWORD</span><span class="p">]),</span>
                                   <span class="n">_COMMS_VERSION</span><span class="p">))</span>
        <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="n">ACCOUNT</span><span class="p">]))</span>
        <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_license_token</span><span class="p">))</span>
        <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">_RESERVED</span><span class="p">)</span>

        <span class="n">ip_int</span><span class="p">,</span> <span class="n">hostname</span> <span class="o">=</span> <span class="n">get_host_info</span><span class="p">()</span>

        <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="n">ip_int</span><span class="p">)</span>
        <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_mac_address</span><span class="p">))</span>
        <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">hostname</span><span class="p">))</span>
        <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">pooling</span><span class="p">[</span><span class="n">POOLING_ON</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">is_cp_supported</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rpc_connection</span><span class="o">.</span><span class="n">server_id</span><span class="p">):</span>
                <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_CP_NOTSUPPORTED</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Database Server upgrade is needed.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="n">PASSWORD</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rpc_call</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

        <span class="n">resp_code</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_nls_init</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_get_host_info</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">is_active</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_transaction</span> <span class="o">=</span> <span class="n">Transaction</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">argument_count</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">last_error</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">last_error</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_nls_init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">._nlsmap</span> <span class="kn">import</span> <span class="n">NLSMap</span>

        <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
        <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
        <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_GETSERVERINFO</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rpc_call</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

        <span class="n">resp_code</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">nls_mode</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">nls_lc_mode</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">nls_mode</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_nls_enabled</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="n">nls_lc_mode</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_is_nls_locale_enabled</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">nls_mode</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_ud</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">nls_mode</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_d3</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_nls_enabled</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_ud</span><span class="p">:</span>
            <span class="n">NLSMap</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">set_server_map_name</span><span class="p">(</span><span class="s2">&quot;NONE&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_nls_enabled</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">encoding</span> <span class="o">=</span> <span class="s2">&quot;UTF-8&quot;</span>

            <span class="c1"># if self.is_nls_locale_enabled:</span>
            <span class="c1">#     _NLSLocale(self).set_server_locale_names(&quot;DEFAULT&quot;)</span>

    <span class="k">def</span> <span class="nf">_get_host_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
        <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
        <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_SESSIONINFO</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">rpc_call</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

        <span class="n">resp_code</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_host_type</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">check_rpc_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">code</span> <span class="ow">in</span> <span class="n">_RPC_ERRORS</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_rpc_failed</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">health_check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_rpc_failed</span><span class="p">:</span>
                <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;RPC failed&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rpc_connection</span><span class="o">.</span><span class="n">health_check</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">hard_close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rpc_connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">is_active</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rpc_connection</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">thread_data</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="s2">&quot;is hard-closed &quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_atvar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">atvar</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a @var value from the server.</span>

<span class="sd">        Args:</span>
<span class="sd">            atvar: uopy.AtVar enum.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the value of the @var</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; import uopy</span>
<span class="sd">            &gt;&gt;&gt; for atvar in uopy.AtVar:</span>
<span class="sd">                    print(atvar.name, atvar.value)</span>

<span class="sd">            LOG_NAME 1</span>
<span class="sd">            PATH 2</span>
<span class="sd">            USER_NO 3</span>
<span class="sd">            WHO 4</span>
<span class="sd">            TRANSACTION 5</span>
<span class="sd">            DATA_PENDING 6</span>
<span class="sd">            USER_RETURN_CODE 7</span>
<span class="sd">            SYSTEM_RETURN_CODE 8</span>
<span class="sd">            NULL_STR 9</span>
<span class="sd">            SCHEMA 10</span>
<span class="sd">            TRANSACTION_LEVEL 11</span>

<span class="sd">            &gt;&gt;&gt;</span>
<span class="sd">            &gt;&gt;&gt; with uopy.connect(user=&#39;test_user&#39;, password=&#39;test_password&#39;) as session:</span>
<span class="sd">                    log_name = session.get_atvar(uopy.AtVar.LOG_NAME)</span>
<span class="sd">                    account_path = session.get_atvar(uopy.AtVar.PATH)</span>
<span class="sd">                    print(log_name)</span>
<span class="sd">                    print(account_path)</span>

<span class="sd">            test_user</span>
<span class="sd">            C:\\U2\\ud82\\XDEMO</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">atvar</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_callable</span><span class="p">()</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_GETVALUE</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">atvar</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_rpc_connection</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">DynArray</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_rpc_failed</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">:</span>
            <span class="n">tmp_command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_command</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_command</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="k">if</span> <span class="n">tmp_command</span><span class="o">.</span><span class="n">status</span> <span class="ow">in</span> <span class="p">{</span><span class="n">EXEC_MORE_OUTPUT</span><span class="p">,</span> <span class="n">EXEC_REPLY</span><span class="p">}:</span>
                <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Session is in the middle of a command execution.&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tx_is_active</span><span class="p">():</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Session is in the middle of a transaction, will try to roll back.&quot;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_transaction</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Error occurred during transaction roll back.&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Close the session or return it to the connection pool.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span><span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_active</span><span class="p">:</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Session::disconnect: session is inactive.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__pool</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__pool</span><span class="o">.</span><span class="n">free</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># self.reset()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">hard_close</span><span class="p">()</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">bind_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command_obj</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">:</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;A session can only have one bound Command object, will replace the old one&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span> <span class="o">=</span> <span class="n">command_obj</span>

    <span class="k">def</span> <span class="nf">tx_start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Start a transaction on the server.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_transaction</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">tx_commit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Commit the current transaction on the server.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_transaction</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">tx_rollback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Roll back the current transaction on the server.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_transaction</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">tx_level</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the current transaction level on the server</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: the current transaction level</span>

<span class="sd">        Raises:</span>
<span class="sd">             UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_atvar</span><span class="p">(</span><span class="n">AtVar</span><span class="o">.</span><span class="n">TRANSACTION_LEVEL</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">tx_is_active</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if a transaction is active on the server.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            True/False: in transaction or not</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_atvar</span><span class="p">(</span><span class="n">AtVar</span><span class="o">.</span><span class="n">TRANSACTION</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">resp</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="ow">or</span> <span class="n">resp</span> <span class="o">==</span> <span class="s2">&quot;0&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_server_transaction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tx_key</span><span class="p">):</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">tx_key</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_TRANSACTION</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">tx_key</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_rpc_connection</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">encryption_type</span><span class="p">)</span>
                <span class="n">ret_code</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">ret_code</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">check_rpc_is_failed</span><span class="p">(</span><span class="n">ret_code</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ret_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>A Session represents a MV database connection. It is the foundation for and embedded in other UOPY objects.</p>

<p>Session objects can be used in Python with statement so that whatever happens in the with statement block, they
are guaranteed to be closed upon exit.</p>

<p>Applications can also perform transactions on a Session, and get supported @var values from the server.</p>

<p>Note:
    Applications should call <a href="#connect">uopy.connect()</a> to get a Session object instead of directly instantiating a Session.</p>

<p>Examples:</p>

<pre><code>&gt;&gt;&gt; with <a href="#connect">uopy.connect</a>(user='test', password='test'):
&gt;&gt;&gt;     cmd = <a href="#Command">uopy.Command</a>("LIST VOC")
&gt;&gt;&gt;     cmd.run()
&gt;&gt;&gt;     print(cmd.response)


&gt;&gt;&gt; with <a href="#connect">uopy.connect</a>(user="test", password="test") as session:
&gt;&gt;&gt;     session.tx_start()
&gt;&gt;&gt;     print(session.tx_is_active())
...
&gt;&gt;&gt;     session.tx_commit()
</code></pre>
</div>


                            <div id="Session.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Session.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">Session</span><span class="signature">(connect_config)</span>
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">connect_config</span><span class="p">):</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">connect_config</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">connect_config</span> <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="s2">&quot;password&quot;</span><span class="p">})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">connect_config</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">RLock</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_rpc_connection</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_rpc_failed</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_is_nls_enabled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_nls_locale_enabled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_ud</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_d3</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__pool</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_idle_start_time</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_mac_address</span> <span class="o">=</span> <span class="s2">&quot;JAVA&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_license_token</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_host_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_transaction</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">is_active</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">marks</span> <span class="o">=</span> <span class="n">DEFAULT_MARKS</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="Session.bind_pool" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Session.bind_pool">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">bind_pool</span><span class="signature">(self, pool)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">bind_pool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pool</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__pool</span> <span class="o">=</span> <span class="n">pool</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="Session.config" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#Session.config">#&nbsp;&nbsp</a>

        <span class="name">config</span>
    </div>

    
            <div class="docstring"><p>A copy of all the configuration parameters for this session.</p>
</div>


                            </div>
                            <div id="Session.idle_start_time" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#Session.idle_start_time">#&nbsp;&nbsp</a>

        <span class="name">idle_start_time</span>
    </div>

    
    

                            </div>
                            <div id="Session.start_idle" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Session.start_idle">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">start_idle</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">start_idle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_idle_start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="Session.db_type" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#Session.db_type">#&nbsp;&nbsp</a>

        <span class="name">db_type</span>
    </div>

    
            <div class="docstring"><p>str: either "UD' for UniData,'UV' for UniVerse, or "D3" for D3.</p>
</div>


                            </div>
                            <div id="Session.is_nls_enabled" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#Session.is_nls_enabled">#&nbsp;&nbsp</a>

        <span class="name">is_nls_enabled</span>
    </div>

    
            <div class="docstring"><p>boolean: whether NLS is enabled on the server.</p>
</div>


                            </div>
                            <div id="Session.encoding" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#Session.encoding">#&nbsp;&nbsp</a>

        <span class="name">encoding</span>
    </div>

    
            <div class="docstring"><p>The name of the character encoding used for conversion between Python unicode strings and MV data.</p>

<p>By default it is set to the local system's preferred encoding when server NLS is off, and to UTF-8 when
server NLS is on. However it can be overridden by the application to what reflects the actual encoding of
the server data.</p>
</div>


                            </div>
                            <div id="Session.sync_marks" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Session.sync_marks">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">sync_marks</span><span class="signature">(self, mark_list)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">sync_marks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mark_list</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">marks</span> <span class="o">=</span> <span class="n">MARKS_NAMED_TUPLE</span><span class="p">(</span><span class="o">*</span><span class="n">mark_list</span><span class="p">)</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="Session.encode" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Session.encode">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">encode</span><span class="signature">(self, obj)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="n">ENCODING</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;replace&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">bytearray</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">MvDelimited</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">MvDelimited</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="n">ENCODING</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;replace&#39;</span><span class="p">)</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="Session.decode" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Session.decode">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">decode</span><span class="signature">(self, obj)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">bytearray</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="n">ENCODING</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;replace&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="Session.rpc_call" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Session.rpc_call">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">rpc_call</span><span class="signature">(self, in_packet, out_packet, in_exec=False)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">rpc_call</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">,</span> <span class="n">in_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check_callable</span><span class="p">(</span><span class="n">in_exec</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rpc_connection</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="Session.read_packet4cmd" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Session.read_packet4cmd">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">read_packet4cmd</span><span class="signature">(self, packet)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">read_packet4cmd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">packet</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rpc_connection</span><span class="o">.</span><span class="n">read_packet</span><span class="p">(</span><span class="n">packet</span><span class="p">)</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="Session.connect" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Session.connect">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">connect</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_active</span><span class="p">:</span>
                <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Session._connect: already connected.&quot;</span><span class="p">)</span>
                <span class="k">return</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_rpc_connection</span> <span class="o">=</span> <span class="n">UniRPCConnection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rpc_connection</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_login</span><span class="p">()</span>

            <span class="c1"># TODO initialize the transaction object</span>
            <span class="c1"># self._transaction = self.Transaction()</span>

            <span class="n">thread_data</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="bp">self</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="Session.check_rpc_error" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Session.check_rpc_error">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">check_rpc_error</span><span class="signature">(self, e)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">check_rpc_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">code</span> <span class="ow">in</span> <span class="n">_RPC_ERRORS</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_rpc_failed</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="Session.health_check" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Session.health_check">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">health_check</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">health_check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_rpc_failed</span><span class="p">:</span>
                <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;RPC failed&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rpc_connection</span><span class="o">.</span><span class="n">health_check</span><span class="p">()</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="Session.hard_close" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Session.hard_close">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">hard_close</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">hard_close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rpc_connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">is_active</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rpc_connection</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">thread_data</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="s2">&quot;is hard-closed &quot;</span><span class="p">)</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="Session.get_atvar" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Session.get_atvar">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_atvar</span><span class="signature">(self, atvar)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_atvar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">atvar</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a @var value from the server.</span>

<span class="sd">        Args:</span>
<span class="sd">            atvar: uopy.AtVar enum.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the value of the @var</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; import uopy</span>
<span class="sd">            &gt;&gt;&gt; for atvar in uopy.AtVar:</span>
<span class="sd">                    print(atvar.name, atvar.value)</span>

<span class="sd">            LOG_NAME 1</span>
<span class="sd">            PATH 2</span>
<span class="sd">            USER_NO 3</span>
<span class="sd">            WHO 4</span>
<span class="sd">            TRANSACTION 5</span>
<span class="sd">            DATA_PENDING 6</span>
<span class="sd">            USER_RETURN_CODE 7</span>
<span class="sd">            SYSTEM_RETURN_CODE 8</span>
<span class="sd">            NULL_STR 9</span>
<span class="sd">            SCHEMA 10</span>
<span class="sd">            TRANSACTION_LEVEL 11</span>

<span class="sd">            &gt;&gt;&gt;</span>
<span class="sd">            &gt;&gt;&gt; with uopy.connect(user=&#39;test_user&#39;, password=&#39;test_password&#39;) as session:</span>
<span class="sd">                    log_name = session.get_atvar(uopy.AtVar.LOG_NAME)</span>
<span class="sd">                    account_path = session.get_atvar(uopy.AtVar.PATH)</span>
<span class="sd">                    print(log_name)</span>
<span class="sd">                    print(account_path)</span>

<span class="sd">            test_user</span>
<span class="sd">            C:\\U2\\ud82\\XDEMO</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">atvar</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_callable</span><span class="p">()</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_GETVALUE</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">atvar</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_rpc_connection</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">DynArray</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Get a @var value from the server.</p>

<p>Args:
    atvar: uopy.AtVar enum.</p>

<p>Returns:
    DynArray: the value of the @var</p>

<p>Raises:
    UOError</p>

<p>Examples:</p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>import uopy
      for atvar in uopy.AtVar:
                  print(atvar.name, atvar.value)</p>
    </blockquote>
  </blockquote>
</blockquote>

<pre><code>LOG_NAME 1
PATH 2
USER_NO 3
WHO 4
TRANSACTION 5
DATA_PENDING 6
USER_RETURN_CODE 7
SYSTEM_RETURN_CODE 8
NULL_STR 9
SCHEMA 10
TRANSACTION_LEVEL 11

&gt;&gt;&gt;
&gt;&gt;&gt; with <a href="#connect">uopy.connect</a>(user='test_user', password='test_password') as session:
        log_name = session.get_atvar(uopy.AtVar.LOG_NAME)
        account_path = session.get_atvar(uopy.AtVar.PATH)
        print(log_name)
        print(account_path)

test_user
C:\U2\ud82\XDEMO
</code></pre>
</div>


                            </div>
                            <div id="Session.reset" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Session.reset">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">reset</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_rpc_failed</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">:</span>
            <span class="n">tmp_command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_command</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_command</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="k">if</span> <span class="n">tmp_command</span><span class="o">.</span><span class="n">status</span> <span class="ow">in</span> <span class="p">{</span><span class="n">EXEC_MORE_OUTPUT</span><span class="p">,</span> <span class="n">EXEC_REPLY</span><span class="p">}:</span>
                <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Session is in the middle of a command execution.&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tx_is_active</span><span class="p">():</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Session is in the middle of a transaction, will try to roll back.&quot;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_transaction</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Error occurred during transaction roll back.&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="Session.close" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Session.close">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">close</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Close the session or return it to the connection pool.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span><span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_active</span><span class="p">:</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Session::disconnect: session is inactive.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__pool</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__pool</span><span class="o">.</span><span class="n">free</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># self.reset()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">hard_close</span><span class="p">()</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Close the session or return it to the connection pool.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="Session.bind_command" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Session.bind_command">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">bind_command</span><span class="signature">(self, command_obj)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">bind_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command_obj</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">:</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;A session can only have one bound Command object, will replace the old one&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span> <span class="o">=</span> <span class="n">command_obj</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="Session.tx_start" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Session.tx_start">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">tx_start</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">tx_start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Start a transaction on the server.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_transaction</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Start a transaction on the server.</p>

<p>Args:</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="Session.tx_commit" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Session.tx_commit">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">tx_commit</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">tx_commit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Commit the current transaction on the server.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_transaction</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Commit the current transaction on the server.</p>

<p>Args:</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="Session.tx_rollback" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Session.tx_rollback">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">tx_rollback</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">tx_rollback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Roll back the current transaction on the server.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_transaction</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Roll back the current transaction on the server.</p>

<p>Args:</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="Session.tx_level" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Session.tx_level">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">tx_level</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">tx_level</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the current transaction level on the server</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: the current transaction level</span>

<span class="sd">        Raises:</span>
<span class="sd">             UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_atvar</span><span class="p">(</span><span class="n">AtVar</span><span class="o">.</span><span class="n">TRANSACTION_LEVEL</span><span class="p">)))</span>
</pre></div>

        </details>

            <div class="docstring"><p>Return the current transaction level on the server</p>

<p>Args:</p>

<p>Returns:
    int: the current transaction level</p>

<p>Raises:
     UOError</p>
</div>


                            </div>
                            <div id="Session.tx_is_active" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Session.tx_is_active">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">tx_is_active</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">tx_is_active</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if a transaction is active on the server.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            True/False: in transaction or not</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_atvar</span><span class="p">(</span><span class="n">AtVar</span><span class="o">.</span><span class="n">TRANSACTION</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">resp</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="ow">or</span> <span class="n">resp</span> <span class="o">==</span> <span class="s2">&quot;0&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
</pre></div>

        </details>

            <div class="docstring"><p>Check if a transaction is active on the server.</p>

<p>Args:</p>

<p>Returns:
    True/False: in transaction or not</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                </section>
                <section id="Command">
                                <div class="attr class">
        <a class="headerlink" href="#Command">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">Command</span><wbr>(<span class="base">uopy._uniobject.UniObject</span>):
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Command</span><span class="p">(</span><span class="n">UniObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Command allows applications to run MV ECL/TCL commands or stored procedures on the remote server.</span>

<span class="sd">    After a command is executed, it can have one of these three status:</span>
<span class="sd">        EXEC_COMPLETE: the command execution has completed.</span>

<span class="sd">        EXEC_REPLY: the command awaits user input - the reply() method can be called to provide an input.</span>

<span class="sd">        EXEC_MORE_OUTPUT: the command output buffer isn&#39;t big enough to hold all the results. In this case,</span>
<span class="sd">            the next_response() method can be called to get the next block of the response.</span>

<span class="sd">    When the status is either EXEC_REPLY or EXEC_MORE_OUTPUT, the cancel() method can be called to terminate</span>
<span class="sd">    the command execution.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        command_text (str): the command text.</span>
<span class="sd">        at_system_return_code (int) : the value of the system variable @SYSTEM.RETURN.CODE on the server.</span>
<span class="sd">        at_selected (int): The value of the system variable @SELECTED on the server.</span>

<span class="sd">    Examples:</span>

<span class="sd">        &gt;&gt;&gt; with uopy.connect(user=&#39;test&#39;, password=&#39;test&#39;):</span>
<span class="sd">        &gt;&gt;&gt;     cmd = uopy.Command(&quot;LIST VOC&quot;)</span>
<span class="sd">        &gt;&gt;&gt;     cmd.run()</span>
<span class="sd">        &gt;&gt;&gt;     print(cmd.response)</span>

<span class="sd">        &gt;&gt;&gt; with uopy.connect(user=&#39;test&#39;, password=&#39;test&#39;):</span>
<span class="sd">        &gt;&gt;&gt;     cmd = uopy.Command(&quot;RUN BP SAYHELLOTO&quot;)</span>
<span class="sd">        &gt;&gt;&gt;     if cmd.status == uopy.EXEC_REPLY:</span>
<span class="sd">        &gt;&gt;&gt;         cmd.reply(&quot;MV loyal user&quot;)</span>
<span class="sd">        &gt;&gt;&gt;     print(cmd.response)</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command_text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialize a Command object</span>

<span class="sd">        Args:</span>
<span class="sd">            command_text (str, optional): the TCL/ECL command to be executed on the remote server.</span>
<span class="sd">            session (Session, optional): the Session object that the Command object is bound to.</span>
<span class="sd">                If omitted, the last opened Session in the current thread will be used.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">=</span> <span class="n">_EXEC_DEFAULT_BUFFER_SIZE</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">EXEC_COMPLETE</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_response</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_next_block</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="n">command_text</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">command_text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">at_system_return_code</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">at_selected</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_fetch_all</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">bind_command</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">format_string</span> <span class="o">=</span> <span class="s2">&quot;&lt;</span><span class="si">{}</span><span class="s2"> object </span><span class="si">{}</span><span class="s2"> at 0x</span><span class="si">{:016X}</span><span class="s2">&gt;&quot;</span>
        <span class="n">details</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;command_text&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_text</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">format_string</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">Command</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span> <span class="n">Command</span><span class="o">.</span><span class="vm">__qualname__</span><span class="p">]),</span> <span class="n">details</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;int: The current status of the Command object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">response</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;str: The current response of the Command object from the server.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">buffer_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;int: The size of the output buffer for the Command object.</span>

<span class="sd">        If left unset, all the output of the command execution will be brought back at once.</span>
<span class="sd">        If set explicitly, only the output of the specified size will be returned.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span>

    <span class="nd">@buffer_size</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">buffer_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s1">&#39;output buffer size must be an integer!&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s1">&#39;output buffer size must between greater than 0!&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_fetch_all</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">_exec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">server_command</span><span class="p">,</span> <span class="n">input_reply</span><span class="p">):</span>

        <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
        <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

        <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">server_command</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">server_command</span> <span class="o">==</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_EXECUTE</span><span class="p">:</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">command_text</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">server_command</span> <span class="o">==</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_EXECUTECONTINUE</span><span class="p">:</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">server_command</span> <span class="o">==</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_INPUTREPLY</span><span class="p">:</span>
            <span class="n">reply_str</span> <span class="o">=</span> <span class="n">input_reply</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">reply_str</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_EINVAL</span><span class="p">)</span>

        <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">,</span> <span class="n">in_exec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="n">_EXEC_END</span><span class="p">:</span>
            <span class="n">tmp_resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">read_packet4cmd</span><span class="p">(</span><span class="n">in_packet</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">at_system_return_code</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">at_selected</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">resp_code</span> <span class="o">=</span> <span class="n">EXEC_COMPLETE</span>
        <span class="k">elif</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="n">_EXEC_BTS</span><span class="p">:</span>
            <span class="n">tmp_resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">resp_code</span> <span class="o">=</span> <span class="n">EXEC_MORE_OUTPUT</span>
        <span class="k">elif</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="n">_EXEC_AT_INPUT</span><span class="p">:</span>
            <span class="n">tmp_resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">resp_code</span> <span class="o">=</span> <span class="n">EXEC_REPLY</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">e</span> <span class="o">=</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="k">if</span> <span class="n">server_command</span> <span class="o">==</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_EXECUTECONTINUE</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_next_block</span> <span class="o">=</span> <span class="n">tmp_resp</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_response</span> <span class="o">=</span> <span class="n">tmp_resp</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Response&quot;</span><span class="p">,</span> <span class="n">tmp_resp</span><span class="p">,</span> <span class="n">resp_code</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">resp_code</span>

    <span class="k">def</span> <span class="nf">_fetch_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp_code</span><span class="p">):</span>
        <span class="k">while</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="n">EXEC_MORE_OUTPUT</span><span class="p">:</span>
            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exec</span><span class="p">(</span><span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_EXECUTECONTINUE</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="ow">in</span> <span class="p">[</span><span class="n">EXEC_MORE_OUTPUT</span><span class="p">,</span> <span class="n">EXEC_COMPLETE</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_response</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_block</span>
        <span class="k">return</span> <span class="n">resp_code</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Execute the command on the remote server.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_text</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="ow">in</span> <span class="p">{</span><span class="n">EXEC_MORE_OUTPUT</span><span class="p">,</span> <span class="n">EXEC_REPLY</span><span class="p">}:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_EXECUTEISACTIVE</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_text</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_text</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_USAGE_ERROR</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;invalid command_text&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">at_system_return_code</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">at_selected</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_response</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exec</span><span class="p">(</span><span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_EXECUTE</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">resp_code</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_fetch_all</span> <span class="ow">and</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="n">EXEC_MORE_OUTPUT</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fetch_all</span><span class="p">(</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cancel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Cancel the execution of the command.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="ow">in</span> <span class="p">{</span><span class="n">EXEC_REPLY</span><span class="p">,</span> <span class="n">EXEC_MORE_OUTPUT</span><span class="p">}:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">EXEC_COMPLETE</span>

                <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_CANCEL</span><span class="p">)</span>

                <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

                <span class="n">resp_code</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">e</span> <span class="o">=</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>
                    <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                    <span class="k">raise</span> <span class="n">e</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;execution already finished&quot;</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">reply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Send a reply to the server to continue the command execution.</span>

<span class="sd">        Args:</span>
<span class="sd">            reply_data: the input for the command.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">reply_data</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">!=</span> <span class="n">EXEC_REPLY</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_NOTATINPUT</span><span class="p">)</span>

            <span class="c1"># reply_data += &quot;\n&quot;</span>
            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exec</span><span class="p">(</span><span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_INPUTREPLY</span><span class="p">,</span> <span class="n">reply_data</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">resp_code</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_fetch_all</span> <span class="ow">and</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="n">EXEC_MORE_OUTPUT</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fetch_all</span><span class="p">(</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">next_response</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the next block of output from the server.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">!=</span> <span class="n">EXEC_MORE_OUTPUT</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_NOMORE</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_response</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exec</span><span class="p">(</span><span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_EXECUTECONTINUE</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_block</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">resp_code</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_fetch_all</span> <span class="ow">and</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="n">EXEC_MORE_OUTPUT</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fetch_all</span><span class="p">(</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Command allows applications to run MV ECL/TCL commands or stored procedures on the remote server.</p>

<p>After a command is executed, it can have one of these three status:
    EXEC_COMPLETE: the command execution has completed.</p>

<pre><code>EXEC_REPLY: the command awaits user input - the reply() method can be called to provide an input.

EXEC_MORE_OUTPUT: the command output buffer isn't big enough to hold all the results. In this case,
    the next_response() method can be called to get the next block of the response.
</code></pre>

<p>When the status is either EXEC_REPLY or EXEC_MORE_OUTPUT, the cancel() method can be called to terminate
the command execution.</p>

<p>Attributes:
    command_text (str): the command text.
    at_system_return_code (int) : the value of the system variable @SYSTEM.RETURN.CODE on the server.
    at_selected (int): The value of the system variable @SELECTED on the server.</p>

<p>Examples:</p>

<pre><code>&gt;&gt;&gt; with <a href="#connect">uopy.connect</a>(user='test', password='test'):
&gt;&gt;&gt;     cmd = <a href="#Command">uopy.Command</a>("LIST VOC")
&gt;&gt;&gt;     cmd.run()
&gt;&gt;&gt;     print(cmd.response)

&gt;&gt;&gt; with <a href="#connect">uopy.connect</a>(user='test', password='test'):
&gt;&gt;&gt;     cmd = <a href="#Command">uopy.Command</a>("RUN BP SAYHELLOTO")
&gt;&gt;&gt;     if cmd.status == uopy.EXEC_REPLY:
&gt;&gt;&gt;         cmd.reply("MV loyal user")
&gt;&gt;&gt;     print(cmd.response)
</code></pre>
</div>


                            <div id="Command.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Command.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">Command</span><span class="signature">(command_text=None, session=None)</span>
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command_text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialize a Command object</span>

<span class="sd">        Args:</span>
<span class="sd">            command_text (str, optional): the TCL/ECL command to be executed on the remote server.</span>
<span class="sd">            session (Session, optional): the Session object that the Command object is bound to.</span>
<span class="sd">                If omitted, the last opened Session in the current thread will be used.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">=</span> <span class="n">_EXEC_DEFAULT_BUFFER_SIZE</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">EXEC_COMPLETE</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_response</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_next_block</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="n">command_text</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">command_text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">at_system_return_code</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">at_selected</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_fetch_all</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">bind_command</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Initialize a Command object</p>

<p>Args:
    command_text (str, optional): the TCL/ECL command to be executed on the remote server.
    session (Session, optional): the Session object that the Command object is bound to.
        If omitted, the last opened Session in the current thread will be used.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="Command.status" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#Command.status">#&nbsp;&nbsp</a>

        <span class="name">status</span>
    </div>

    
            <div class="docstring"><p>int: The current status of the Command object.</p>
</div>


                            </div>
                            <div id="Command.response" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#Command.response">#&nbsp;&nbsp</a>

        <span class="name">response</span>
    </div>

    
            <div class="docstring"><p>str: The current response of the Command object from the server.</p>
</div>


                            </div>
                            <div id="Command.buffer_size" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#Command.buffer_size">#&nbsp;&nbsp</a>

        <span class="name">buffer_size</span>
    </div>

    
            <div class="docstring"><p>int: The size of the output buffer for the Command object.</p>

<p>If left unset, all the output of the command execution will be brought back at once.
If set explicitly, only the output of the specified size will be returned.</p>
</div>


                            </div>
                            <div id="Command.run" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Command.run">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">run</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Execute the command on the remote server.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_text</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="ow">in</span> <span class="p">{</span><span class="n">EXEC_MORE_OUTPUT</span><span class="p">,</span> <span class="n">EXEC_REPLY</span><span class="p">}:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_EXECUTEISACTIVE</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_text</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_text</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_USAGE_ERROR</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;invalid command_text&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">at_system_return_code</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">at_selected</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_response</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exec</span><span class="p">(</span><span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_EXECUTE</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">resp_code</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_fetch_all</span> <span class="ow">and</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="n">EXEC_MORE_OUTPUT</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fetch_all</span><span class="p">(</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Execute the command on the remote server.</p>

<p>Args:</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="Command.cancel" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Command.cancel">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">cancel</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">cancel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Cancel the execution of the command.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="ow">in</span> <span class="p">{</span><span class="n">EXEC_REPLY</span><span class="p">,</span> <span class="n">EXEC_MORE_OUTPUT</span><span class="p">}:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">EXEC_COMPLETE</span>

                <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_CANCEL</span><span class="p">)</span>

                <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

                <span class="n">resp_code</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">e</span> <span class="o">=</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>
                    <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                    <span class="k">raise</span> <span class="n">e</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;execution already finished&quot;</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Cancel the execution of the command.</p>

<p>Args:</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="Command.reply" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Command.reply">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">reply</span><span class="signature">(self, reply_data)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">reply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reply_data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Send a reply to the server to continue the command execution.</span>

<span class="sd">        Args:</span>
<span class="sd">            reply_data: the input for the command.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">reply_data</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">!=</span> <span class="n">EXEC_REPLY</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_NOTATINPUT</span><span class="p">)</span>

            <span class="c1"># reply_data += &quot;\n&quot;</span>
            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exec</span><span class="p">(</span><span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_INPUTREPLY</span><span class="p">,</span> <span class="n">reply_data</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">resp_code</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_fetch_all</span> <span class="ow">and</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="n">EXEC_MORE_OUTPUT</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fetch_all</span><span class="p">(</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Send a reply to the server to continue the command execution.</p>

<p>Args:
    reply_data: the input for the command.</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="Command.next_response" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Command.next_response">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">next_response</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">next_response</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the next block of output from the server.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">!=</span> <span class="n">EXEC_MORE_OUTPUT</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_NOMORE</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_response</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exec</span><span class="p">(</span><span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_EXECUTECONTINUE</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_block</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">resp_code</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_fetch_all</span> <span class="ow">and</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="n">EXEC_MORE_OUTPUT</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fetch_all</span><span class="p">(</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Get the next block of output from the server.</p>

<p>Args:</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                </section>
                <section id="DynArray">
                                <div class="attr class">
        <a class="headerlink" href="#DynArray">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">DynArray</span><wbr>(<span class="base">uopy._mvdelimited.MvDelimited</span>):
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span><span class="k">class</span> <span class="nc">DynArray</span><span class="p">(</span><span class="n">MvDelimited</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;DynArray represents MV delimited data as nested lists and supports most common Python list methods.</span>

<span class="sd">    Specifically, a DynArray works with MV delimiters automatically and transparently. It can be used just like a Python</span>
<span class="sd">    list and should only be used in that manner. It is a best practice that applications do not use MV delimiters</span>
<span class="sd">    directly for internationalization reasons. Please remember that a DynArray can be passed directly to any UOPY method</span>
<span class="sd">    where MV delimited data is expected, such as file.write(), the application doesn&#39;t need to convert it first.</span>

<span class="sd">    Two convenience methods: make_list and make_nested_list are provided to convert a field itself into a list or nested</span>
<span class="sd">    list. They are useful if the original field is multivalued or multi-sub-valued, but may contain scalar values.</span>
<span class="sd">    Calling them first on a field will ensure that you can safely treat the field as a list or nested list.</span>

<span class="sd">    In addition, DynArray also supports two unique MV conversion functions: iconv and oconv. The details of these</span>
<span class="sd">    conversion functions are documented under each method. Because they call the remote server to do the conversion,</span>
<span class="sd">    it is strongly recommended that applications use File.read_named_fields() and File.write_named_fields() instead</span>
<span class="sd">    when reading data from or writing data to the server. They automatically perform the iconv and oconv on the</span>
<span class="sd">    specified fields on the server, and thus save a rpc call across the network.</span>

<span class="sd">    Two DynArray objects can perform the mathematical operations of + and += the same way in which a python list does.</span>
<span class="sd">    However, if one of the two objects are not the DynArray type, it will throw the TypeError.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialize a DynArray object.</span>

<span class="sd">        Args:</span>
<span class="sd">            obj (any, optional): can be a Python list, a string, a byte object, or another DynArray.</span>
<span class="sd">            session (Session, optional): the Session object that the DynArray object is bound to.</span>
<span class="sd">                If omitted, the last opened Session in the current thread will be used.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">session</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_build_list</span><span class="p">()</span>
        <span class="n">format_string</span> <span class="o">=</span> <span class="s2">&quot;&lt;</span><span class="si">{}</span><span class="s2"> object </span><span class="si">{}</span><span class="s2"> at 0x</span><span class="si">{:016X}</span><span class="s2">&gt;&quot;</span>
        <span class="n">details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list</span>
        <span class="k">return</span> <span class="n">format_string</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">DynArray</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span> <span class="n">DynArray</span><span class="o">.</span><span class="vm">__qualname__</span><span class="p">]),</span> <span class="n">details</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DynArray</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">DynArray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_list</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">_list</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;can only concatenate DynArray to DynArray&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DynArray</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_list</span> <span class="o">+=</span> <span class="n">other</span><span class="o">.</span><span class="n">_list</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;can only concatenate DynArray to DynArray&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">make_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if the list item is a list itself - if not, make it as such.</span>

<span class="sd">        Args:</span>
<span class="sd">            index (int): the index of the list item.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; d = uopy.DynArray([1, 2])</span>
<span class="sd">            &gt;&gt;&gt; d.make_list(1)</span>
<span class="sd">            &gt;&gt;&gt; d[1].append(3)</span>
<span class="sd">            &gt;&gt;&gt; print(d.list)</span>
<span class="sd">            [1, [2, 3]]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_build_list</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>

    <span class="k">def</span> <span class="nf">make_nested_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if the list item is a nested list itself - if not, make it as such.</span>

<span class="sd">        Args:</span>
<span class="sd">            index (int): the index of the list item.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; d = uopy.DynArray([1, 2])</span>
<span class="sd">            &gt;&gt;&gt; d.make_nested_list(1)</span>
<span class="sd">            &gt;&gt;&gt; d[1][0].append(3)</span>
<span class="sd">            &gt;&gt;&gt; print(d.list)</span>
<span class="sd">            [1, [[2, 3]]]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_build_list</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">[</span><span class="n">index</span><span class="p">]]]</span>
            <span class="k">return</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">[</span><span class="n">index</span><span class="p">]):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">[</span><span class="n">index</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">iconv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conversion_code</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the internal storage value of the DynArray based on the conversion code.</span>

<span class="sd">        Args:</span>
<span class="sd">            conversion_code (str):  the MV conversion code.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the internal storage value.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_server_conv</span><span class="p">(</span><span class="n">conversion_code</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_ICONV</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">oconv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conversion_code</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the output format of the DynArray based on the conversion code.</span>

<span class="sd">        Args:</span>
<span class="sd">            conversion_code (str): the MV conversion code.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the output format.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_server_conv</span><span class="p">(</span><span class="n">conversion_code</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_OCONV</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">format_code</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the formatted value of the DynArray based on the format code.</span>

<span class="sd">        Args:</span>
<span class="sd">            format_code (str): the format code.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the formatted value.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_server_conv</span><span class="p">(</span><span class="n">format_code</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_FMT</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_server_conv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conversion_code</span><span class="p">,</span> <span class="n">func_code</span><span class="p">):</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">conversion_code</span><span class="p">,</span> <span class="n">func_code</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__bytes__</span><span class="p">())</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">func_code</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">func_code</span> <span class="o">==</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_FMT</span><span class="p">:</span>
                <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">conversion_code</span><span class="p">))</span>
                <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__bytes__</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__bytes__</span><span class="p">())</span>
                <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">conversion_code</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">status</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">DynArray</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_BAD_CONVERSION_DATA</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>DynArray represents MV delimited data as nested lists and supports most common Python list methods.</p>

<p>Specifically, a DynArray works with MV delimiters automatically and transparently. It can be used just like a Python
list and should only be used in that manner. It is a best practice that applications do not use MV delimiters
directly for internationalization reasons. Please remember that a DynArray can be passed directly to any UOPY method
where MV delimited data is expected, such as file.write(), the application doesn't need to convert it first.</p>

<p>Two convenience methods: make_list and make_nested_list are provided to convert a field itself into a list or nested
list. They are useful if the original field is multivalued or multi-sub-valued, but may contain scalar values.
Calling them first on a field will ensure that you can safely treat the field as a list or nested list.</p>

<p>In addition, DynArray also supports two unique MV conversion functions: iconv and oconv. The details of these
conversion functions are documented under each method. Because they call the remote server to do the conversion,
it is strongly recommended that applications use <a href="#File.read_named_fields">File.read_named_fields()</a> and <a href="#File.write_named_fields">File.write_named_fields()</a> instead
when reading data from or writing data to the server. They automatically perform the iconv and oconv on the
specified fields on the server, and thus save a rpc call across the network.</p>

<p>Two DynArray objects can perform the mathematical operations of + and += the same way in which a python list does.
However, if one of the two objects are not the DynArray type, it will throw the TypeError.</p>
</div>


                            <div id="DynArray.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#DynArray.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">DynArray</span><span class="signature">(obj=None, session=None)</span>
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialize a DynArray object.</span>

<span class="sd">        Args:</span>
<span class="sd">            obj (any, optional): can be a Python list, a string, a byte object, or another DynArray.</span>
<span class="sd">            session (Session, optional): the Session object that the DynArray object is bound to.</span>
<span class="sd">                If omitted, the last opened Session in the current thread will be used.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">session</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Initialize a DynArray object.</p>

<p>Args:
    obj (any, optional): can be a Python list, a string, a byte object, or another DynArray.
    session (Session, optional): the Session object that the DynArray object is bound to.
        If omitted, the last opened Session in the current thread will be used.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="DynArray.make_list" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#DynArray.make_list">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">make_list</span><span class="signature">(self, index)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">make_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if the list item is a list itself - if not, make it as such.</span>

<span class="sd">        Args:</span>
<span class="sd">            index (int): the index of the list item.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; d = uopy.DynArray([1, 2])</span>
<span class="sd">            &gt;&gt;&gt; d.make_list(1)</span>
<span class="sd">            &gt;&gt;&gt; d[1].append(3)</span>
<span class="sd">            &gt;&gt;&gt; print(d.list)</span>
<span class="sd">            [1, [2, 3]]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_build_list</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Check if the list item is a list itself - if not, make it as such.</p>

<p>Args:
    index (int): the index of the list item.</p>

<p>Returns:
    None</p>

<p>Examples:</p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>d = <a href="#DynArray">uopy.DynArray</a>([1, 2])
      d.make_list(1)
      d[1].append(3)
      print(d.list)
          [1, [2, 3]]</p>
    </blockquote>
  </blockquote>
</blockquote>
</div>


                            </div>
                            <div id="DynArray.make_nested_list" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#DynArray.make_nested_list">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">make_nested_list</span><span class="signature">(self, index)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">make_nested_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if the list item is a nested list itself - if not, make it as such.</span>

<span class="sd">        Args:</span>
<span class="sd">            index (int): the index of the list item.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; d = uopy.DynArray([1, 2])</span>
<span class="sd">            &gt;&gt;&gt; d.make_nested_list(1)</span>
<span class="sd">            &gt;&gt;&gt; d[1][0].append(3)</span>
<span class="sd">            &gt;&gt;&gt; print(d.list)</span>
<span class="sd">            [1, [[2, 3]]]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_build_list</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">[</span><span class="n">index</span><span class="p">]]]</span>
            <span class="k">return</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">[</span><span class="n">index</span><span class="p">]):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">[</span><span class="n">index</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Check if the list item is a nested list itself - if not, make it as such.</p>

<p>Args:
    index (int): the index of the list item.</p>

<p>Returns:
    None</p>

<p>Examples:</p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>d = <a href="#DynArray">uopy.DynArray</a>([1, 2])
      d.make_nested_list(1)
      d[1][0].append(3)
      print(d.list)
          [1, [[2, 3]]]</p>
    </blockquote>
  </blockquote>
</blockquote>
</div>


                            </div>
                            <div id="DynArray.iconv" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#DynArray.iconv">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">iconv</span><span class="signature">(self, conversion_code)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">iconv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conversion_code</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the internal storage value of the DynArray based on the conversion code.</span>

<span class="sd">        Args:</span>
<span class="sd">            conversion_code (str):  the MV conversion code.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the internal storage value.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_server_conv</span><span class="p">(</span><span class="n">conversion_code</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_ICONV</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Return the internal storage value of the DynArray based on the conversion code.</p>

<p>Args:
    conversion_code (str):  the MV conversion code.</p>

<p>Returns:
    DynArray: the internal storage value.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="DynArray.oconv" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#DynArray.oconv">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">oconv</span><span class="signature">(self, conversion_code)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">oconv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conversion_code</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the output format of the DynArray based on the conversion code.</span>

<span class="sd">        Args:</span>
<span class="sd">            conversion_code (str): the MV conversion code.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the output format.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_server_conv</span><span class="p">(</span><span class="n">conversion_code</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_OCONV</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Return the output format of the DynArray based on the conversion code.</p>

<p>Args:
    conversion_code (str): the MV conversion code.</p>

<p>Returns:
    DynArray: the output format.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="DynArray.format" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#DynArray.format">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">format</span><span class="signature">(self, format_code)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">format_code</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the formatted value of the DynArray based on the format code.</span>

<span class="sd">        Args:</span>
<span class="sd">            format_code (str): the format code.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the formatted value.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_server_conv</span><span class="p">(</span><span class="n">format_code</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_FMT</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Return the formatted value of the DynArray based on the format code.</p>

<p>Args:
    format_code (str): the format code.</p>

<p>Returns:
    DynArray: the formatted value.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>uopy._mvdelimited.MvDelimited</dt>
                                <dd id="DynArray.list" class="variable">list</dd>
                <dd id="DynArray.append" class="function">append</dd>
                <dd id="DynArray.clear" class="function">clear</dd>
                <dd id="DynArray.copy" class="function">copy</dd>
                <dd id="DynArray.count" class="function">count</dd>
                <dd id="DynArray.extend" class="function">extend</dd>
                <dd id="DynArray.index" class="function">index</dd>
                <dd id="DynArray.insert" class="function">insert</dd>
                <dd id="DynArray.pop" class="function">pop</dd>
                <dd id="DynArray.remove" class="function">remove</dd>
                <dd id="DynArray.reverse" class="function">reverse</dd>
                <dd id="DynArray.sort" class="function">sort</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="UOError">
                                <div class="attr class">
        <a class="headerlink" href="#UOError">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">UOError</span><wbr>(<span class="base">builtins.Exception</span>):
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span><span class="k">class</span> <span class="nc">UOError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;UOError represents error conditions detected in UOPY.</span>

<span class="sd">    It is recommended that Applications always use a try/catch block when calling any UOPY function and should rely on</span>
<span class="sd">    the code and message in UOError exception for proper error handling and reporting.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        message (str): the error message.</span>
<span class="sd">        code (int): the error code; if the error is reported by the server, it is the server error code.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_UNKNOWN_ERROR</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">_ERROR_MESSAGES</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="s2">&quot;Unknown Error Code&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">message</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">+=</span> <span class="s2">&quot; : &quot;</span> <span class="o">+</span> <span class="n">message</span>
        <span class="k">if</span> <span class="n">obj</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">+=</span> <span class="s2">&quot;on &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Error [</span><span class="si">{0}</span><span class="s2">] : </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>UOError represents error conditions detected in UOPY.</p>

<p>It is recommended that Applications always use a try/catch block when calling any UOPY function and should rely on
the code and message in UOError exception for proper error handling and reporting.</p>

<p>Attributes:
    message (str): the error message.
    code (int): the error code; if the error is reported by the server, it is the server error code.</p>
</div>


                            <div id="UOError.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#UOError.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">UOError</span><span class="signature">(code=-1, message=None, obj=None)</span>
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_UNKNOWN_ERROR</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">_ERROR_MESSAGES</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="s2">&quot;Unknown Error Code&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">message</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">+=</span> <span class="s2">&quot; : &quot;</span> <span class="o">+</span> <span class="n">message</span>
        <span class="k">if</span> <span class="n">obj</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">+=</span> <span class="s2">&quot;on &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</pre></div>

        </details>

    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>builtins.BaseException</dt>
                                <dd id="UOError.with_traceback" class="function">with_traceback</dd>
                <dd id="UOError.args" class="variable">args</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="File">
                                <div class="attr class">
        <a class="headerlink" href="#File">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">File</span><wbr>(<span class="base">uopy._uniobject.UniObject</span>):
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span><span class="k">class</span> <span class="nc">File</span><span class="p">(</span><span class="n">UniObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;File object represents a MV hashed file on the remote server. It is the main mechanism for applications to</span>
<span class="sd">    access MV data remotely.</span>

<span class="sd">    File objects can be used in Python with statement so that whatever occurs in the with statement block, they</span>
<span class="sd">    are guaranteed to be closed upon exit.</span>

<span class="sd">    Examples:</span>

<span class="sd">        &gt;&gt;&gt; with uopy.File(&quot;VOC&quot;) as voc_file:</span>
<span class="sd">        &gt;&gt;&gt;     rec = voc_file.read(&quot;LIST&quot;)</span>
<span class="sd">        &gt;&gt;&gt;     print(rec.list)</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">dict_flag</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initializes a File object.</span>
<span class="sd">        Args:</span>
<span class="sd">            name (str): the name of the MV File to be opened.</span>
<span class="sd">            dict_flag (int, optional): when it is uopy.DICT_FILE, then the File object points to the dictionary file.</span>
<span class="sd">                Otherwise, the target is the data file.</span>
<span class="sd">            session (Session, optional): the Session object that the File object is bound to.</span>
<span class="sd">                If omitted, the last opened Session in the current thread will be used.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_INVALIDFILENAME</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_flag</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">dict_flag</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_opened</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">format_string</span> <span class="o">=</span> <span class="s2">&quot;&lt;</span><span class="si">{}</span><span class="s2"> object </span><span class="si">{}</span><span class="s2"> at 0x</span><span class="si">{:016X}</span><span class="s2">&gt;&quot;</span>
        <span class="n">details</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s2">&quot;DICT&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_flag</span> <span class="k">else</span> <span class="s2">&quot;DATA&quot;</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">format_string</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">File</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span> <span class="n">File</span><span class="o">.</span><span class="vm">__qualname__</span><span class="p">]),</span> <span class="n">details</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_opened</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exec_type</span><span class="p">,</span> <span class="n">exec_value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">handle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The status code set by the remote server after a file operation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_opened</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;boolean: True if the File object is opened on the remote server, otherwise False.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_opened</span>

    <span class="k">def</span> <span class="nf">_check_opened</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_opened</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_FILE_NOT_OPEN</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Open the named file on the remote server.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_opened</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_OPEN</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_flag</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_opened</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clear the content of the file on the remote server.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_CLEARFILE</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Close the opened file on the remote server - all file and record locks are released.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_opened</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_CLOSE</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_opened</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">lock_flag</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete a record in the file.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (any ): the record id - can be str, bytes, or DynArray.</span>
<span class="sd">            lock_flag (int, optional): 0 (default), LOCK_RETAIN, LOCK_WAIT, or LOCK_RETAIN + LOCK_WAIT</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">record_id</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_DELETE</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">_map_delete_lock_flag</span><span class="p">(</span><span class="n">lock_flag</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">record_id</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">lock_flag</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Read a record in the file.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (any): the record id - can be str, bytes, or DynArray.</span>
<span class="sd">            lock_flag (int, optional): 0 (default, no lock), or [LOCK_EXCLUSIVE or LOCK_SHARED] [+ LOCK_WAIT]</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the content of the record.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">lock_flag</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_READ</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">_map_read_lock_flag</span><span class="p">(</span><span class="n">lock_flag</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">record_id</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_EIO</span><span class="p">:</span>
                    <span class="n">tmp_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span>
                    <span class="k">if</span> <span class="n">tmp_status</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_EIO_MSG_DICT</span><span class="p">:</span>
                        <span class="n">tmp_status</span> <span class="o">=</span> <span class="mi">5</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="n">_EIO_MSG_DICT</span><span class="p">[</span><span class="n">tmp_status</span><span class="p">]</span>
                    <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">record</span> <span class="o">=</span> <span class="n">DynArray</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">record</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">record</span>
   
    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">lock_flag</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write a record into the file.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (any): the record id - can be str, bytes, or DynArray.</span>
<span class="sd">            record (any): the record to be written - can be DynArray, str, bytes.</span>
<span class="sd">            lock_flag (int, optional): 0 (default), LOCK_RETAIN, LOCK_WAIT, or LOCK_RETAIN + LOCK_WAIT</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">lock_flag</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_WRITE</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">_map_write_lock_flag</span><span class="p">(</span><span class="n">lock_flag</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">record_id</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">record</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">read_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">field_num</span><span class="p">,</span> <span class="n">lock_flag</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Read a single field of a record in the file.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (any ): the record id - can be str, bytes, or DynArray</span>
<span class="sd">            field_num (int): the field number</span>
<span class="sd">            lock_flag (int, optional): 0 (default), or [LOCK_EXCLUSIVE or LOCK_SHARED] [+ LOCK_WAIT]</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the value of the field.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">field_num</span><span class="p">,</span> <span class="n">lock_flag</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_READV</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">_map_read_lock_flag</span><span class="p">(</span><span class="n">lock_flag</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">field_num</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">record_id</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_EIO</span><span class="p">:</span>
                    <span class="n">tmp_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span>
                    <span class="k">if</span> <span class="n">tmp_status</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_EIO_MSG_DICT</span><span class="p">:</span>
                        <span class="n">tmp_status</span> <span class="o">=</span> <span class="mi">5</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="n">_EIO_MSG_DICT</span><span class="p">[</span><span class="n">tmp_status</span><span class="p">]</span>
                    <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">field</span> <span class="o">=</span> <span class="n">DynArray</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">field</span>

    <span class="k">def</span> <span class="nf">write_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">field_num</span><span class="p">,</span> <span class="n">field_value</span><span class="p">,</span> <span class="n">lock_flag</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write a single field of a record to the file.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (any): the record id - can be str, bytes, or DynArray.</span>
<span class="sd">            field_num (int): the field number.</span>
<span class="sd">            field_value (any): the field value to be written - can be DynArray, str, bytes.</span>
<span class="sd">            lock_flag (int, optional): 0 (default), LOCK_RETAIN, LOCK_WAIT, or LOCK_RETAIN + LOCK_WAIT</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">field_num</span><span class="p">,</span> <span class="n">field_value</span><span class="p">,</span> <span class="n">lock_flag</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_WRITEV</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">_map_write_lock_flag</span><span class="p">(</span><span class="n">lock_flag</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">field_num</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">record_id</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">field_value</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">lock_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Lock the entire file exclusively.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_FILELOCK</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">unlock_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Release the exclusive lock on the entire file.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_FILEUNLOCK</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">lock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">lock_flag</span><span class="o">=</span><span class="n">LOCK_EXCLUSIVE</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Lock a record in the file.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (any): the record id - can be str, bytes, or DynArray.</span>
<span class="sd">            lock_flag (int, optional): LOCK_EXCLUSIVE (default) or LOCK_SHARED</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">lock_flag</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_RECORDLOCK</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">_map_read_lock_flag</span><span class="p">(</span><span class="n">lock_flag</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">record_id</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">unlock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">clear_flag</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Release locks owned by the current session on a record of the file.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (any): the record id - can be str, bytes, or DynArray.</span>
<span class="sd">            clear_flag (boolean, optional): False (default), only release the lock on the specified record; otherwise,</span>
<span class="sd">                release all the locks owned by the current session.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">clear_flag</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_RELEASE</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">clear_flag</span> <span class="k">else</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">record_id</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">is_locked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if a record has a lock on it.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (any): the record id - can be str, bytes, or DynArray.</span>

<span class="sd">        Returns:</span>
<span class="sd">            boolean: True, a lock exists on the record by either the current session or other sessions.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">record_id</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_RECORDLOCKED</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">record_id</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

            <span class="n">lock_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">lock_status</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span> <span class="k">if</span> <span class="n">lock_status</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_ak_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index_name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Obtain information about the secondary key indexes available on the file.</span>

<span class="sd">        Args:</span>
<span class="sd">            index_name (str, Optional). If this value is None or ignored, the list of available indices is returned.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray:</span>
<span class="sd">                The return value will vary depending on the type of index, as follows:</span>
<span class="sd">                1. For D-Type indexes: Field 1 contains D as the first character and</span>
<span class="sd">                    Field 2 contains the location number of the indexed field.</span>
<span class="sd">                2. For I-type indexes: Field 1 contains I as the first character,</span>
<span class="sd">                    Field 2 contains the I-type expression, and the compiled I-type resides in field 19 and onward.</span>
<span class="sd">                3. For both types:</span>
<span class="sd">                    2nd value of Field 1 indicates if the index needs to be rebuilt. It is an empty string otherwise.</span>
<span class="sd">                    3rd value of Field 1 is set if the index is null-suppressed. It is an empty string otherwise.</span>
<span class="sd">                    4th value of Field 1 is set if automatic updates are disabled. It is an empty string otherwise.</span>
<span class="sd">                    6th value of Field 1 contains an S for single valued indices or M for a multivalued index.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">index_name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_INDICES</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">index_name</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">index_name</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

            <span class="n">ak_info</span> <span class="o">=</span> <span class="n">DynArray</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">ak_info</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ak_info</span>

    <span class="k">def</span> <span class="nf">itype</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">i_type_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Evaluates the specified I-descriptor and returns the evaluated string.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (any): the record id - can be str, bytes, or DynArray.</span>
<span class="sd">            i_type_id (any): the I-descriptor record id in the dictionary - can be str, bytes, or DynArray.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the evaluated result.</span>

<span class="sd">        Raises:</span>
<span class="sd">          UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">i_type_id</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_ITYPE</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">record_id</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">i_type_id</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

            <span class="n">result</span> <span class="o">=</span> <span class="n">DynArray</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">read_named_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_list</span><span class="p">,</span> <span class="n">field_list</span><span class="p">,</span> <span class="n">lock_flag</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Read a list of named fields on multiple records.</span>

<span class="sd">        Note:</span>
<span class="sd">            fields can be of D-type or I/V type.</span>
<span class="sd">            If field_list contains names that are not defined in the dictionary, these names are replaced by @ID.</span>
<span class="sd">            If a field has conv code on it, an oconv is automatically performed on its internal value to get the</span>
<span class="sd">            converted output value.</span>

<span class="sd">        Args:</span>
<span class="sd">            id_list: a list of record ids.</span>
<span class="sd">            field_list: a list of field names.</span>
<span class="sd">            lock_flag (int, optional): 0 (default, no lock), or [LOCK_EXCLUSIVE or LOCK_SHARED] [+ LOCK_WAIT]</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple: a tuple consisting of four lists: 1. response code list, 2. status code list, 3. record id list,</span>
<span class="sd">                    4. record list.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOFileError</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; with File(&quot;RENTAL_DETAILS&quot;) as test_file:</span>
<span class="sd">            &gt;&gt;&gt;     field_list = [&quot;FULL_NAME&quot;, &quot;ACTUAL_RETURN_DATE&quot;, &quot;BALANCE_DUE&quot;]</span>
<span class="sd">            &gt;&gt;&gt;     id_list = [&#39;1084&#39;, &#39;1307&#39;, &#39;1976&#39;]</span>
<span class="sd">            &gt;&gt;&gt;     read_rs = test_file.read_named_fields(id_list, field_list)</span>
<span class="sd">            &gt;&gt;&gt;     for l in read_rs:</span>
<span class="sd">            &gt;&gt;&gt;         print(l)</span>
<span class="sd">            [&#39;0&#39;, &#39;0&#39;, &#39;0&#39;]</span>
<span class="sd">            [&#39;0&#39;, &#39;0&#39;, &#39;0&#39;]</span>
<span class="sd">            [&#39;1084&#39;, &#39;1307&#39;, &#39;1976&#39;]</span>
<span class="sd">            [[&#39;Karen McGlone&#39;, [&#39;03/29/2010&#39;, &#39;03/30/2010&#39;, &#39;03/31/2010&#39;, &#39;03/30/2010&#39;], &#39;3.50&#39;],</span>
<span class="sd">            [&#39;Jamie Klink&#39;, [&#39;05/05/2010&#39;, &#39;05/07/2010&#39;, &#39;05/05/2010&#39;, &#39;05/07/2010&#39;, &#39;05/05/2010&#39;], &#39;4.82&#39;],</span>
<span class="sd">            [&#39;Mo Evans&#39;, [&#39;08/23/2010&#39;, &#39;08/20/2010&#39;, &#39;08/26/2010&#39;, &#39;08/22/2010&#39;, &#39;08/25/2010&#39;, &#39;08/22/2010&#39;], &#39;19.04&#39;]]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">id_list</span><span class="p">,</span> <span class="n">field_list</span><span class="p">,</span> <span class="n">lock_flag</span> <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>

        <span class="n">id_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">id_list</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_READNAMEDFIELDSET</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">_map_read_lock_flag</span><span class="p">(</span><span class="n">lock_flag</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">id_set</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">field_list</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="n">resp_code_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="n">status_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="n">return_data_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>

            <span class="n">resp_codes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">resp_code_set</span><span class="o">.</span><span class="n">list</span><span class="p">))</span>
            <span class="n">status_codes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">status_set</span><span class="o">.</span><span class="n">list</span><span class="p">))</span>

            <span class="n">resp_error_codes</span> <span class="o">=</span> <span class="p">[</span> <span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">resp_codes</span> <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">resp_error_codes</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOFileError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_error_codes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="n">response_codes</span><span class="o">=</span><span class="n">resp_codes</span><span class="p">,</span> <span class="n">status_codes</span><span class="o">=</span><span class="n">status_codes</span><span class="p">,</span> <span class="n">id_list</span><span class="o">=</span><span class="n">id_set</span><span class="o">.</span><span class="n">list</span><span class="p">)</span>

            <span class="n">result_set</span> <span class="o">=</span> <span class="p">(</span><span class="n">resp_codes</span><span class="p">,</span> <span class="n">status_codes</span><span class="p">,</span> <span class="n">id_set</span><span class="o">.</span><span class="n">list</span><span class="p">,</span> <span class="n">return_data_set</span><span class="o">.</span><span class="n">list</span><span class="p">)</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">result_set</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result_set</span>

    <span class="k">def</span> <span class="nf">write_named_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_list</span><span class="p">,</span> <span class="n">field_list</span><span class="p">,</span> <span class="n">field_data_list</span><span class="p">,</span> <span class="n">lock_flag</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write a list of named fields to multiple records.</span>

<span class="sd">        Note:</span>
<span class="sd">            If field_list contains names that are not defined in the dictionary, these names are ignored.</span>
<span class="sd">            If a field is of I/V type or the record id itself, it is ignored.</span>
<span class="sd">            If a field has CONV code on it, an iconv is automatically performed to use its internal value for the write.</span>

<span class="sd">        Args:</span>
<span class="sd">            id_list: a list of record ids.</span>
<span class="sd">            field_list: a list of field names.</span>
<span class="sd">            field_data_list: a list of DynArray consisting of all the field values.</span>
<span class="sd">            lock_flag (int, optional): 0 (default), LOCK_RETAIN, LOCK_WAIT, or LOCK_RETAIN + LOCK_WAIT</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple: a tuple consisting of 4 lists: 1. response code list, 2. status code list, 3. record id list,</span>
<span class="sd">                    4. field values list.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; with File(&quot;RENTAL_DETAILS&quot;) as test_file:</span>
<span class="sd">            &gt;&gt;&gt;     field_list = [&quot;FULL_NAME&quot;, &quot;ACTUAL_RETURN_DATE&quot;, &quot;BALANCE_DUE&quot;]</span>
<span class="sd">            &gt;&gt;&gt;     id_list = [&#39;1084&#39;, &#39;1307&#39;, &#39;1976&#39;]</span>
<span class="sd">            &gt;&gt;&gt;     field_value_list = [[&#39;Karen McGlone&#39;, [&#39;03/29/2010&#39;, &#39;03/30/2010&#39;, &#39;03/31/2010&#39;, &#39;03/30/2010&#39;],</span>
<span class="sd">            &#39;3.50&#39;], [&#39;Jamie Klink&#39;, [&#39;05/05/2010&#39;, &#39;05/07/2010&#39;, &#39;05/05/2010&#39;, &#39;05/07/2010&#39;, &#39;05/05/2010&#39;], &#39;4.82&#39;],</span>
<span class="sd">            [&#39;Mo Evans&#39;, [&#39;08/23/2010&#39;, &#39;08/20/2010&#39;, &#39;08/26/2010&#39;, &#39;08/22/2010&#39;, &#39;08/25/2010&#39;, &#39;08/22/2010&#39;],&#39;19.04&#39;]]</span>
<span class="sd">            &gt;&gt;&gt;     write_rs = test_file.write_named_fields(id_list, field_list, field_value_list)</span>
<span class="sd">            &gt;&gt;&gt;     for l in write_rs:</span>
<span class="sd">            &gt;&gt;&gt;         print(l)</span>
<span class="sd">            [&#39;0&#39;, &#39;0&#39;, &#39;0&#39;]</span>
<span class="sd">            [&#39;0&#39;, &#39;0&#39;, &#39;0&#39;]</span>
<span class="sd">            [&#39;1084&#39;, &#39;1307&#39;, &#39;1976&#39;]</span>
<span class="sd">            [[&#39;Karen McGlone&#39;, [&#39;03/29/2010&#39;, &#39;03/30/2010&#39;, &#39;03/31/2010&#39;, &#39;03/30/2010&#39;], &#39;3.50&#39;], [&#39;Jamie Klink&#39;,</span>
<span class="sd">            [&#39;05/05/2010&#39;, &#39;05/07/2010&#39;, &#39;05/05/2010&#39;, &#39;05/07/2010&#39;, &#39;05/05/2010&#39;], &#39;4.82&#39;], [&#39;Mo Evans&#39;,</span>
<span class="sd">            [&#39;08/23/2010&#39;, &#39;08/20/2010&#39;, &#39;08/26/2010&#39;, &#39;08/22/2010&#39;, &#39;08/25/2010&#39;, &#39;08/22/2010&#39;], &#39;19.04&#39;]]</span>


<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">id_list</span><span class="p">,</span> <span class="n">field_list</span><span class="p">,</span> <span class="n">field_data_list</span><span class="p">,</span> <span class="n">lock_flag</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>

        <span class="n">id_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">id_list</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
        <span class="n">field_data_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">field_data_list</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_WRITENAMEDFIELDSET</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">_map_write_lock_flag</span><span class="p">(</span><span class="n">lock_flag</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">id_set</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">field_data_set</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">field_list</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="n">resp_code_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="n">status_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="n">result_set</span> <span class="o">=</span> <span class="p">(</span><span class="n">resp_code_set</span><span class="o">.</span><span class="n">list</span><span class="p">,</span> <span class="n">status_set</span><span class="o">.</span><span class="n">list</span><span class="p">,</span> <span class="n">id_set</span><span class="o">.</span><span class="n">list</span><span class="p">,</span> <span class="n">field_data_set</span><span class="o">.</span><span class="n">list</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">result_set</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result_set</span>

    <span class="k">def</span> <span class="nf">read_records</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_list</span><span class="p">,</span> <span class="n">lock_flag</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Read multiple records from the file.</span>

<span class="sd">        Args:</span>
<span class="sd">            id_list: a list of record ids.</span>
<span class="sd">            lock_flag (int, optional): 0 (default, no lock), or [LOCK_EXCLUSIVE or LOCK_SHARED] [+ LOCK_WAIT]</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple: a tuple consisting of four lists: 1. response code list, 2. status code list, 3. record id list,</span>
<span class="sd">                    4. record list.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">id_list</span><span class="p">,</span> <span class="n">lock_flag</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>

        <span class="n">id_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">id_list</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_READSET</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">_map_read_lock_flag</span><span class="p">(</span><span class="n">lock_flag</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">id_set</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="n">resp_code_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="n">status_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="n">return_data_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="n">result_set</span> <span class="o">=</span> <span class="p">(</span><span class="n">resp_code_set</span><span class="o">.</span><span class="n">list</span><span class="p">,</span> <span class="n">status_set</span><span class="o">.</span><span class="n">list</span><span class="p">,</span> <span class="n">id_set</span><span class="o">.</span><span class="n">list</span><span class="p">,</span> <span class="n">return_data_set</span><span class="o">.</span><span class="n">list</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">result_set</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result_set</span>

    <span class="k">def</span> <span class="nf">write_records</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_list</span><span class="p">,</span> <span class="n">record_list</span><span class="p">,</span> <span class="n">lock_flag</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write multiple records into the file.</span>

<span class="sd">        Args:</span>
<span class="sd">            id_list: a list of record ids.</span>
<span class="sd">            record_list: a list of records.</span>
<span class="sd">            lock_flag (int, optional): 0 (default), LOCK_RETAIN, LOCK_WAIT, or LOCK_RETAIN + LOCK_WAIT</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple: a tuple consisting of four lists: 1. response code list, 2. status code list, 3. record id list,</span>
<span class="sd">                    4. record list.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">id_list</span><span class="p">,</span> <span class="n">record_list</span><span class="p">,</span> <span class="n">lock_flag</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>

        <span class="n">id_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">id_list</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
        <span class="n">record_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">record_list</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_WRITESET</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">_map_write_lock_flag</span><span class="p">(</span><span class="n">lock_flag</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">id_set</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">record_set</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="n">resp_code_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="n">status_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="n">result_set</span> <span class="o">=</span> <span class="p">(</span><span class="n">resp_code_set</span><span class="o">.</span><span class="n">list</span><span class="p">,</span> <span class="n">status_set</span><span class="o">.</span><span class="n">list</span><span class="p">,</span> <span class="n">id_set</span><span class="o">.</span><span class="n">list</span><span class="p">,</span> <span class="n">record_set</span><span class="o">.</span><span class="n">list</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">result_set</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result_set</span>

    <span class="k">def</span> <span class="nf">fileInfoEx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Get information about the specified files configuration, such as the</span>
<span class="sd">        files parameters, its modulus and load, its operating system file name, and its VOC name.</span>
<span class="sd">        The information returned depends on the file type and the value of the key.</span>

<span class="sd">        After calling the method fileInfoEx, you can access these attributes to get their values.</span>
<span class="sd">        isFileVar: 1 if file.variable is a valid file variable; 0 otherwise.</span>
<span class="sd">        vocName: VOC name of the file.</span>
<span class="sd">        pathName: Path name of the file.</span>
<span class="sd">        type: File type: 1 Static hashed | 3 Dynamic hashed | 4 Type 1 | 5 Sequential | 7 Distributed and Multivolume</span>
<span class="sd">        hashAlg: Hashing algorithm: 2 for GENERAL, 3 for SEQ.NUM.</span>
<span class="sd">        modulus: Current modulus.</span>
<span class="sd">        minModulus: Minimum modulus.</span>
<span class="sd">        groupSize: Group size, in 1-KB units.</span>
<span class="sd">        largeRecordSize: Large record size.</span>
<span class="sd">        mergeLoad: Merge load parameter.</span>
<span class="sd">        splitLoad: Split load parameter.</span>
<span class="sd">        currentLoad: Current loading of the file (%).</span>
<span class="sd">        nodeName: Empty string if the file resides on the local system. Otherwise, the name of the node where the file resides.</span>
<span class="sd">        isAKFile: 1 if secondary indexes exist on the file; 0 otherwise.</span>
<span class="sd">        currentLine: Current line number.</span>
<span class="sd">        partNum: For a distributed file, returns the list of currently open part numbers.</span>
<span class="sd">        fileStatus: For a distributed file, returns the list of status codes indicating whether the last I/O operation succeeded</span>
<span class="sd">                    or failed for each part. A value of 1 indicates the corresponding part file is not open.</span>
<span class="sd">        recoveryType: 1 if the file is marked as recoverable, 0 if it is not. Returns an empty string</span>
<span class="sd">                      if recovery is not supported on the file type (such as type 1 and type 19 files).</span>
<span class="sd">        recoveryId: Always returns an empty string.</span>
<span class="sd">        isFixedModulus: Always returns 0.</span>
<span class="sd">        nlsmap: If NLS is enabled, the file map name; otherwise an empty string.</span>
<span class="sd">                If the map name is the default specified in the uvconfig file, the returned string is the map name followed by the name of the configurable parameter in parentheses.</span>
<span class="sd">        encryption: Returns a dynamic array containing the following information:</span>
<span class="sd">                     For a file encrypted with the WHOLERECORD option:</span>
<span class="sd">                    -1@VM@VM</span>
<span class="sd">                     For a file encrypted at the field level:</span>
<span class="sd">                    @VM@VM</span>
<span class="sd">                    @VM[@FM</span>
<span class="sd">                    ...@VM]</span>
<span class="sd">                     Returns an empty string if the file is not encrypted.</span>
<span class="sd">        repStatus: Return values can be:</span>
<span class="sd">                    0  The file is not published, subscribed, or subwriteable.</span>
<span class="sd">                    1  The file is being published.</span>
<span class="sd">                    2  The file is being subscribed.</span>
<span class="sd">                    3  The file is subwriteable.</span>
<span class="sd">                    Note: If U2 Data Replication is not running, this function</span>
<span class="sd">                    returns 0 for any file used with this function.</span>

<span class="sd">        Args: void</span>

<span class="sd">        Returns: void</span>

<span class="sd">        Raise:</span>
<span class="sd">            UOError</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; f = uopy.File(&#39;TEST&#39;)</span>
<span class="sd">            &gt;&gt;&gt; f.fileInfoEx()</span>
<span class="sd">            &gt;&gt;&gt; print(f.vocName)</span>
<span class="sd">            &gt;&gt;&gt; print(f.pathName)</span>
<span class="sd">            &gt;&gt;&gt; print(f.groupSize)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter fileInfoEx&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_FILEINFOEx</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_USC</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;fileInfoEx is not supported on versions prior to UniData 8.2.4 or prior to UniVerse 12.2.1.&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

            <span class="n">fileinfo_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fileinfo_set</span><span class="o">.</span><span class="n">list</span><span class="p">)</span> <span class="o">!=</span> <span class="n">FileInfoEx</span><span class="o">.</span><span class="n">LIST_COUNT</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">isFileVar</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vocName</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pathName</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">hashAlg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">modulus</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">minModulus</span><span class="p">,</span> \
        <span class="bp">self</span><span class="o">.</span><span class="n">groupSize</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">largeRecordSize</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mergeLoad</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">splitLoad</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentLoad</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodeName</span><span class="p">,</span> \
        <span class="bp">self</span><span class="o">.</span><span class="n">isAKFile</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentLine</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">partNum</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fileStatus</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">recoveryType</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">recoveryId</span><span class="p">,</span> \
        <span class="bp">self</span><span class="o">.</span><span class="n">isFixedModulus</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nlsmap</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">encryption</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">repStatus</span> <span class="o">=</span> <span class="n">fileinfo_set</span><span class="o">.</span><span class="n">list</span>

        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        self.isFileVar = fileinfo_set.list[FileInfoEx.IS_FILEVAR]</span>
<span class="sd">        self.vocName = fileinfo_set.list[FileInfoEx.VOCNAME]</span>
<span class="sd">        self.pathName = fileinfo_set.list[FileInfoEx.PATHNAME]</span>
<span class="sd">        self.type = fileinfo_set.list[FileInfoEx.TYPE]</span>
<span class="sd">        self.hashAlg = fileinfo_set.list[FileInfoEx.HASHALG]</span>
<span class="sd">        self.modulus = fileinfo_set.list[FileInfoEx.MODULUS]</span>
<span class="sd">        self.minModulus = fileinfo_set.list[FileInfoEx.MINMODULUS]</span>
<span class="sd">        self.groupSize = fileinfo_set.list[FileInfoEx.GROUPSIZE]</span>
<span class="sd">        self.largeRecordSize = fileinfo_set.list[FileInfoEx.LARGERECORDSIZE]</span>
<span class="sd">        self.mergeLoad = fileinfo_set.list[FileInfoEx.MERGELOAD]</span>
<span class="sd">        self.splitLoad = fileinfo_set.list[FileInfoEx.SPLITLOAD]</span>
<span class="sd">        self.currentLoad = fileinfo_set.list[FileInfoEx.CURRENTLOAD]</span>
<span class="sd">        self.nodeName = fileinfo_set.list[FileInfoEx.NODENAME]</span>
<span class="sd">        self.isAKFile = fileinfo_set.list[FileInfoEx.IS_AKFILE]</span>
<span class="sd">        self.currentLine = fileinfo_set.list[FileInfoEx.CURRENTLINE]</span>
<span class="sd">        self.partNum = fileinfo_set.list[FileInfoEx.PARTNUM]</span>
<span class="sd">        self.fileStatus = fileinfo_set.list[FileInfoEx.STATUS]</span>
<span class="sd">        self.recoveryType = fileinfo_set.list[FileInfoEx.RECOVERYTYPE]</span>
<span class="sd">        self.recoveryId = fileinfo_set.list[FileInfoEx.RECOVERYID]</span>
<span class="sd">        self.isFixedModulus = fileinfo_set.list[FileInfoEx.IS_FIXED_MODULUS]</span>
<span class="sd">        self.nlsmap = fileinfo_set.list[FileInfoEx.NLSMAP]</span>
<span class="sd">        self.encryption = fileinfo_set.list[FileInfoEx.ENCRYPTION]</span>
<span class="sd">        self.repStatus = fileinfo_set.list[FileInfoEx.REPSTATUS]</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">fileinfo_set</span><span class="p">)</span>
        <span class="k">pass</span>
</pre></div>

        </details>

            <div class="docstring"><p>File object represents a MV hashed file on the remote server. It is the main mechanism for applications to
access MV data remotely.</p>

<p>File objects can be used in Python with statement so that whatever occurs in the with statement block, they
are guaranteed to be closed upon exit.</p>

<p>Examples:</p>

<pre><code>&gt;&gt;&gt; with <a href="#File">uopy.File</a>("VOC") as voc_file:
&gt;&gt;&gt;     rec = voc_file.read("LIST")
&gt;&gt;&gt;     print(rec.list)
</code></pre>
</div>


                            <div id="File.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#File.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">File</span><span class="signature">(name, dict_flag=0, session=None)</span>
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">dict_flag</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initializes a File object.</span>
<span class="sd">        Args:</span>
<span class="sd">            name (str): the name of the MV File to be opened.</span>
<span class="sd">            dict_flag (int, optional): when it is uopy.DICT_FILE, then the File object points to the dictionary file.</span>
<span class="sd">                Otherwise, the target is the data file.</span>
<span class="sd">            session (Session, optional): the Session object that the File object is bound to.</span>
<span class="sd">                If omitted, the last opened Session in the current thread will be used.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_INVALIDFILENAME</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict_flag</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">dict_flag</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_opened</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Initializes a File object.
Args:
    name (str): the name of the MV File to be opened.
    dict_flag (int, optional): when it is uopy.DICT_FILE, then the File object points to the dictionary file.
        Otherwise, the target is the data file.
    session (Session, optional): the Session object that the File object is bound to.
        If omitted, the last opened Session in the current thread will be used.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="File.handle" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#File.handle">#&nbsp;&nbsp</a>

        <span class="name">handle</span>
    </div>

    
    

                            </div>
                            <div id="File.status" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#File.status">#&nbsp;&nbsp</a>

        <span class="name">status</span>
    </div>

    
            <div class="docstring"><p>The status code set by the remote server after a file operation.</p>
</div>


                            </div>
                            <div id="File.is_opened" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#File.is_opened">#&nbsp;&nbsp</a>

        <span class="name">is_opened</span>
    </div>

    
            <div class="docstring"><p>boolean: True if the File object is opened on the remote server, otherwise False.</p>
</div>


                            </div>
                            <div id="File.open" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#File.open">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">open</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Open the named file on the remote server.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_opened</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_OPEN</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_flag</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_opened</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Open the named file on the remote server.</p>

<p>Args:</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="File.clear" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#File.clear">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">clear</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clear the content of the file on the remote server.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_CLEARFILE</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Clear the content of the file on the remote server.</p>

<p>Args:</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="File.close" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#File.close">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">close</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Close the opened file on the remote server - all file and record locks are released.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_opened</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_CLOSE</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_opened</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Close the opened file on the remote server - all file and record locks are released.</p>

<p>Args:</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="File.delete" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#File.delete">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">delete</span><span class="signature">(self, record_id, lock_flag=0)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">lock_flag</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete a record in the file.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (any ): the record id - can be str, bytes, or DynArray.</span>
<span class="sd">            lock_flag (int, optional): 0 (default), LOCK_RETAIN, LOCK_WAIT, or LOCK_RETAIN + LOCK_WAIT</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">record_id</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_DELETE</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">_map_delete_lock_flag</span><span class="p">(</span><span class="n">lock_flag</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">record_id</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Delete a record in the file.</p>

<p>Args:
    record_id (any ): the record id - can be str, bytes, or DynArray.
    lock_flag (int, optional): 0 (default), LOCK_RETAIN, LOCK_WAIT, or LOCK_RETAIN + LOCK_WAIT</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="File.read" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#File.read">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">read</span><span class="signature">(self, record_id, lock_flag=0)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">lock_flag</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Read a record in the file.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (any): the record id - can be str, bytes, or DynArray.</span>
<span class="sd">            lock_flag (int, optional): 0 (default, no lock), or [LOCK_EXCLUSIVE or LOCK_SHARED] [+ LOCK_WAIT]</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the content of the record.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">lock_flag</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_READ</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">_map_read_lock_flag</span><span class="p">(</span><span class="n">lock_flag</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">record_id</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_EIO</span><span class="p">:</span>
                    <span class="n">tmp_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span>
                    <span class="k">if</span> <span class="n">tmp_status</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_EIO_MSG_DICT</span><span class="p">:</span>
                        <span class="n">tmp_status</span> <span class="o">=</span> <span class="mi">5</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="n">_EIO_MSG_DICT</span><span class="p">[</span><span class="n">tmp_status</span><span class="p">]</span>
                    <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">record</span> <span class="o">=</span> <span class="n">DynArray</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">record</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">record</span>
</pre></div>

        </details>

            <div class="docstring"><p>Read a record in the file.</p>

<p>Args:
    record_id (any): the record id - can be str, bytes, or DynArray.
    lock_flag (int, optional): 0 (default, no lock), or [LOCK_EXCLUSIVE or LOCK_SHARED] [+ LOCK_WAIT]</p>

<p>Returns:
    DynArray: the content of the record.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="File.write" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#File.write">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">write</span><span class="signature">(self, record_id, record, lock_flag=0)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">lock_flag</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write a record into the file.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (any): the record id - can be str, bytes, or DynArray.</span>
<span class="sd">            record (any): the record to be written - can be DynArray, str, bytes.</span>
<span class="sd">            lock_flag (int, optional): 0 (default), LOCK_RETAIN, LOCK_WAIT, or LOCK_RETAIN + LOCK_WAIT</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">lock_flag</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_WRITE</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">_map_write_lock_flag</span><span class="p">(</span><span class="n">lock_flag</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">record_id</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">record</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Write a record into the file.</p>

<p>Args:
    record_id (any): the record id - can be str, bytes, or DynArray.
    record (any): the record to be written - can be DynArray, str, bytes.
    lock_flag (int, optional): 0 (default), LOCK_RETAIN, LOCK_WAIT, or LOCK_RETAIN + LOCK_WAIT</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="File.read_field" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#File.read_field">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">read_field</span><span class="signature">(self, record_id, field_num, lock_flag=0)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">read_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">field_num</span><span class="p">,</span> <span class="n">lock_flag</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Read a single field of a record in the file.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (any ): the record id - can be str, bytes, or DynArray</span>
<span class="sd">            field_num (int): the field number</span>
<span class="sd">            lock_flag (int, optional): 0 (default), or [LOCK_EXCLUSIVE or LOCK_SHARED] [+ LOCK_WAIT]</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the value of the field.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">field_num</span><span class="p">,</span> <span class="n">lock_flag</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_READV</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">_map_read_lock_flag</span><span class="p">(</span><span class="n">lock_flag</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">field_num</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">record_id</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_EIO</span><span class="p">:</span>
                    <span class="n">tmp_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span>
                    <span class="k">if</span> <span class="n">tmp_status</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_EIO_MSG_DICT</span><span class="p">:</span>
                        <span class="n">tmp_status</span> <span class="o">=</span> <span class="mi">5</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="n">_EIO_MSG_DICT</span><span class="p">[</span><span class="n">tmp_status</span><span class="p">]</span>
                    <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">field</span> <span class="o">=</span> <span class="n">DynArray</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">field</span>
</pre></div>

        </details>

            <div class="docstring"><p>Read a single field of a record in the file.</p>

<p>Args:
    record_id (any ): the record id - can be str, bytes, or DynArray
    field_num (int): the field number
    lock_flag (int, optional): 0 (default), or [LOCK_EXCLUSIVE or LOCK_SHARED] [+ LOCK_WAIT]</p>

<p>Returns:
    DynArray: the value of the field.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="File.write_field" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#File.write_field">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">write_field</span><span class="signature">(self, record_id, field_num, field_value, lock_flag=0)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">write_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">field_num</span><span class="p">,</span> <span class="n">field_value</span><span class="p">,</span> <span class="n">lock_flag</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write a single field of a record to the file.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (any): the record id - can be str, bytes, or DynArray.</span>
<span class="sd">            field_num (int): the field number.</span>
<span class="sd">            field_value (any): the field value to be written - can be DynArray, str, bytes.</span>
<span class="sd">            lock_flag (int, optional): 0 (default), LOCK_RETAIN, LOCK_WAIT, or LOCK_RETAIN + LOCK_WAIT</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">field_num</span><span class="p">,</span> <span class="n">field_value</span><span class="p">,</span> <span class="n">lock_flag</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_WRITEV</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">_map_write_lock_flag</span><span class="p">(</span><span class="n">lock_flag</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">field_num</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">record_id</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">field_value</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Write a single field of a record to the file.</p>

<p>Args:
    record_id (any): the record id - can be str, bytes, or DynArray.
    field_num (int): the field number.
    field_value (any): the field value to be written - can be DynArray, str, bytes.
    lock_flag (int, optional): 0 (default), LOCK_RETAIN, LOCK_WAIT, or LOCK_RETAIN + LOCK_WAIT</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="File.lock_file" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#File.lock_file">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">lock_file</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">lock_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Lock the entire file exclusively.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_FILELOCK</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Lock the entire file exclusively.</p>

<p>Args:</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="File.unlock_file" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#File.unlock_file">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">unlock_file</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">unlock_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Release the exclusive lock on the entire file.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_FILEUNLOCK</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Release the exclusive lock on the entire file.</p>

<p>Args:</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="File.lock" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#File.lock">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">lock</span><span class="signature">(self, record_id, lock_flag=4)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">lock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">lock_flag</span><span class="o">=</span><span class="n">LOCK_EXCLUSIVE</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Lock a record in the file.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (any): the record id - can be str, bytes, or DynArray.</span>
<span class="sd">            lock_flag (int, optional): LOCK_EXCLUSIVE (default) or LOCK_SHARED</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">lock_flag</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_RECORDLOCK</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">_map_read_lock_flag</span><span class="p">(</span><span class="n">lock_flag</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">record_id</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Lock a record in the file.</p>

<p>Args:
    record_id (any): the record id - can be str, bytes, or DynArray.
    lock_flag (int, optional): LOCK_EXCLUSIVE (default) or LOCK_SHARED</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="File.unlock" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#File.unlock">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">unlock</span><span class="signature">(self, record_id, clear_flag=False)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">unlock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">clear_flag</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Release locks owned by the current session on a record of the file.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (any): the record id - can be str, bytes, or DynArray.</span>
<span class="sd">            clear_flag (boolean, optional): False (default), only release the lock on the specified record; otherwise,</span>
<span class="sd">                release all the locks owned by the current session.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">clear_flag</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_RELEASE</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">clear_flag</span> <span class="k">else</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">record_id</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Release locks owned by the current session on a record of the file.</p>

<p>Args:
    record_id (any): the record id - can be str, bytes, or DynArray.
    clear_flag (boolean, optional): False (default), only release the lock on the specified record; otherwise,
        release all the locks owned by the current session.</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="File.is_locked" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#File.is_locked">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">is_locked</span><span class="signature">(self, record_id)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">is_locked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if a record has a lock on it.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (any): the record id - can be str, bytes, or DynArray.</span>

<span class="sd">        Returns:</span>
<span class="sd">            boolean: True, a lock exists on the record by either the current session or other sessions.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">record_id</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_RECORDLOCKED</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">record_id</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

            <span class="n">lock_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">lock_status</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span> <span class="k">if</span> <span class="n">lock_status</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">True</span>
</pre></div>

        </details>

            <div class="docstring"><p>Check if a record has a lock on it.</p>

<p>Args:
    record_id (any): the record id - can be str, bytes, or DynArray.</p>

<p>Returns:
    boolean: True, a lock exists on the record by either the current session or other sessions.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="File.get_ak_info" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#File.get_ak_info">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_ak_info</span><span class="signature">(self, index_name=&#39;&#39;)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_ak_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index_name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Obtain information about the secondary key indexes available on the file.</span>

<span class="sd">        Args:</span>
<span class="sd">            index_name (str, Optional). If this value is None or ignored, the list of available indices is returned.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray:</span>
<span class="sd">                The return value will vary depending on the type of index, as follows:</span>
<span class="sd">                1. For D-Type indexes: Field 1 contains D as the first character and</span>
<span class="sd">                    Field 2 contains the location number of the indexed field.</span>
<span class="sd">                2. For I-type indexes: Field 1 contains I as the first character,</span>
<span class="sd">                    Field 2 contains the I-type expression, and the compiled I-type resides in field 19 and onward.</span>
<span class="sd">                3. For both types:</span>
<span class="sd">                    2nd value of Field 1 indicates if the index needs to be rebuilt. It is an empty string otherwise.</span>
<span class="sd">                    3rd value of Field 1 is set if the index is null-suppressed. It is an empty string otherwise.</span>
<span class="sd">                    4th value of Field 1 is set if automatic updates are disabled. It is an empty string otherwise.</span>
<span class="sd">                    6th value of Field 1 contains an S for single valued indices or M for a multivalued index.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">index_name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_INDICES</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">index_name</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">index_name</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

            <span class="n">ak_info</span> <span class="o">=</span> <span class="n">DynArray</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">ak_info</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ak_info</span>
</pre></div>

        </details>

            <div class="docstring"><p>Obtain information about the secondary key indexes available on the file.</p>

<p>Args:
    index_name (str, Optional). If this value is None or ignored, the list of available indices is returned.</p>

<p>Returns:
    DynArray:
        The return value will vary depending on the type of index, as follows:
        1. For D-Type indexes: Field 1 contains D as the first character and
            Field 2 contains the location number of the indexed field.
        2. For I-type indexes: Field 1 contains I as the first character,
            Field 2 contains the I-type expression, and the compiled I-type resides in field 19 and onward.
        3. For both types:
            2nd value of Field 1 indicates if the index needs to be rebuilt. It is an empty string otherwise.
            3rd value of Field 1 is set if the index is null-suppressed. It is an empty string otherwise.
            4th value of Field 1 is set if automatic updates are disabled. It is an empty string otherwise.
            6th value of Field 1 contains an S for single valued indices or M for a multivalued index.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="File.itype" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#File.itype">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">itype</span><span class="signature">(self, record_id, i_type_id)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">itype</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">i_type_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Evaluates the specified I-descriptor and returns the evaluated string.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (any): the record id - can be str, bytes, or DynArray.</span>
<span class="sd">            i_type_id (any): the I-descriptor record id in the dictionary - can be str, bytes, or DynArray.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the evaluated result.</span>

<span class="sd">        Raises:</span>
<span class="sd">          UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">i_type_id</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_ITYPE</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">record_id</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">i_type_id</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

            <span class="n">result</span> <span class="o">=</span> <span class="n">DynArray</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
</pre></div>

        </details>

            <div class="docstring"><p>Evaluates the specified I-descriptor and returns the evaluated string.</p>

<p>Args:
    record_id (any): the record id - can be str, bytes, or DynArray.
    i_type_id (any): the I-descriptor record id in the dictionary - can be str, bytes, or DynArray.</p>

<p>Returns:
    DynArray: the evaluated result.</p>

<p>Raises:
  UOError</p>
</div>


                            </div>
                            <div id="File.read_named_fields" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#File.read_named_fields">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">read_named_fields</span><span class="signature">(self, id_list, field_list, lock_flag=0)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">read_named_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_list</span><span class="p">,</span> <span class="n">field_list</span><span class="p">,</span> <span class="n">lock_flag</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Read a list of named fields on multiple records.</span>

<span class="sd">        Note:</span>
<span class="sd">            fields can be of D-type or I/V type.</span>
<span class="sd">            If field_list contains names that are not defined in the dictionary, these names are replaced by @ID.</span>
<span class="sd">            If a field has conv code on it, an oconv is automatically performed on its internal value to get the</span>
<span class="sd">            converted output value.</span>

<span class="sd">        Args:</span>
<span class="sd">            id_list: a list of record ids.</span>
<span class="sd">            field_list: a list of field names.</span>
<span class="sd">            lock_flag (int, optional): 0 (default, no lock), or [LOCK_EXCLUSIVE or LOCK_SHARED] [+ LOCK_WAIT]</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple: a tuple consisting of four lists: 1. response code list, 2. status code list, 3. record id list,</span>
<span class="sd">                    4. record list.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOFileError</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; with File(&quot;RENTAL_DETAILS&quot;) as test_file:</span>
<span class="sd">            &gt;&gt;&gt;     field_list = [&quot;FULL_NAME&quot;, &quot;ACTUAL_RETURN_DATE&quot;, &quot;BALANCE_DUE&quot;]</span>
<span class="sd">            &gt;&gt;&gt;     id_list = [&#39;1084&#39;, &#39;1307&#39;, &#39;1976&#39;]</span>
<span class="sd">            &gt;&gt;&gt;     read_rs = test_file.read_named_fields(id_list, field_list)</span>
<span class="sd">            &gt;&gt;&gt;     for l in read_rs:</span>
<span class="sd">            &gt;&gt;&gt;         print(l)</span>
<span class="sd">            [&#39;0&#39;, &#39;0&#39;, &#39;0&#39;]</span>
<span class="sd">            [&#39;0&#39;, &#39;0&#39;, &#39;0&#39;]</span>
<span class="sd">            [&#39;1084&#39;, &#39;1307&#39;, &#39;1976&#39;]</span>
<span class="sd">            [[&#39;Karen McGlone&#39;, [&#39;03/29/2010&#39;, &#39;03/30/2010&#39;, &#39;03/31/2010&#39;, &#39;03/30/2010&#39;], &#39;3.50&#39;],</span>
<span class="sd">            [&#39;Jamie Klink&#39;, [&#39;05/05/2010&#39;, &#39;05/07/2010&#39;, &#39;05/05/2010&#39;, &#39;05/07/2010&#39;, &#39;05/05/2010&#39;], &#39;4.82&#39;],</span>
<span class="sd">            [&#39;Mo Evans&#39;, [&#39;08/23/2010&#39;, &#39;08/20/2010&#39;, &#39;08/26/2010&#39;, &#39;08/22/2010&#39;, &#39;08/25/2010&#39;, &#39;08/22/2010&#39;], &#39;19.04&#39;]]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">id_list</span><span class="p">,</span> <span class="n">field_list</span><span class="p">,</span> <span class="n">lock_flag</span> <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>

        <span class="n">id_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">id_list</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_READNAMEDFIELDSET</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">_map_read_lock_flag</span><span class="p">(</span><span class="n">lock_flag</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">id_set</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">field_list</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="n">resp_code_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="n">status_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="n">return_data_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>

            <span class="n">resp_codes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">resp_code_set</span><span class="o">.</span><span class="n">list</span><span class="p">))</span>
            <span class="n">status_codes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">status_set</span><span class="o">.</span><span class="n">list</span><span class="p">))</span>

            <span class="n">resp_error_codes</span> <span class="o">=</span> <span class="p">[</span> <span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">resp_codes</span> <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">resp_error_codes</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOFileError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_error_codes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="n">response_codes</span><span class="o">=</span><span class="n">resp_codes</span><span class="p">,</span> <span class="n">status_codes</span><span class="o">=</span><span class="n">status_codes</span><span class="p">,</span> <span class="n">id_list</span><span class="o">=</span><span class="n">id_set</span><span class="o">.</span><span class="n">list</span><span class="p">)</span>

            <span class="n">result_set</span> <span class="o">=</span> <span class="p">(</span><span class="n">resp_codes</span><span class="p">,</span> <span class="n">status_codes</span><span class="p">,</span> <span class="n">id_set</span><span class="o">.</span><span class="n">list</span><span class="p">,</span> <span class="n">return_data_set</span><span class="o">.</span><span class="n">list</span><span class="p">)</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">result_set</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result_set</span>
</pre></div>

        </details>

            <div class="docstring"><p>Read a list of named fields on multiple records.</p>

<p>Note:
    fields can be of D-type or I/V type.
    If field_list contains names that are not defined in the dictionary, these names are replaced by @ID.
    If a field has conv code on it, an oconv is automatically performed on its internal value to get the
    converted output value.</p>

<p>Args:
    id_list: a list of record ids.
    field_list: a list of field names.
    lock_flag (int, optional): 0 (default, no lock), or [LOCK_EXCLUSIVE or LOCK_SHARED] [+ LOCK_WAIT]</p>

<p>Returns:
    tuple: a tuple consisting of four lists: 1. response code list, 2. status code list, 3. record id list,
            4. record list.</p>

<p>Raises:
    UOFileError</p>

<p>Examples:</p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>with File("RENTAL_DETAILS") as test_file:
          field_list = ["FULL_NAME", "ACTUAL_RETURN_DATE", "BALANCE_DUE"]
          id_list = ['1084', '1307', '1976']
          read_rs = test_file.read_named_fields(id_list, field_list)
          for l in read_rs:
              print(l)
          ['0', '0', '0']
          ['0', '0', '0']
          ['1084', '1307', '1976']
          [['Karen McGlone', ['03/29/2010', '03/30/2010', '03/31/2010', '03/30/2010'], '3.50'],
          ['Jamie Klink', ['05/05/2010', '05/07/2010', '05/05/2010', '05/07/2010', '05/05/2010'], '4.82'],
          ['Mo Evans', ['08/23/2010', '08/20/2010', '08/26/2010', '08/22/2010', '08/25/2010', '08/22/2010'], '19.04']]</p>
    </blockquote>
  </blockquote>
</blockquote>
</div>


                            </div>
                            <div id="File.write_named_fields" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#File.write_named_fields">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">write_named_fields</span><span class="signature">(self, id_list, field_list, field_data_list, lock_flag=0)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">write_named_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_list</span><span class="p">,</span> <span class="n">field_list</span><span class="p">,</span> <span class="n">field_data_list</span><span class="p">,</span> <span class="n">lock_flag</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write a list of named fields to multiple records.</span>

<span class="sd">        Note:</span>
<span class="sd">            If field_list contains names that are not defined in the dictionary, these names are ignored.</span>
<span class="sd">            If a field is of I/V type or the record id itself, it is ignored.</span>
<span class="sd">            If a field has CONV code on it, an iconv is automatically performed to use its internal value for the write.</span>

<span class="sd">        Args:</span>
<span class="sd">            id_list: a list of record ids.</span>
<span class="sd">            field_list: a list of field names.</span>
<span class="sd">            field_data_list: a list of DynArray consisting of all the field values.</span>
<span class="sd">            lock_flag (int, optional): 0 (default), LOCK_RETAIN, LOCK_WAIT, or LOCK_RETAIN + LOCK_WAIT</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple: a tuple consisting of 4 lists: 1. response code list, 2. status code list, 3. record id list,</span>
<span class="sd">                    4. field values list.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; with File(&quot;RENTAL_DETAILS&quot;) as test_file:</span>
<span class="sd">            &gt;&gt;&gt;     field_list = [&quot;FULL_NAME&quot;, &quot;ACTUAL_RETURN_DATE&quot;, &quot;BALANCE_DUE&quot;]</span>
<span class="sd">            &gt;&gt;&gt;     id_list = [&#39;1084&#39;, &#39;1307&#39;, &#39;1976&#39;]</span>
<span class="sd">            &gt;&gt;&gt;     field_value_list = [[&#39;Karen McGlone&#39;, [&#39;03/29/2010&#39;, &#39;03/30/2010&#39;, &#39;03/31/2010&#39;, &#39;03/30/2010&#39;],</span>
<span class="sd">            &#39;3.50&#39;], [&#39;Jamie Klink&#39;, [&#39;05/05/2010&#39;, &#39;05/07/2010&#39;, &#39;05/05/2010&#39;, &#39;05/07/2010&#39;, &#39;05/05/2010&#39;], &#39;4.82&#39;],</span>
<span class="sd">            [&#39;Mo Evans&#39;, [&#39;08/23/2010&#39;, &#39;08/20/2010&#39;, &#39;08/26/2010&#39;, &#39;08/22/2010&#39;, &#39;08/25/2010&#39;, &#39;08/22/2010&#39;],&#39;19.04&#39;]]</span>
<span class="sd">            &gt;&gt;&gt;     write_rs = test_file.write_named_fields(id_list, field_list, field_value_list)</span>
<span class="sd">            &gt;&gt;&gt;     for l in write_rs:</span>
<span class="sd">            &gt;&gt;&gt;         print(l)</span>
<span class="sd">            [&#39;0&#39;, &#39;0&#39;, &#39;0&#39;]</span>
<span class="sd">            [&#39;0&#39;, &#39;0&#39;, &#39;0&#39;]</span>
<span class="sd">            [&#39;1084&#39;, &#39;1307&#39;, &#39;1976&#39;]</span>
<span class="sd">            [[&#39;Karen McGlone&#39;, [&#39;03/29/2010&#39;, &#39;03/30/2010&#39;, &#39;03/31/2010&#39;, &#39;03/30/2010&#39;], &#39;3.50&#39;], [&#39;Jamie Klink&#39;,</span>
<span class="sd">            [&#39;05/05/2010&#39;, &#39;05/07/2010&#39;, &#39;05/05/2010&#39;, &#39;05/07/2010&#39;, &#39;05/05/2010&#39;], &#39;4.82&#39;], [&#39;Mo Evans&#39;,</span>
<span class="sd">            [&#39;08/23/2010&#39;, &#39;08/20/2010&#39;, &#39;08/26/2010&#39;, &#39;08/22/2010&#39;, &#39;08/25/2010&#39;, &#39;08/22/2010&#39;], &#39;19.04&#39;]]</span>


<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">id_list</span><span class="p">,</span> <span class="n">field_list</span><span class="p">,</span> <span class="n">field_data_list</span><span class="p">,</span> <span class="n">lock_flag</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>

        <span class="n">id_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">id_list</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
        <span class="n">field_data_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">field_data_list</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_WRITENAMEDFIELDSET</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">_map_write_lock_flag</span><span class="p">(</span><span class="n">lock_flag</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">id_set</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">field_data_set</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">field_list</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="n">resp_code_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="n">status_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="n">result_set</span> <span class="o">=</span> <span class="p">(</span><span class="n">resp_code_set</span><span class="o">.</span><span class="n">list</span><span class="p">,</span> <span class="n">status_set</span><span class="o">.</span><span class="n">list</span><span class="p">,</span> <span class="n">id_set</span><span class="o">.</span><span class="n">list</span><span class="p">,</span> <span class="n">field_data_set</span><span class="o">.</span><span class="n">list</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">result_set</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result_set</span>
</pre></div>

        </details>

            <div class="docstring"><p>Write a list of named fields to multiple records.</p>

<p>Note:
    If field_list contains names that are not defined in the dictionary, these names are ignored.
    If a field is of I/V type or the record id itself, it is ignored.
    If a field has CONV code on it, an iconv is automatically performed to use its internal value for the write.</p>

<p>Args:
    id_list: a list of record ids.
    field_list: a list of field names.
    field_data_list: a list of DynArray consisting of all the field values.
    lock_flag (int, optional): 0 (default), LOCK_RETAIN, LOCK_WAIT, or LOCK_RETAIN + LOCK_WAIT</p>

<p>Returns:
    tuple: a tuple consisting of 4 lists: 1. response code list, 2. status code list, 3. record id list,
            4. field values list.</p>

<p>Raises:
    UOError</p>

<p>Examples:</p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>with File("RENTAL_DETAILS") as test_file:
          field_list = ["FULL_NAME", "ACTUAL_RETURN_DATE", "BALANCE_DUE"]
          id_list = ['1084', '1307', '1976']
          field_value_list = [['Karen McGlone', ['03/29/2010', '03/30/2010', '03/31/2010', '03/30/2010'],
          '3.50'], ['Jamie Klink', ['05/05/2010', '05/07/2010', '05/05/2010', '05/07/2010', '05/05/2010'], '4.82'],
          ['Mo Evans', ['08/23/2010', '08/20/2010', '08/26/2010', '08/22/2010', '08/25/2010', '08/22/2010'],'19.04']]
          write_rs = test_file.write_named_fields(id_list, field_list, field_value_list)
          for l in write_rs:
              print(l)
          ['0', '0', '0']
          ['0', '0', '0']
          ['1084', '1307', '1976']
          [['Karen McGlone', ['03/29/2010', '03/30/2010', '03/31/2010', '03/30/2010'], '3.50'], ['Jamie Klink',
          ['05/05/2010', '05/07/2010', '05/05/2010', '05/07/2010', '05/05/2010'], '4.82'], ['Mo Evans',
          ['08/23/2010', '08/20/2010', '08/26/2010', '08/22/2010', '08/25/2010', '08/22/2010'], '19.04']]</p>
    </blockquote>
  </blockquote>
</blockquote>
</div>


                            </div>
                            <div id="File.read_records" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#File.read_records">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">read_records</span><span class="signature">(self, id_list, lock_flag=0)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">read_records</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_list</span><span class="p">,</span> <span class="n">lock_flag</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Read multiple records from the file.</span>

<span class="sd">        Args:</span>
<span class="sd">            id_list: a list of record ids.</span>
<span class="sd">            lock_flag (int, optional): 0 (default, no lock), or [LOCK_EXCLUSIVE or LOCK_SHARED] [+ LOCK_WAIT]</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple: a tuple consisting of four lists: 1. response code list, 2. status code list, 3. record id list,</span>
<span class="sd">                    4. record list.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">id_list</span><span class="p">,</span> <span class="n">lock_flag</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>

        <span class="n">id_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">id_list</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_READSET</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">_map_read_lock_flag</span><span class="p">(</span><span class="n">lock_flag</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">id_set</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="n">resp_code_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="n">status_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="n">return_data_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="n">result_set</span> <span class="o">=</span> <span class="p">(</span><span class="n">resp_code_set</span><span class="o">.</span><span class="n">list</span><span class="p">,</span> <span class="n">status_set</span><span class="o">.</span><span class="n">list</span><span class="p">,</span> <span class="n">id_set</span><span class="o">.</span><span class="n">list</span><span class="p">,</span> <span class="n">return_data_set</span><span class="o">.</span><span class="n">list</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">result_set</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result_set</span>
</pre></div>

        </details>

            <div class="docstring"><p>Read multiple records from the file.</p>

<p>Args:
    id_list: a list of record ids.
    lock_flag (int, optional): 0 (default, no lock), or [LOCK_EXCLUSIVE or LOCK_SHARED] [+ LOCK_WAIT]</p>

<p>Returns:
    tuple: a tuple consisting of four lists: 1. response code list, 2. status code list, 3. record id list,
            4. record list.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="File.write_records" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#File.write_records">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">write_records</span><span class="signature">(self, id_list, record_list, lock_flag=0)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">write_records</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_list</span><span class="p">,</span> <span class="n">record_list</span><span class="p">,</span> <span class="n">lock_flag</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write multiple records into the file.</span>

<span class="sd">        Args:</span>
<span class="sd">            id_list: a list of record ids.</span>
<span class="sd">            record_list: a list of records.</span>
<span class="sd">            lock_flag (int, optional): 0 (default), LOCK_RETAIN, LOCK_WAIT, or LOCK_RETAIN + LOCK_WAIT</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple: a tuple consisting of four lists: 1. response code list, 2. status code list, 3. record id list,</span>
<span class="sd">                    4. record list.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">id_list</span><span class="p">,</span> <span class="n">record_list</span><span class="p">,</span> <span class="n">lock_flag</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>

        <span class="n">id_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">id_list</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
        <span class="n">record_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">record_list</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_WRITESET</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">_map_write_lock_flag</span><span class="p">(</span><span class="n">lock_flag</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">id_set</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">record_set</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="n">resp_code_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="n">status_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="n">result_set</span> <span class="o">=</span> <span class="p">(</span><span class="n">resp_code_set</span><span class="o">.</span><span class="n">list</span><span class="p">,</span> <span class="n">status_set</span><span class="o">.</span><span class="n">list</span><span class="p">,</span> <span class="n">id_set</span><span class="o">.</span><span class="n">list</span><span class="p">,</span> <span class="n">record_set</span><span class="o">.</span><span class="n">list</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">result_set</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result_set</span>
</pre></div>

        </details>

            <div class="docstring"><p>Write multiple records into the file.</p>

<p>Args:
    id_list: a list of record ids.
    record_list: a list of records.
    lock_flag (int, optional): 0 (default), LOCK_RETAIN, LOCK_WAIT, or LOCK_RETAIN + LOCK_WAIT</p>

<p>Returns:
    tuple: a tuple consisting of four lists: 1. response code list, 2. status code list, 3. record id list,
            4. record list.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="File.fileInfoEx" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#File.fileInfoEx">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">fileInfoEx</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">fileInfoEx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Get information about the specified files configuration, such as the</span>
<span class="sd">        files parameters, its modulus and load, its operating system file name, and its VOC name.</span>
<span class="sd">        The information returned depends on the file type and the value of the key.</span>

<span class="sd">        After calling the method fileInfoEx, you can access these attributes to get their values.</span>
<span class="sd">        isFileVar: 1 if file.variable is a valid file variable; 0 otherwise.</span>
<span class="sd">        vocName: VOC name of the file.</span>
<span class="sd">        pathName: Path name of the file.</span>
<span class="sd">        type: File type: 1 Static hashed | 3 Dynamic hashed | 4 Type 1 | 5 Sequential | 7 Distributed and Multivolume</span>
<span class="sd">        hashAlg: Hashing algorithm: 2 for GENERAL, 3 for SEQ.NUM.</span>
<span class="sd">        modulus: Current modulus.</span>
<span class="sd">        minModulus: Minimum modulus.</span>
<span class="sd">        groupSize: Group size, in 1-KB units.</span>
<span class="sd">        largeRecordSize: Large record size.</span>
<span class="sd">        mergeLoad: Merge load parameter.</span>
<span class="sd">        splitLoad: Split load parameter.</span>
<span class="sd">        currentLoad: Current loading of the file (%).</span>
<span class="sd">        nodeName: Empty string if the file resides on the local system. Otherwise, the name of the node where the file resides.</span>
<span class="sd">        isAKFile: 1 if secondary indexes exist on the file; 0 otherwise.</span>
<span class="sd">        currentLine: Current line number.</span>
<span class="sd">        partNum: For a distributed file, returns the list of currently open part numbers.</span>
<span class="sd">        fileStatus: For a distributed file, returns the list of status codes indicating whether the last I/O operation succeeded</span>
<span class="sd">                    or failed for each part. A value of 1 indicates the corresponding part file is not open.</span>
<span class="sd">        recoveryType: 1 if the file is marked as recoverable, 0 if it is not. Returns an empty string</span>
<span class="sd">                      if recovery is not supported on the file type (such as type 1 and type 19 files).</span>
<span class="sd">        recoveryId: Always returns an empty string.</span>
<span class="sd">        isFixedModulus: Always returns 0.</span>
<span class="sd">        nlsmap: If NLS is enabled, the file map name; otherwise an empty string.</span>
<span class="sd">                If the map name is the default specified in the uvconfig file, the returned string is the map name followed by the name of the configurable parameter in parentheses.</span>
<span class="sd">        encryption: Returns a dynamic array containing the following information:</span>
<span class="sd">                     For a file encrypted with the WHOLERECORD option:</span>
<span class="sd">                    -1@VM@VM</span>
<span class="sd">                     For a file encrypted at the field level:</span>
<span class="sd">                    @VM@VM</span>
<span class="sd">                    @VM[@FM</span>
<span class="sd">                    ...@VM]</span>
<span class="sd">                     Returns an empty string if the file is not encrypted.</span>
<span class="sd">        repStatus: Return values can be:</span>
<span class="sd">                    0  The file is not published, subscribed, or subwriteable.</span>
<span class="sd">                    1  The file is being published.</span>
<span class="sd">                    2  The file is being subscribed.</span>
<span class="sd">                    3  The file is subwriteable.</span>
<span class="sd">                    Note: If U2 Data Replication is not running, this function</span>
<span class="sd">                    returns 0 for any file used with this function.</span>

<span class="sd">        Args: void</span>

<span class="sd">        Returns: void</span>

<span class="sd">        Raise:</span>
<span class="sd">            UOError</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; f = uopy.File(&#39;TEST&#39;)</span>
<span class="sd">            &gt;&gt;&gt; f.fileInfoEx()</span>
<span class="sd">            &gt;&gt;&gt; print(f.vocName)</span>
<span class="sd">            &gt;&gt;&gt; print(f.pathName)</span>
<span class="sd">            &gt;&gt;&gt; print(f.groupSize)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter fileInfoEx&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_opened</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_FILEINFOEx</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_USC</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;fileInfoEx is not supported on versions prior to UniData 8.2.4 or prior to UniVerse 12.2.1.&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

            <span class="n">fileinfo_set</span> <span class="o">=</span> <span class="n">RecordSet</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fileinfo_set</span><span class="o">.</span><span class="n">list</span><span class="p">)</span> <span class="o">!=</span> <span class="n">FileInfoEx</span><span class="o">.</span><span class="n">LIST_COUNT</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">isFileVar</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vocName</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pathName</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">hashAlg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">modulus</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">minModulus</span><span class="p">,</span> \
        <span class="bp">self</span><span class="o">.</span><span class="n">groupSize</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">largeRecordSize</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mergeLoad</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">splitLoad</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentLoad</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodeName</span><span class="p">,</span> \
        <span class="bp">self</span><span class="o">.</span><span class="n">isAKFile</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentLine</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">partNum</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fileStatus</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">recoveryType</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">recoveryId</span><span class="p">,</span> \
        <span class="bp">self</span><span class="o">.</span><span class="n">isFixedModulus</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nlsmap</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">encryption</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">repStatus</span> <span class="o">=</span> <span class="n">fileinfo_set</span><span class="o">.</span><span class="n">list</span>

        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        self.isFileVar = fileinfo_set.list[FileInfoEx.IS_FILEVAR]</span>
<span class="sd">        self.vocName = fileinfo_set.list[FileInfoEx.VOCNAME]</span>
<span class="sd">        self.pathName = fileinfo_set.list[FileInfoEx.PATHNAME]</span>
<span class="sd">        self.type = fileinfo_set.list[FileInfoEx.TYPE]</span>
<span class="sd">        self.hashAlg = fileinfo_set.list[FileInfoEx.HASHALG]</span>
<span class="sd">        self.modulus = fileinfo_set.list[FileInfoEx.MODULUS]</span>
<span class="sd">        self.minModulus = fileinfo_set.list[FileInfoEx.MINMODULUS]</span>
<span class="sd">        self.groupSize = fileinfo_set.list[FileInfoEx.GROUPSIZE]</span>
<span class="sd">        self.largeRecordSize = fileinfo_set.list[FileInfoEx.LARGERECORDSIZE]</span>
<span class="sd">        self.mergeLoad = fileinfo_set.list[FileInfoEx.MERGELOAD]</span>
<span class="sd">        self.splitLoad = fileinfo_set.list[FileInfoEx.SPLITLOAD]</span>
<span class="sd">        self.currentLoad = fileinfo_set.list[FileInfoEx.CURRENTLOAD]</span>
<span class="sd">        self.nodeName = fileinfo_set.list[FileInfoEx.NODENAME]</span>
<span class="sd">        self.isAKFile = fileinfo_set.list[FileInfoEx.IS_AKFILE]</span>
<span class="sd">        self.currentLine = fileinfo_set.list[FileInfoEx.CURRENTLINE]</span>
<span class="sd">        self.partNum = fileinfo_set.list[FileInfoEx.PARTNUM]</span>
<span class="sd">        self.fileStatus = fileinfo_set.list[FileInfoEx.STATUS]</span>
<span class="sd">        self.recoveryType = fileinfo_set.list[FileInfoEx.RECOVERYTYPE]</span>
<span class="sd">        self.recoveryId = fileinfo_set.list[FileInfoEx.RECOVERYID]</span>
<span class="sd">        self.isFixedModulus = fileinfo_set.list[FileInfoEx.IS_FIXED_MODULUS]</span>
<span class="sd">        self.nlsmap = fileinfo_set.list[FileInfoEx.NLSMAP]</span>
<span class="sd">        self.encryption = fileinfo_set.list[FileInfoEx.ENCRYPTION]</span>
<span class="sd">        self.repStatus = fileinfo_set.list[FileInfoEx.REPSTATUS]</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">fileinfo_set</span><span class="p">)</span>
        <span class="k">pass</span>
</pre></div>

        </details>

            <div class="docstring"><p>Get information about the specified files configuration, such as the
files parameters, its modulus and load, its operating system file name, and its VOC name.
The information returned depends on the file type and the value of the key.</p>

<p>After calling the method fileInfoEx, you can access these attributes to get their values.
isFileVar: 1 if file.variable is a valid file variable; 0 otherwise.
vocName: VOC name of the file.
pathName: Path name of the file.
type: File type: 1 Static hashed | 3 Dynamic hashed | 4 Type 1 | 5 Sequential | 7 Distributed and Multivolume
hashAlg: Hashing algorithm: 2 for GENERAL, 3 for SEQ.NUM.
modulus: Current modulus.
minModulus: Minimum modulus.
groupSize: Group size, in 1-KB units.
largeRecordSize: Large record size.
mergeLoad: Merge load parameter.
splitLoad: Split load parameter.
currentLoad: Current loading of the file (%).
nodeName: Empty string if the file resides on the local system. Otherwise, the name of the node where the file resides.
isAKFile: 1 if secondary indexes exist on the file; 0 otherwise.
currentLine: Current line number.
partNum: For a distributed file, returns the list of currently open part numbers.
fileStatus: For a distributed file, returns the list of status codes indicating whether the last I/O operation succeeded
            or failed for each part. A value of 1 indicates the corresponding part file is not open.
recoveryType: 1 if the file is marked as recoverable, 0 if it is not. Returns an empty string
              if recovery is not supported on the file type (such as type 1 and type 19 files).
recoveryId: Always returns an empty string.
isFixedModulus: Always returns 0.
nlsmap: If NLS is enabled, the file map name; otherwise an empty string.
        If the map name is the default specified in the uvconfig file, the returned string is the map name followed by the name of the configurable parameter in parentheses.
encryption: Returns a dynamic array containing the following information:
             For a file encrypted with the WHOLERECORD option:
            -1@VM@VM
             For a file encrypted at the field level:
            @VM@VM
            @VM[@FM
            ...@VM]
             Returns an empty string if the file is not encrypted.
repStatus: Return values can be:
            0  The file is not published, subscribed, or subwriteable.
            1  The file is being published.
            2  The file is being subscribed.
            3  The file is subwriteable.
            Note: If U2 Data Replication is not running, this function
            returns 0 for any file used with this function.</p>

<p>Args: void</p>

<p>Returns: void</p>

<p>Raise:
    UOError</p>

<p>Examples:</p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>f = <a href="#File">uopy.File</a>('TEST')
      f.fileInfoEx()
      print(f.vocName)
      print(f.pathName)
      print(f.groupSize)</p>
    </blockquote>
  </blockquote>
</blockquote>
</div>


                            </div>
                </section>
                <section id="SequentialFile">
                                <div class="attr class">
        <a class="headerlink" href="#SequentialFile">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">SequentialFile</span><wbr>(<span class="base">uopy._uniobject.UniObject</span>):
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span><span class="k">class</span> <span class="nc">SequentialFile</span><span class="p">(</span><span class="n">UniObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;SequentialFile is used to define and manage MV Sequential Files (which are OS files).</span>

<span class="sd">    SequentialFile can be used in the Python with statement so that whatever occurs in the with statement block,</span>
<span class="sd">    they are guaranteed to be closed upon exit.</span>

<span class="sd">    Examples:</span>
<span class="sd">          &gt;&gt;&gt; with SequentialFile(&quot;BP&quot;, &quot;TEST_SEQ&quot;, True) as seq_file:</span>
<span class="sd">          &gt;&gt;&gt;   seq_file.write_line(&quot;This is test line 1&quot;)</span>
<span class="sd">          &gt;&gt;&gt;   seq_file.write_line(&quot;This is test line 2&quot;)</span>
<span class="sd">          &gt;&gt;&gt;   seq_file.seek(0) # go to the beginning of the file</span>
<span class="sd">          &gt;&gt;&gt;   seq_file.write_line(&quot;This is test line 0&quot;) # overwrite the first line</span>
<span class="sd">          &gt;&gt;&gt;   seq_file.seek(0)</span>
<span class="sd">          &gt;&gt;&gt;   seq_file.read_line()</span>
<span class="sd">          This is test line 0</span>
<span class="sd">          &gt;&gt;&gt;   seq_file.read_line()</span>
<span class="sd">          This is test line 2</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">create_flag</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initializes a SequentialFile object.</span>

<span class="sd">        Args:</span>
<span class="sd">            file_name (str): the directory file name.</span>
<span class="sd">            record_id (str): the sequential file name.</span>
<span class="sd">            create_flag (boolean, optional): when False (default), do not create the file if nonexistent;</span>
<span class="sd">                otherwise, create the file if nonexistent.</span>
<span class="sd">            session (Session, optional): the Session object that the SequentialFile object is bound to.</span>
<span class="sd">                If omitted, the last opened Session in the current thread will be used.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">            </span>
<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>
<span class="sd">            </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_seq_record_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">record_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_opened</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_seq_timeout</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_handle</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_block_size</span> <span class="o">=</span> <span class="n">_DEFAULT_BLOCK_SIZE</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_read_all</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">create_flag</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_seq_create_flag</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_seq_create_flag</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_opened</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exec_type</span><span class="p">,</span> <span class="n">exec_value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">format_string</span> <span class="o">=</span> <span class="s2">&quot;&lt;</span><span class="si">{}</span><span class="s2"> object </span><span class="si">{}</span><span class="s2"> at 0x</span><span class="si">{:016X}</span><span class="s2">&gt;&quot;</span>
        <span class="n">details</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;dir&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_name</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_record_id</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">format_string</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">SequentialFile</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span> <span class="n">SequentialFile</span><span class="o">.</span><span class="vm">__qualname__</span><span class="p">]),</span> <span class="n">details</span><span class="p">,</span>
                                    <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;int: The status code set by the remote server after a sequential file operation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">block_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;int: The block size for read_block(). The default value is 8192.</span>

<span class="sd">        If left unset, read_block() will read the whole file back.</span>
<span class="sd">        If set explicitly, it will be the maximum size of the data read_block() returns.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_block_size</span>

    <span class="nd">@block_size</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">block_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s1">&#39;read buffer size must be an integer!&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s1">&#39;read buffer size must between greater than 0!&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_block_size</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_read_all</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;int: the timeout for sequential file operations.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_timeout</span>

    <span class="nd">@timeout</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_timeout</span><span class="p">):</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_TIMEOUT</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">new_timeout</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_seq_timeout</span> <span class="o">=</span> <span class="n">new_timeout</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Open the server-side file, creating it if the create_flag is True and the file doesn&#39;t exist.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_record_id</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_opened</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_OPENSEQ</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_name</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_seq_record_id</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_create_flag</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_name</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_is_opened</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_handle</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Close an opened sequential file.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_record_id</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_opened</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_CLOSESEQ</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_handle</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">seek</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">relative_pos</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Move the file pointer within the Sequential File by an offset position specified in bytes.</span>

<span class="sd">        Args:</span>
<span class="sd">            offset (int): specifies the number of bytes before or after relative_pos.</span>
<span class="sd">                    A negative value moves the pointer to a position before aRelPos.</span>
<span class="sd">            relative_pos (int): specifies the relative position within a file from which to seek. Default value is 0.</span>
<span class="sd">                    0 (default) start from the beginning of the file.</span>
<span class="sd">                    1 start from the current position.</span>
<span class="sd">                    2 start from the end of the file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">relative_pos</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">relative_pos</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="n">_SEQ_FILE_START</span><span class="p">,</span> <span class="n">_SEQ_FILE_CURR</span><span class="p">,</span> <span class="n">_SEQ_FILE_END</span><span class="p">}:</span>
            <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_EINVAL</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>

            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_SEEK</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">relative_pos</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">write_eof</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write an EOF marker to the sequential file.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Enter&#39;</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_WEOFSEQ</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_handle</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">write_block</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">blk_data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write the given block to the sequential file at the location currently set.</span>

<span class="sd">        Args:</span>
<span class="sd">            blk_data (any): The data to write - can be str, bytes or DynArray.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Enter&#39;</span><span class="p">,</span> <span class="n">blk_data</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_WRITEBLK</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">blk_data</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">write_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line_data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write the given line to the sequential file at the location currently set.</span>

<span class="sd">        Args:</span>
<span class="sd">            line_data (any): The data to write - can be str, bytes or DynArray.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Enter&#39;</span><span class="p">,</span> <span class="n">line_data</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_WRITESEQ</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">line_data</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

            <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">read_line</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reads a line of data from the sequential file.</span>

<span class="sd">        The lines must be delimited with a newline character.</span>

<span class="sd">        status property will return one of the following values:</span>
<span class="sd">        -1    The file is not open for reading.</span>
<span class="sd">        0        The read was successful.</span>
<span class="sd">        1        The end of file was reached.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: the line of data read.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Enter&#39;</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>

            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_READSEQ</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_handle</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">line_</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">line_</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">line_</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">read_block</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Reads a block of data from the sequential file.</span>

<span class="sd">        Upon completion, the status property will return one of the following values:</span>
<span class="sd">        -1    The file is not open for reading.</span>
<span class="sd">        0     The read was successful.</span>
<span class="sd">        1     The end of file was reached.</span>

<span class="sd">        Args:</span>
<span class="sd"> </span>
<span class="sd">        Returns:</span>
<span class="sd">            bytes: the data block read.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>

            <span class="n">bytes_buf</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span>

            <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
                <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

                <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_READBLK</span><span class="p">)</span>
                <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_handle</span><span class="p">)</span>
                <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_block_size</span><span class="p">)</span>

                <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">bytes_buf</span> <span class="o">+=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_read_all</span><span class="p">:</span>
                        <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

            <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">bytes_buf</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">bytes_buf</span>
</pre></div>

        </details>

            <div class="docstring"><p>SequentialFile is used to define and manage MV Sequential Files (which are OS files).</p>

<p>SequentialFile can be used in the Python with statement so that whatever occurs in the with statement block,
they are guaranteed to be closed upon exit.</p>

<p>Examples:</p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>with SequentialFile("BP", "TEST_SEQ", True) as seq_file:
        seq_file.write_line("This is test line 1")
        seq_file.write_line("This is test line 2")
        seq_file.seek(0) # go to the beginning of the file
        seq_file.write_line("This is test line 0") # overwrite the first line
        seq_file.seek(0)
        seq_file.read_line()
            This is test line 0
        seq_file.read_line()
            This is test line 2</p>
    </blockquote>
  </blockquote>
</blockquote>
</div>


                            <div id="SequentialFile.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SequentialFile.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">SequentialFile</span><span class="signature">(file_name, record_id, create_flag=False, session=None)</span>
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">create_flag</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initializes a SequentialFile object.</span>

<span class="sd">        Args:</span>
<span class="sd">            file_name (str): the directory file name.</span>
<span class="sd">            record_id (str): the sequential file name.</span>
<span class="sd">            create_flag (boolean, optional): when False (default), do not create the file if nonexistent;</span>
<span class="sd">                otherwise, create the file if nonexistent.</span>
<span class="sd">            session (Session, optional): the Session object that the SequentialFile object is bound to.</span>
<span class="sd">                If omitted, the last opened Session in the current thread will be used.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">            </span>
<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>
<span class="sd">            </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_seq_record_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">record_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_opened</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_seq_timeout</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_handle</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_block_size</span> <span class="o">=</span> <span class="n">_DEFAULT_BLOCK_SIZE</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_read_all</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">create_flag</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_seq_create_flag</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_seq_create_flag</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Initializes a SequentialFile object.</p>

<p>Args:
    file_name (str): the directory file name.
    record_id (str): the sequential file name.
    create_flag (boolean, optional): when False (default), do not create the file if nonexistent;
        otherwise, create the file if nonexistent.
    session (Session, optional): the Session object that the SequentialFile object is bound to.
        If omitted, the last opened Session in the current thread will be used.</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="SequentialFile.status" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SequentialFile.status">#&nbsp;&nbsp</a>

        <span class="name">status</span>
    </div>

    
            <div class="docstring"><p>int: The status code set by the remote server after a sequential file operation.</p>
</div>


                            </div>
                            <div id="SequentialFile.block_size" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SequentialFile.block_size">#&nbsp;&nbsp</a>

        <span class="name">block_size</span>
    </div>

    
            <div class="docstring"><p>int: The block size for read_block(). The default value is 8192.</p>

<p>If left unset, read_block() will read the whole file back.
If set explicitly, it will be the maximum size of the data read_block() returns.</p>
</div>


                            </div>
                            <div id="SequentialFile.timeout" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SequentialFile.timeout">#&nbsp;&nbsp</a>

        <span class="name">timeout</span>
    </div>

    
            <div class="docstring"><p>int: the timeout for sequential file operations.</p>
</div>


                            </div>
                            <div id="SequentialFile.open" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SequentialFile.open">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">open</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Open the server-side file, creating it if the create_flag is True and the file doesn&#39;t exist.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_record_id</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_opened</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_OPENSEQ</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_name</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_seq_record_id</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_create_flag</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_name</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_is_opened</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_handle</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Open the server-side file, creating it if the create_flag is True and the file doesn't exist.</p>

<p>Args:</p>

<p>Returns:</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="SequentialFile.close" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SequentialFile.close">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">close</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Close an opened sequential file.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_record_id</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_opened</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_CLOSESEQ</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_handle</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Close an opened sequential file.</p>

<p>Args:</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="SequentialFile.seek" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SequentialFile.seek">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">seek</span><span class="signature">(self, offset, relative_pos=0)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">seek</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">relative_pos</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Move the file pointer within the Sequential File by an offset position specified in bytes.</span>

<span class="sd">        Args:</span>
<span class="sd">            offset (int): specifies the number of bytes before or after relative_pos.</span>
<span class="sd">                    A negative value moves the pointer to a position before aRelPos.</span>
<span class="sd">            relative_pos (int): specifies the relative position within a file from which to seek. Default value is 0.</span>
<span class="sd">                    0 (default) start from the beginning of the file.</span>
<span class="sd">                    1 start from the current position.</span>
<span class="sd">                    2 start from the end of the file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">relative_pos</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">relative_pos</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="n">_SEQ_FILE_START</span><span class="p">,</span> <span class="n">_SEQ_FILE_CURR</span><span class="p">,</span> <span class="n">_SEQ_FILE_END</span><span class="p">}:</span>
            <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_EINVAL</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>

            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_SEEK</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">relative_pos</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Move the file pointer within the Sequential File by an offset position specified in bytes.</p>

<p>Args:
    offset (int): specifies the number of bytes before or after relative_pos.
            A negative value moves the pointer to a position before aRelPos.
    relative_pos (int): specifies the relative position within a file from which to seek. Default value is 0.
            0 (default) start from the beginning of the file.
            1 start from the current position.
            2 start from the end of the file.</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="SequentialFile.write_eof" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SequentialFile.write_eof">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">write_eof</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">write_eof</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write an EOF marker to the sequential file.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Enter&#39;</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_WEOFSEQ</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_handle</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Write an EOF marker to the sequential file.</p>

<p>Args:</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="SequentialFile.write_block" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SequentialFile.write_block">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">write_block</span><span class="signature">(self, blk_data)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">write_block</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">blk_data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write the given block to the sequential file at the location currently set.</span>

<span class="sd">        Args:</span>
<span class="sd">            blk_data (any): The data to write - can be str, bytes or DynArray.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Enter&#39;</span><span class="p">,</span> <span class="n">blk_data</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_WRITEBLK</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">blk_data</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Write the given block to the sequential file at the location currently set.</p>

<p>Args:
    blk_data (any): The data to write - can be str, bytes or DynArray.</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="SequentialFile.write_line" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SequentialFile.write_line">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">write_line</span><span class="signature">(self, line_data)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">write_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line_data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write the given line to the sequential file at the location currently set.</span>

<span class="sd">        Args:</span>
<span class="sd">            line_data (any): The data to write - can be str, bytes or DynArray.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Enter&#39;</span><span class="p">,</span> <span class="n">line_data</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_WRITESEQ</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">line_data</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

            <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Write the given line to the sequential file at the location currently set.</p>

<p>Args:
    line_data (any): The data to write - can be str, bytes or DynArray.</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="SequentialFile.read_line" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SequentialFile.read_line">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">read_line</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">read_line</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reads a line of data from the sequential file.</span>

<span class="sd">        The lines must be delimited with a newline character.</span>

<span class="sd">        status property will return one of the following values:</span>
<span class="sd">        -1    The file is not open for reading.</span>
<span class="sd">        0        The read was successful.</span>
<span class="sd">        1        The end of file was reached.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: the line of data read.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Enter&#39;</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>

            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_READSEQ</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_handle</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">line_</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">line_</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">line_</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Reads a line of data from the sequential file.</p>

<p>The lines must be delimited with a newline character.</p>

<p>status property will return one of the following values:
-1    The file is not open for reading.
0        The read was successful.
1        The end of file was reached.</p>

<p>Args:</p>

<p>Returns:
    str: the line of data read.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="SequentialFile.read_block" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SequentialFile.read_block">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">read_block</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">read_block</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Reads a block of data from the sequential file.</span>

<span class="sd">        Upon completion, the status property will return one of the following values:</span>
<span class="sd">        -1    The file is not open for reading.</span>
<span class="sd">        0     The read was successful.</span>
<span class="sd">        1     The end of file was reached.</span>

<span class="sd">        Args:</span>
<span class="sd"> </span>
<span class="sd">        Returns:</span>
<span class="sd">            bytes: the data block read.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>

            <span class="n">bytes_buf</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span>

            <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
                <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

                <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_READBLK</span><span class="p">)</span>
                <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_file_handle</span><span class="p">)</span>
                <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_block_size</span><span class="p">)</span>

                <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">bytes_buf</span> <span class="o">+=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_read_all</span><span class="p">:</span>
                        <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

            <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">bytes_buf</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">bytes_buf</span>
</pre></div>

        </details>

            <div class="docstring"><p>Reads a block of data from the sequential file.</p>

<p>Upon completion, the status property will return one of the following values:
-1    The file is not open for reading.
0     The read was successful.
1     The end of file was reached.</p>

<p>Args:</p>

<p>Returns:
    bytes: the data block read.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                </section>
                <section id="Dictionary">
                                <div class="attr class">
        <a class="headerlink" href="#Dictionary">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">Dictionary</span><wbr>(<span class="base"><a href="#File">uopy.File</a></span>):
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Dictionary</span><span class="p">(</span><span class="n">File</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Dictionary provides convenient access to MV dictionary files.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialize a Dictionary object.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): the name of the MV file to be opened.</span>
<span class="sd">            session (Session, optional): the Session object that the Dictionary object is bound to.</span>
<span class="sd">                If omitted, the last opened Session in the current thread will be used.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">session</span><span class="p">)</span>  <span class="c1"># 1 is for dictionary</span>

    <span class="k">def</span> <span class="nf">get_assoc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the ASSOC field of the dictionary record.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            record_id (str or DynArray): the record id of the dictionary file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the value of the ASSOC field.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_ASSOC_INDEX</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_assoc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">assoc</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the ASSOC field of the dictionary record.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            record_id (str or DynArray): the record id of the dictionary file.</span>
<span class="sd">            assoc (str or DynArray): the value of the ASSOC field.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_ASSOC_INDEX</span><span class="p">,</span> <span class="n">assoc</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_conv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the CONV field of the dictionary record.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            record_id (str or DynArray): the record id of the dictionary file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the value of the CONV field.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_CONV_INDEX</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_conv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">conv_code</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the CONV field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">             record_id (str or DynArray): the record id of the dictionary file.</span>
<span class="sd">             conv_code (str or DynArray): the value of the CONV field.</span>

<span class="sd">        Returns:</span>
<span class="sd">             None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_CONV_INDEX</span><span class="p">,</span> <span class="n">conv_code</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the FORMAT field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (str or DynArray): the record id of the dictionary file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the value of the FORMAT field.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_FORMAT_INDEX</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">format_code</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the FORMAT field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">             record_id (str or DynArray): the record id of the dictionary file.</span>
<span class="sd">             format_code (str or DynArray): the value of the FORMAT field.</span>

<span class="sd">        Returns:</span>
<span class="sd">             None</span>

<span class="sd">        Raises:</span>
<span class="sd">             UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_FORMAT_INDEX</span><span class="p">,</span> <span class="n">format_code</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_loc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the LOC field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (str or DynArray): the record id of the dictionary file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the value of the LOC field.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_LOC_INDEX</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_loc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">loc</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the LOC field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">             record_id (str or DynArray): the record id of the dictionary file.</span>
<span class="sd">             loc (str or DynArray): the value of the LOC field.</span>

<span class="sd">        Returns:</span>
<span class="sd">             None</span>

<span class="sd">        Raises:</span>
<span class="sd">             UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_LOC_INDEX</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the NAME field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (str or DynArray): the record id of the dictionary file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the value of the NAME field.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_NAME_INDEX</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the NAME field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">             record_id (str or DynArray): the record id of the dictionary file.</span>
<span class="sd">             name (str or DynArray): the value of the NAME field.</span>

<span class="sd">        Returns:</span>
<span class="sd">             None</span>

<span class="sd">        Raises:</span>
<span class="sd">             UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_NAME_INDEX</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_sm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the SM field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (str or DynArray): the record id of the dictionary file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the value of the SM field.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_SM_INDEX</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_sm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">sm</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the SM field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">             record_id (str or DynArray): the record id of the dictionary file.</span>
<span class="sd">             sm (str or DynArray): the value of the SM field.</span>

<span class="sd">        Returns:</span>
<span class="sd">             None</span>

<span class="sd">        Raises:</span>
<span class="sd">             UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_SM_INDEX</span><span class="p">,</span> <span class="n">sm</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_sql_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the SQLType field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (str or DynArray): the record id of the dictionary file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the value of the SQLType field.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_SQLTYPE_INDEX</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_sql_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">sql_type</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the SQLType field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">             record_id (str or DynArray): the record id of the dictionary file.</span>
<span class="sd">             sql_type (str or DynArray): the value of the SQLType field.</span>

<span class="sd">        Returns:</span>
<span class="sd">             None</span>

<span class="sd">        Raises:</span>
<span class="sd">             UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_SQLTYPE_INDEX</span><span class="p">,</span> <span class="n">sql_type</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the TYPE field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (str or DynArray): the record id of the dictionary file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the value of the TYPE field.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_TYPE_INDEX</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">field_type</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the TYPE field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">             record_id (str or DynArray): the record id of the dictionary file.</span>
<span class="sd">             field_type (str or DynArray): the value of the TYPE field.</span>

<span class="sd">        Returns:</span>
<span class="sd">             None</span>

<span class="sd">        Raises:</span>
<span class="sd">             UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_TYPE_INDEX</span><span class="p">,</span> <span class="n">field_type</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Dictionary provides convenient access to MV dictionary files.</p>
</div>


                            <div id="Dictionary.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Dictionary.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">Dictionary</span><span class="signature">(name, session=None)</span>
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialize a Dictionary object.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): the name of the MV file to be opened.</span>
<span class="sd">            session (Session, optional): the Session object that the Dictionary object is bound to.</span>
<span class="sd">                If omitted, the last opened Session in the current thread will be used.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">session</span><span class="p">)</span>  <span class="c1"># 1 is for dictionary</span>
</pre></div>

        </details>

            <div class="docstring"><p>Initialize a Dictionary object.</p>

<p>Args:
    name (str): the name of the MV file to be opened.
    session (Session, optional): the Session object that the Dictionary object is bound to.
        If omitted, the last opened Session in the current thread will be used.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="Dictionary.get_assoc" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Dictionary.get_assoc">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_assoc</span><span class="signature">(self, record_id)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_assoc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the ASSOC field of the dictionary record.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            record_id (str or DynArray): the record id of the dictionary file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the value of the ASSOC field.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_ASSOC_INDEX</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Return the ASSOC field of the dictionary record.</p>

<p>Args:
    record_id (str or DynArray): the record id of the dictionary file.</p>

<p>Returns:
    DynArray: the value of the ASSOC field.</p>

<p>Raises:
    UOError.</p>
</div>


                            </div>
                            <div id="Dictionary.set_assoc" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Dictionary.set_assoc">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_assoc</span><span class="signature">(self, record_id, assoc)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_assoc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">assoc</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the ASSOC field of the dictionary record.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            record_id (str or DynArray): the record id of the dictionary file.</span>
<span class="sd">            assoc (str or DynArray): the value of the ASSOC field.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_ASSOC_INDEX</span><span class="p">,</span> <span class="n">assoc</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Set the ASSOC field of the dictionary record.</p>

<p>Args:
    record_id (str or DynArray): the record id of the dictionary file.
    assoc (str or DynArray): the value of the ASSOC field.</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="Dictionary.get_conv" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Dictionary.get_conv">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_conv</span><span class="signature">(self, record_id)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_conv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the CONV field of the dictionary record.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            record_id (str or DynArray): the record id of the dictionary file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the value of the CONV field.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_CONV_INDEX</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Return the CONV field of the dictionary record.</p>

<p>Args:
    record_id (str or DynArray): the record id of the dictionary file.</p>

<p>Returns:
    DynArray: the value of the CONV field.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="Dictionary.set_conv" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Dictionary.set_conv">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_conv</span><span class="signature">(self, record_id, conv_code)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_conv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">conv_code</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the CONV field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">             record_id (str or DynArray): the record id of the dictionary file.</span>
<span class="sd">             conv_code (str or DynArray): the value of the CONV field.</span>

<span class="sd">        Returns:</span>
<span class="sd">             None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_CONV_INDEX</span><span class="p">,</span> <span class="n">conv_code</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Set the CONV field of the dictionary record.</p>

<p>Args:
     record_id (str or DynArray): the record id of the dictionary file.
     conv_code (str or DynArray): the value of the CONV field.</p>

<p>Returns:
     None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="Dictionary.get_format" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Dictionary.get_format">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_format</span><span class="signature">(self, record_id)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the FORMAT field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (str or DynArray): the record id of the dictionary file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the value of the FORMAT field.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_FORMAT_INDEX</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Return the FORMAT field of the dictionary record.</p>

<p>Args:
    record_id (str or DynArray): the record id of the dictionary file.</p>

<p>Returns:
    DynArray: the value of the FORMAT field.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="Dictionary.set_format" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Dictionary.set_format">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_format</span><span class="signature">(self, record_id, format_code)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">format_code</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the FORMAT field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">             record_id (str or DynArray): the record id of the dictionary file.</span>
<span class="sd">             format_code (str or DynArray): the value of the FORMAT field.</span>

<span class="sd">        Returns:</span>
<span class="sd">             None</span>

<span class="sd">        Raises:</span>
<span class="sd">             UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_FORMAT_INDEX</span><span class="p">,</span> <span class="n">format_code</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Set the FORMAT field of the dictionary record.</p>

<p>Args:
     record_id (str or DynArray): the record id of the dictionary file.
     format_code (str or DynArray): the value of the FORMAT field.</p>

<p>Returns:
     None</p>

<p>Raises:
     UOError</p>
</div>


                            </div>
                            <div id="Dictionary.get_loc" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Dictionary.get_loc">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_loc</span><span class="signature">(self, record_id)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_loc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the LOC field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (str or DynArray): the record id of the dictionary file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the value of the LOC field.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_LOC_INDEX</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Return the LOC field of the dictionary record.</p>

<p>Args:
    record_id (str or DynArray): the record id of the dictionary file.</p>

<p>Returns:
    DynArray: the value of the LOC field.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="Dictionary.set_loc" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Dictionary.set_loc">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_loc</span><span class="signature">(self, record_id, loc)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_loc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">loc</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the LOC field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">             record_id (str or DynArray): the record id of the dictionary file.</span>
<span class="sd">             loc (str or DynArray): the value of the LOC field.</span>

<span class="sd">        Returns:</span>
<span class="sd">             None</span>

<span class="sd">        Raises:</span>
<span class="sd">             UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_LOC_INDEX</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Set the LOC field of the dictionary record.</p>

<p>Args:
     record_id (str or DynArray): the record id of the dictionary file.
     loc (str or DynArray): the value of the LOC field.</p>

<p>Returns:
     None</p>

<p>Raises:
     UOError</p>
</div>


                            </div>
                            <div id="Dictionary.get_name" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Dictionary.get_name">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_name</span><span class="signature">(self, record_id)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the NAME field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (str or DynArray): the record id of the dictionary file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the value of the NAME field.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_NAME_INDEX</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Return the NAME field of the dictionary record.</p>

<p>Args:
    record_id (str or DynArray): the record id of the dictionary file.</p>

<p>Returns:
    DynArray: the value of the NAME field.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="Dictionary.set_name" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Dictionary.set_name">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_name</span><span class="signature">(self, record_id, name)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the NAME field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">             record_id (str or DynArray): the record id of the dictionary file.</span>
<span class="sd">             name (str or DynArray): the value of the NAME field.</span>

<span class="sd">        Returns:</span>
<span class="sd">             None</span>

<span class="sd">        Raises:</span>
<span class="sd">             UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_NAME_INDEX</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Set the NAME field of the dictionary record.</p>

<p>Args:
     record_id (str or DynArray): the record id of the dictionary file.
     name (str or DynArray): the value of the NAME field.</p>

<p>Returns:
     None</p>

<p>Raises:
     UOError</p>
</div>


                            </div>
                            <div id="Dictionary.get_sm" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Dictionary.get_sm">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_sm</span><span class="signature">(self, record_id)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_sm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the SM field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (str or DynArray): the record id of the dictionary file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the value of the SM field.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_SM_INDEX</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Return the SM field of the dictionary record.</p>

<p>Args:
    record_id (str or DynArray): the record id of the dictionary file.</p>

<p>Returns:
    DynArray: the value of the SM field.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="Dictionary.set_sm" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Dictionary.set_sm">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_sm</span><span class="signature">(self, record_id, sm)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_sm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">sm</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the SM field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">             record_id (str or DynArray): the record id of the dictionary file.</span>
<span class="sd">             sm (str or DynArray): the value of the SM field.</span>

<span class="sd">        Returns:</span>
<span class="sd">             None</span>

<span class="sd">        Raises:</span>
<span class="sd">             UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_SM_INDEX</span><span class="p">,</span> <span class="n">sm</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Set the SM field of the dictionary record.</p>

<p>Args:
     record_id (str or DynArray): the record id of the dictionary file.
     sm (str or DynArray): the value of the SM field.</p>

<p>Returns:
     None</p>

<p>Raises:
     UOError</p>
</div>


                            </div>
                            <div id="Dictionary.get_sql_type" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Dictionary.get_sql_type">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_sql_type</span><span class="signature">(self, record_id)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_sql_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the SQLType field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (str or DynArray): the record id of the dictionary file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the value of the SQLType field.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_SQLTYPE_INDEX</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Return the SQLType field of the dictionary record.</p>

<p>Args:
    record_id (str or DynArray): the record id of the dictionary file.</p>

<p>Returns:
    DynArray: the value of the SQLType field.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="Dictionary.set_sql_type" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Dictionary.set_sql_type">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_sql_type</span><span class="signature">(self, record_id, sql_type)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_sql_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">sql_type</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the SQLType field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">             record_id (str or DynArray): the record id of the dictionary file.</span>
<span class="sd">             sql_type (str or DynArray): the value of the SQLType field.</span>

<span class="sd">        Returns:</span>
<span class="sd">             None</span>

<span class="sd">        Raises:</span>
<span class="sd">             UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_SQLTYPE_INDEX</span><span class="p">,</span> <span class="n">sql_type</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Set the SQLType field of the dictionary record.</p>

<p>Args:
     record_id (str or DynArray): the record id of the dictionary file.
     sql_type (str or DynArray): the value of the SQLType field.</p>

<p>Returns:
     None</p>

<p>Raises:
     UOError</p>
</div>


                            </div>
                            <div id="Dictionary.get_type" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Dictionary.get_type">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_type</span><span class="signature">(self, record_id)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the TYPE field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">            record_id (str or DynArray): the record id of the dictionary file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: the value of the TYPE field.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_TYPE_INDEX</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Return the TYPE field of the dictionary record.</p>

<p>Args:
    record_id (str or DynArray): the record id of the dictionary file.</p>

<p>Returns:
    DynArray: the value of the TYPE field.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="Dictionary.set_type" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Dictionary.set_type">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_type</span><span class="signature">(self, record_id, field_type)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">field_type</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the TYPE field of the dictionary record.</span>

<span class="sd">        Args:</span>
<span class="sd">             record_id (str or DynArray): the record id of the dictionary file.</span>
<span class="sd">             field_type (str or DynArray): the value of the TYPE field.</span>

<span class="sd">        Returns:</span>
<span class="sd">             None</span>

<span class="sd">        Raises:</span>
<span class="sd">             UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_field</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="n">_DICT_TYPE_INDEX</span><span class="p">,</span> <span class="n">field_type</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Set the TYPE field of the dictionary record.</p>

<p>Args:
     record_id (str or DynArray): the record id of the dictionary file.
     field_type (str or DynArray): the value of the TYPE field.</p>

<p>Returns:
     None</p>

<p>Raises:
     UOError</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#File">File</a></dt>
                                <dd id="Dictionary.handle" class="variable"><a href="#File.handle">handle</a></dd>
                <dd id="Dictionary.status" class="variable"><a href="#File.status">status</a></dd>
                <dd id="Dictionary.is_opened" class="variable"><a href="#File.is_opened">is_opened</a></dd>
                <dd id="Dictionary.open" class="function"><a href="#File.open">open</a></dd>
                <dd id="Dictionary.clear" class="function"><a href="#File.clear">clear</a></dd>
                <dd id="Dictionary.close" class="function"><a href="#File.close">close</a></dd>
                <dd id="Dictionary.delete" class="function"><a href="#File.delete">delete</a></dd>
                <dd id="Dictionary.read" class="function"><a href="#File.read">read</a></dd>
                <dd id="Dictionary.write" class="function"><a href="#File.write">write</a></dd>
                <dd id="Dictionary.read_field" class="function"><a href="#File.read_field">read_field</a></dd>
                <dd id="Dictionary.write_field" class="function"><a href="#File.write_field">write_field</a></dd>
                <dd id="Dictionary.lock_file" class="function"><a href="#File.lock_file">lock_file</a></dd>
                <dd id="Dictionary.unlock_file" class="function"><a href="#File.unlock_file">unlock_file</a></dd>
                <dd id="Dictionary.lock" class="function"><a href="#File.lock">lock</a></dd>
                <dd id="Dictionary.unlock" class="function"><a href="#File.unlock">unlock</a></dd>
                <dd id="Dictionary.is_locked" class="function"><a href="#File.is_locked">is_locked</a></dd>
                <dd id="Dictionary.get_ak_info" class="function"><a href="#File.get_ak_info">get_ak_info</a></dd>
                <dd id="Dictionary.itype" class="function"><a href="#File.itype">itype</a></dd>
                <dd id="Dictionary.read_named_fields" class="function"><a href="#File.read_named_fields">read_named_fields</a></dd>
                <dd id="Dictionary.write_named_fields" class="function"><a href="#File.write_named_fields">write_named_fields</a></dd>
                <dd id="Dictionary.read_records" class="function"><a href="#File.read_records">read_records</a></dd>
                <dd id="Dictionary.write_records" class="function"><a href="#File.write_records">write_records</a></dd>
                <dd id="Dictionary.fileInfoEx" class="function"><a href="#File.fileInfoEx">fileInfoEx</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="List">
                                <div class="attr class">
        <a class="headerlink" href="#List">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">List</span><wbr>(<span class="base">uopy._uniobject.UniObject</span>):
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span><span class="k">class</span> <span class="nc">List</span><span class="p">(</span><span class="n">UniObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;List is used to control, access, and manipulate server side select lists.</span>

<span class="sd">    List is iterable - the iterator returns a DynArray object representing a record id.</span>
<span class="sd">    The iteration can be run only once until the select list is exhausted - subsequent iteration yields nothing.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; cmd = Command(&quot;SELECT VOC WITH F1 = &#39;V&#39;&quot;)</span>
<span class="sd">        &gt;&gt;&gt; cmd.run()</span>
<span class="sd">        &gt;&gt;&gt; select_list = List() # default is select list 0</span>
<span class="sd">        &gt;&gt;&gt; ids = select_list.read_list()</span>
<span class="sd">        &gt;&gt;&gt; print(ids[:5])</span>
<span class="sd">        [&#39;LOAD.LANG&#39;, &#39;BEGIN.WORK&#39;, &#39;CLEARSELECT&#39;, &#39;RELEASE.ITEMS&#39;, &#39;SET.WIDEZERO&#39;]</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">list_no</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">session</span><span class="p">:</span> <span class="n">Session</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initializes a new List object.</span>

<span class="sd">        Args:</span>
<span class="sd">            list_no (int, optional): select list number (default is 0).</span>
<span class="sd">            session (Session, optional): the Session object that the List object is bound to.</span>
<span class="sd">                If omitted, the last opened Session in the current thread will be used.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">list_no</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">list_no</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_EINVAL</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span> <span class="o">=</span> <span class="n">list_no</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_all_fetched</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">format_string</span> <span class="o">=</span> <span class="s2">&quot;&lt;</span><span class="si">{}</span><span class="s2"> object </span><span class="si">{}</span><span class="s2"> at 0x</span><span class="si">{:016X}</span><span class="s2">&gt;&quot;</span>
        <span class="n">details</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;list no&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">format_string</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">List</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span> <span class="n">List</span><span class="o">.</span><span class="vm">__qualname__</span><span class="p">]),</span> <span class="n">details</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">next_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_all_fetched</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">StopIteration</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">next_id</span>

    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">:</span> <span class="n">File</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Create a new select list by selecting the File object and generating a select list of</span>
<span class="sd">        all the record ids from that file. It will overwrite the previous select list and the select</span>
<span class="sd">        list pointer will be reset to the first record id in the list.</span>

<span class="sd">        Args:</span>
<span class="sd">            file_obj: File or Dictionary object to be selected.</span>

<span class="sd">        Returns:</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">file_obj</span><span class="o">.</span><span class="n">is_opened</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_FILE_NOT_OPEN</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_SELECT</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">file_obj</span><span class="o">.</span><span class="n">handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_is_all_fetched</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clear the selected list, emptying the contents and preparing for a new select list to be generated.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_CLEARSELECT</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_is_all_fetched</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the next record ID in the select list.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: The next record id in the select list, or None if exhausted.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_all_fetched</span><span class="p">:</span>
            <span class="n">next_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
                <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
                <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

                <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_READNEXT</span><span class="p">)</span>
                <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">)</span>

                <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="n">resp_code</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_is_all_fetched</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">next_id</span> <span class="o">=</span> <span class="n">DynArray</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_LRR</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_is_all_fetched</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">next_id</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">next_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">next_id</span>

    <span class="k">def</span> <span class="nf">read_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Read the entire select list back.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns: </span>
<span class="sd">            DynArray: contains all the record ids in the select list.</span>

<span class="sd">        Raises: </span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_READLIST</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_is_all_fetched</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ids</span> <span class="o">=</span> <span class="n">DynArray</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ids</span> <span class="o">=</span> <span class="n">DynArray</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_LRR</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_is_all_fetched</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">ids</span> <span class="o">=</span> <span class="n">DynArray</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">ids</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ids</span>

    <span class="k">def</span> <span class="nf">form_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ids</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new select list from the supplied list of record ids.</span>

<span class="sd">        The current select list number will be used as the new list number.</span>

<span class="sd">        Args:</span>
<span class="sd">            ids (DynArray or list): A list of record ids.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Enter&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">,</span> <span class="n">ids</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_FORMLIST</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">ids</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_is_all_fetched</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">select_alternate_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">:</span> <span class="n">File</span><span class="p">,</span> <span class="n">index_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Generate a select list from the given File based on the specified secondary index.</span>

<span class="sd">        Args:</span>
<span class="sd">            file_obj (File): a File or a Dictionary object.</span>
<span class="sd">            index_name (str): index name to select on.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_ak_select</span><span class="p">(</span><span class="n">file_obj</span><span class="p">,</span> <span class="n">index_name</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">select_matching_ak</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">:</span> <span class="n">File</span><span class="p">,</span> <span class="n">index_name</span><span class="p">,</span> <span class="n">index_value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Generate a select list from the given File based on the specified secondary index</span>
<span class="sd">        whose value matches that of the named value.</span>

<span class="sd">        Args:</span>
<span class="sd">            file_obj (File): a File or a Dictionary object.</span>
<span class="sd">            index_name (str): index name to select on.</span>
<span class="sd">            index_value (any): value within the index to select - can be str, bytes, DynArray.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">index_value_bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">index_value</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_ak_select</span><span class="p">(</span><span class="n">file_obj</span><span class="p">,</span> <span class="n">index_name</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">index_value_bytes</span><span class="p">),</span> <span class="n">index_value_bytes</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_do_ak_select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">,</span> <span class="n">index_name</span><span class="p">,</span> <span class="n">index_len</span><span class="p">,</span> <span class="n">index_value</span><span class="p">):</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">,</span> <span class="n">index_name</span><span class="p">,</span> <span class="n">index_len</span><span class="p">,</span> <span class="n">index_value</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">file_obj</span><span class="p">,</span> <span class="n">File</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_ENFILE</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">file_obj</span><span class="o">.</span><span class="n">is_opened</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_FILE_NOT_OPEN</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_SELECTINDEX</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">file_obj</span><span class="o">.</span><span class="n">handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">index_name</span><span class="p">))</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">index_len</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write_char_array</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">index_value</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

            <span class="n">status</span> <span class="o">=</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">_SELECT_LIST_EMPTY_STATE</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_is_all_fetched</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_is_all_fetched</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>
</pre></div>

        </details>

            <div class="docstring"><p>List is used to control, access, and manipulate server side select lists.</p>

<p>List is iterable - the iterator returns a DynArray object representing a record id.
The iteration can be run only once until the select list is exhausted - subsequent iteration yields nothing.</p>

<p>Examples:</p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>cmd = Command("SELECT VOC WITH F1 = 'V'")
      cmd.run()
      select_list = List() # default is select list 0
      ids = select_list.read_list()
      print(ids[:5])
          ['LOAD.LANG', 'BEGIN.WORK', 'CLEARSELECT', 'RELEASE.ITEMS', 'SET.WIDEZERO']</p>
    </blockquote>
  </blockquote>
</blockquote>
</div>


                            <div id="List.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#List.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">List</span><span class="signature">(list_no: int = 0, session: <a href="#Session">uopy.Session</a> = None)</span>
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">list_no</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">session</span><span class="p">:</span> <span class="n">Session</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initializes a new List object.</span>

<span class="sd">        Args:</span>
<span class="sd">            list_no (int, optional): select list number (default is 0).</span>
<span class="sd">            session (Session, optional): the Session object that the List object is bound to.</span>
<span class="sd">                If omitted, the last opened Session in the current thread will be used.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">list_no</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">list_no</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_EINVAL</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span> <span class="o">=</span> <span class="n">list_no</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_all_fetched</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>

        </details>

            <div class="docstring"><p>Initializes a new List object.</p>

<p>Args:
    list_no (int, optional): select list number (default is 0).
    session (Session, optional): the Session object that the List object is bound to.
        If omitted, the last opened Session in the current thread will be used.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="List.select" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#List.select">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">select</span><span class="signature">(self, file_obj: <a href="#File">uopy.File</a>)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">:</span> <span class="n">File</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Create a new select list by selecting the File object and generating a select list of</span>
<span class="sd">        all the record ids from that file. It will overwrite the previous select list and the select</span>
<span class="sd">        list pointer will be reset to the first record id in the list.</span>

<span class="sd">        Args:</span>
<span class="sd">            file_obj: File or Dictionary object to be selected.</span>

<span class="sd">        Returns:</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">file_obj</span><span class="o">.</span><span class="n">is_opened</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_FILE_NOT_OPEN</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_SELECT</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">file_obj</span><span class="o">.</span><span class="n">handle</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_is_all_fetched</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create a new select list by selecting the File object and generating a select list of
all the record ids from that file. It will overwrite the previous select list and the select
list pointer will be reset to the first record id in the list.</p>

<p>Args:
    file_obj: File or Dictionary object to be selected.</p>

<p>Returns:</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="List.clear" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#List.clear">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">clear</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clear the selected list, emptying the contents and preparing for a new select list to be generated.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_CLEARSELECT</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_is_all_fetched</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Clear the selected list, emptying the contents and preparing for a new select list to be generated.</p>

<p>Args:</p>

<p>Returns:</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="List.next" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#List.next">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">next</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the next record ID in the select list.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns:</span>
<span class="sd">            DynArray: The next record id in the select list, or None if exhausted.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_all_fetched</span><span class="p">:</span>
            <span class="n">next_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
                <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
                <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

                <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_READNEXT</span><span class="p">)</span>
                <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">)</span>

                <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="n">resp_code</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_is_all_fetched</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">next_id</span> <span class="o">=</span> <span class="n">DynArray</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_LRR</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_is_all_fetched</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">next_id</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">next_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">next_id</span>
</pre></div>

        </details>

            <div class="docstring"><p>Return the next record ID in the select list.</p>

<p>Args:</p>

<p>Returns:
    DynArray: The next record id in the select list, or None if exhausted.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="List.read_list" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#List.read_list">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">read_list</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">read_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Read the entire select list back.</span>

<span class="sd">        Args:</span>

<span class="sd">        Returns: </span>
<span class="sd">            DynArray: contains all the record ids in the select list.</span>

<span class="sd">        Raises: </span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_READLIST</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">)</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_is_all_fetched</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ids</span> <span class="o">=</span> <span class="n">DynArray</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ids</span> <span class="o">=</span> <span class="n">DynArray</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_LRR</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_is_all_fetched</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">ids</span> <span class="o">=</span> <span class="n">DynArray</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="n">ids</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ids</span>
</pre></div>

        </details>

            <div class="docstring"><p>Read the entire select list back.</p>

<p>Args:</p>

<p>Returns: 
    DynArray: contains all the record ids in the select list.</p>

<p>Raises: 
    UOError</p>
</div>


                            </div>
                            <div id="List.form_list" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#List.form_list">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">form_list</span><span class="signature">(self, ids)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">form_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ids</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new select list from the supplied list of record ids.</span>

<span class="sd">        The current select list number will be used as the new list number.</span>

<span class="sd">        Args:</span>
<span class="sd">            ids (DynArray or list): A list of record ids.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Enter&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">,</span> <span class="n">ids</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_FORMLIST</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_no</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">ids</span><span class="p">))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_is_all_fetched</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create a new select list from the supplied list of record ids.</p>

<p>The current select list number will be used as the new list number.</p>

<p>Args:
    ids (DynArray or list): A list of record ids.</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="List.select_alternate_key" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#List.select_alternate_key">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">select_alternate_key</span><span class="signature">(self, file_obj: <a href="#File">uopy.File</a>, index_name)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">select_alternate_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">:</span> <span class="n">File</span><span class="p">,</span> <span class="n">index_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Generate a select list from the given File based on the specified secondary index.</span>

<span class="sd">        Args:</span>
<span class="sd">            file_obj (File): a File or a Dictionary object.</span>
<span class="sd">            index_name (str): index name to select on.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_ak_select</span><span class="p">(</span><span class="n">file_obj</span><span class="p">,</span> <span class="n">index_name</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Generate a select list from the given File based on the specified secondary index.</p>

<p>Args:
    file_obj (File): a File or a Dictionary object.
    index_name (str): index name to select on.</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="List.select_matching_ak" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#List.select_matching_ak">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">select_matching_ak</span><span class="signature">(self, file_obj: <a href="#File">uopy.File</a>, index_name, index_value)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">select_matching_ak</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">:</span> <span class="n">File</span><span class="p">,</span> <span class="n">index_name</span><span class="p">,</span> <span class="n">index_value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Generate a select list from the given File based on the specified secondary index</span>
<span class="sd">        whose value matches that of the named value.</span>

<span class="sd">        Args:</span>
<span class="sd">            file_obj (File): a File or a Dictionary object.</span>
<span class="sd">            index_name (str): index name to select on.</span>
<span class="sd">            index_value (any): value within the index to select - can be str, bytes, DynArray.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">index_value_bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">index_value</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_ak_select</span><span class="p">(</span><span class="n">file_obj</span><span class="p">,</span> <span class="n">index_name</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">index_value_bytes</span><span class="p">),</span> <span class="n">index_value_bytes</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Generate a select list from the given File based on the specified secondary index
whose value matches that of the named value.</p>

<p>Args:
    file_obj (File): a File or a Dictionary object.
    index_name (str): index name to select on.
    index_value (any): value within the index to select - can be str, bytes, DynArray.</p>

<p>Returns:
    None</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                </section>
                <section id="Subroutine">
                                <div class="attr class">
        <a class="headerlink" href="#Subroutine">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">Subroutine</span><wbr>(<span class="base">uopy._uniobject.UniObject</span>):
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Subroutine</span><span class="p">(</span><span class="n">UniObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Subroutine allows the application to call a cataloged BASIC subroutine on the server.</span>

<span class="sd">    Arguments are used to both pass in data to and get back data from the cataloged subroutine.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        name (str): the name of the cataloged BASIC subroutine.</span>
<span class="sd">        num_args (int): the number of arguments defined on the cataloged subroutine.</span>
<span class="sd">        args (list): the argument list for the subroutine, an argument can be a str, a DynArray, a byte array.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; sub = Subroutine(&quot;SAYHELLOTO&quot;, 1)</span>
<span class="sd">        &gt;&gt;&gt; sub.args[0] = &quot;David&quot;</span>
<span class="sd">        &gt;&gt;&gt; print(sub.args)</span>
<span class="sd">        [&#39;David&#39;]</span>
<span class="sd">        &gt;&gt;&gt; sub.call()</span>
<span class="sd">        &gt;&gt;&gt; print(sub.args)</span>
<span class="sd">        [&#39;Hello, David&#39;]</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">num_args</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialize a Subroutine object</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): the name of the cataloged BASIC subroutine.</span>
<span class="sd">            num_args (int) : the number of arguments defined on the cataloged subroutine.</span>
<span class="sd">            session (Session, optional): the Session object that the Subroutine object is bound to.</span>
<span class="sd">                If omitted, the last opened Session in the current thread will be used.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_args</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_args</span><span class="p">)</span> <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_args</span><span class="p">)]</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">format_string</span> <span class="o">=</span> <span class="s2">&quot;&lt;</span><span class="si">{}</span><span class="s2"> object </span><span class="si">{}</span><span class="s2"> at 0x</span><span class="si">{:016X}</span><span class="s2">&gt;&quot;</span>
        <span class="n">cls_name</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__qualname__</span><span class="p">])</span>
        <span class="n">details</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_args</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">format_string</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">Subroutine</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span> <span class="n">Subroutine</span><span class="o">.</span><span class="vm">__qualname__</span><span class="p">]),</span> <span class="n">details</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">call</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Run the catalogued subroutine using the args on the remote server.&quot;&quot;&quot;</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_UNABLETOLOADSUB</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_SUBCALL</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_args</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_args</span> <span class="o">+</span> <span class="mi">3</span><span class="p">):</span>
                <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">3</span><span class="p">]))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_args</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">DynArray</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Subroutine allows the application to call a cataloged BASIC subroutine on the server.</p>

<p>Arguments are used to both pass in data to and get back data from the cataloged subroutine.</p>

<p>Attributes:
    name (str): the name of the cataloged BASIC subroutine.
    num_args (int): the number of arguments defined on the cataloged subroutine.
    args (list): the argument list for the subroutine, an argument can be a str, a DynArray, a byte array.</p>

<p>Examples:</p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>sub = Subroutine("SAYHELLOTO", 1)
      sub.args[0] = "David"
      print(sub.args)
          ['David']
      sub.call()
      print(sub.args)
          ['Hello, David']</p>
    </blockquote>
  </blockquote>
</blockquote>
</div>


                            <div id="Subroutine.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Subroutine.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">Subroutine</span><span class="signature">(name=&#39;&#39;, num_args=0, session=None)</span>
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">num_args</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialize a Subroutine object</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): the name of the cataloged BASIC subroutine.</span>
<span class="sd">            num_args (int) : the number of arguments defined on the cataloged subroutine.</span>
<span class="sd">            session (Session, optional): the Session object that the Subroutine object is bound to.</span>
<span class="sd">                If omitted, the last opened Session in the current thread will be used.</span>

<span class="sd">        Raises:</span>
<span class="sd">            UOError</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_args</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_args</span><span class="p">)</span> <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_args</span><span class="p">)]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Initialize a Subroutine object</p>

<p>Args:
    name (str): the name of the cataloged BASIC subroutine.
    num_args (int) : the number of arguments defined on the cataloged subroutine.
    session (Session, optional): the Session object that the Subroutine object is bound to.
        If omitted, the last opened Session in the current thread will be used.</p>

<p>Raises:
    UOError</p>
</div>


                            </div>
                            <div id="Subroutine.call" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Subroutine.call">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">call</span><span class="signature">(self)</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">call</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Run the catalogued subroutine using the args on the remote server.&quot;&quot;&quot;</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_UNABLETOLOADSUB</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="n">in_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>
            <span class="n">out_packet</span> <span class="o">=</span> <span class="n">UniRPCPacket</span><span class="p">()</span>

            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FuncCodes</span><span class="o">.</span><span class="n">EIC_SUBCALL</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_args</span><span class="p">)</span>
            <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_args</span> <span class="o">+</span> <span class="mi">3</span><span class="p">):</span>
                <span class="n">out_packet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">3</span><span class="p">]))</span>

            <span class="n">resp_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_server</span><span class="p">(</span><span class="n">in_packet</span><span class="p">,</span> <span class="n">out_packet</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UOError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">resp_code</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_args</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">DynArray</span><span class="p">(</span><span class="n">in_packet</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">)</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Run the catalogued subroutine using the args on the remote server.</p>
</div>


                            </div>
                </section>
                <section id="UOFileError">
                                <div class="attr class">
        <a class="headerlink" href="#UOFileError">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">UOFileError</span><wbr>(<span class="base"><a href="#UOError">uopy.UOError</a></span>):
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span><span class="k">class</span> <span class="nc">UOFileError</span><span class="p">(</span><span class="n">UOError</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    This class extends the UOError class.</span>
<span class="sd">    This class can provide each error information for each key read while invoking the uopy.File.read_named_fields method.</span>
<span class="sd">    </span>
<span class="sd">    Attributes:</span>
<span class="sd">    response_errors: a list of dictionaries.</span>
<span class="sd">    Each item in the list indicates the error information for each key read from the file.</span>
<span class="sd">    An example of the content in response_errors is [{0: &#39;No Error&#39;}, {30001: &#39;This Record was not found&#39;}].</span>

<span class="sd">    id_list: a list of the file keys.</span>
<span class="sd">    An example of the content in id_list is [&#39;0111&#39;, &#39;bad_id&#39;]</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="o">=...</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">response_codes</span><span class="o">=</span><span class="p">[],</span> <span class="n">status_codes</span><span class="o">=</span><span class="p">[],</span> <span class="n">id_list</span><span class="o">=</span><span class="p">[]):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Initializes a UOFileError class.</span>
<span class="sd">        Args:</span>
<span class="sd">            code (int): error code</span>
<span class="sd">            message (string, optinal): error message</span>
<span class="sd">            response_codes (list, optional): a list of response codes returned from the server.</span>
<span class="sd">            status_codes (list, optional): a list of status codes returned from the server.</span>
<span class="sd">            id_list (list, optional): a list of file fields.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_response_codes</span><span class="p">(</span><span class="n">response_codes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_status_codes</span><span class="p">(</span><span class="n">status_codes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_id_list</span><span class="p">(</span><span class="n">id_list</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_EIO</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_status_codes_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">statusCode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status_codes_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status_codes_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">_EIO_MSG_DICT</span> <span class="k">else</span> <span class="mi">5</span>
                <span class="n">message</span> <span class="o">=</span> <span class="n">_EIO_MSG_DICT</span><span class="p">[</span><span class="n">statusCode</span><span class="p">]</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_set_response_codes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">codes</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">codes</span><span class="p">:</span>
            <span class="n">codes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">codes</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">codes</span> <span class="o">=</span> <span class="p">[</span><span class="n">codes</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_response_code_list</span> <span class="o">=</span> <span class="n">codes</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">response_errors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; A list of errors for each field. Each error contains a code and a message.&#39;&#39;&#39;</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        self._response_errors = []</span>
<span class="sd">        for idx, response_code in enumerate(self._response_code_list):</span>
<span class="sd">            if response_code == ErrorCodes.UOE_EIO:</span>
<span class="sd">                status = self._status_codes_list[idx] if self._status_codes_list[idx] in _EIO_MSG_DICT else 5</span>
<span class="sd">                err = {response_code: _EIO_MSG_DICT[status]} </span>
<span class="sd">                self._response_errors.append(err)</span>
<span class="sd">            else:</span>
<span class="sd">                err = {response_code: _ERROR_MESSAGES.get(response_code, &#39;Unknown Error Code&#39;)}</span>
<span class="sd">                self._response_errors.append(err)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_response_errors</span> <span class="o">=</span> <span class="p">[{</span><span class="n">code</span><span class="p">:</span> <span class="n">_EIO_MSG_DICT</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_status_codes_list</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status_codes_list</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="ow">in</span> <span class="n">_EIO_MSG_DICT</span> <span class="k">else</span> <span class="mi">5</span><span class="p">]}</span>\
             <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_EIO</span> <span class="k">else</span> <span class="p">{</span><span class="n">code</span><span class="p">:</span> <span class="n">_ERROR_MESSAGES</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="s1">&#39;Unknown Error Code&#39;</span><span class="p">)}</span> <span class="k">for</span> <span class="n">idx</span><span class="p">,</span><span class="n">code</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_response_code_list</span><span class="p">)]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response_errors</span>

    <span class="k">def</span> <span class="nf">_set_status_codes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">codes</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">codes</span><span class="p">:</span>
            <span class="n">codes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">codes</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">codes</span> <span class="o">=</span> <span class="p">[</span><span class="n">codes</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status_codes_list</span> <span class="o">=</span> <span class="n">codes</span>

    <span class="k">def</span> <span class="nf">_set_id_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ids</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ids</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_id_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">ids</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">ids</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_id_list</span> <span class="o">=</span> <span class="n">ids</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; A list of fields. &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id_list</span>
</pre></div>

        </details>

            <div class="docstring"><p>This class extends the UOError class.
This class can provide each error information for each key read while invoking the <a href="#File.read_named_fields">uopy.File.read_named_fields</a> method.</p>

<p>Attributes:
response_errors: a list of dictionaries.
Each item in the list indicates the error information for each key read from the file.
An example of the content in response_errors is [{0: 'No Error'}, {30001: 'This Record was not found'}].</p>

<p>id_list: a list of the file keys.
An example of the content in id_list is ['0111', 'bad_id']</p>
</div>


                            <div id="UOFileError.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#UOFileError.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">UOFileError</span><span class="signature">(
    code=Ellipsis,
    message=None,
    obj=None,
    response_codes=[],
    status_codes=[],
    id_list=[]
)</span>
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="o">=...</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">response_codes</span><span class="o">=</span><span class="p">[],</span> <span class="n">status_codes</span><span class="o">=</span><span class="p">[],</span> <span class="n">id_list</span><span class="o">=</span><span class="p">[]):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Initializes a UOFileError class.</span>
<span class="sd">        Args:</span>
<span class="sd">            code (int): error code</span>
<span class="sd">            message (string, optinal): error message</span>
<span class="sd">            response_codes (list, optional): a list of response codes returned from the server.</span>
<span class="sd">            status_codes (list, optional): a list of status codes returned from the server.</span>
<span class="sd">            id_list (list, optional): a list of file fields.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_response_codes</span><span class="p">(</span><span class="n">response_codes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_status_codes</span><span class="p">(</span><span class="n">status_codes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_id_list</span><span class="p">(</span><span class="n">id_list</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">ErrorCodes</span><span class="o">.</span><span class="n">UOE_EIO</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_status_codes_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">statusCode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status_codes_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status_codes_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">_EIO_MSG_DICT</span> <span class="k">else</span> <span class="mi">5</span>
                <span class="n">message</span> <span class="o">=</span> <span class="n">_EIO_MSG_DICT</span><span class="p">[</span><span class="n">statusCode</span><span class="p">]</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Initializes a UOFileError class.
Args:
    code (int): error code
    message (string, optinal): error message
    response_codes (list, optional): a list of response codes returned from the server.
    status_codes (list, optional): a list of status codes returned from the server.
    id_list (list, optional): a list of file fields.</p>
</div>


                            </div>
                            <div id="UOFileError.response_errors" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#UOFileError.response_errors">#&nbsp;&nbsp</a>

        <span class="name">response_errors</span>
    </div>

    
            <div class="docstring"><p>A list of errors for each field. Each error contains a code and a message.</p>
</div>


                            </div>
                            <div id="UOFileError.id_list" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#UOFileError.id_list">#&nbsp;&nbsp</a>

        <span class="name">id_list</span>
    </div>

    
            <div class="docstring"><p>A list of fields.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>builtins.BaseException</dt>
                                <dd id="UOFileError.with_traceback" class="function">with_traceback</dd>
                <dd id="UOFileError.args" class="variable">args</dd>

            </div>
                                </dl>
                            </div>
                </section>
    </main>
</body>
</html>